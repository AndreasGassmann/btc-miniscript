function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t,r,n,i,o,s,a,u,p,l,f,c,h,d,y,g,E,m,v,b,w,I=globalThis;function S(e){return e&&e.__esModule?e.default:e}var T={},_={},x=I.parcelRequire9d24;null==x&&((x=function(e){if(e in T)return T[e].exports;if(e in _){var t=_[e];delete _[e];var r={id:e,exports:{}};return T[e]=r,t.call(r.exports,r,r.exports),r.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){_[e]=t},I.parcelRequire9d24=x);var O=x.register;O("pyUmM",function(e,t){var r,n,i,o,s=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.AppClient=e.exports.PartialSignature=void 0;var a=x("1suGZ"),u=x("bBRJ3"),p=x("bUD38"),l=x("goh0i"),f=x("fUsjC"),c=x("8GOLq");(i=r||(r={}))[i.GET_PUBKEY=0]="GET_PUBKEY",i[i.REGISTER_WALLET=2]="REGISTER_WALLET",i[i.GET_WALLET_ADDRESS=3]="GET_WALLET_ADDRESS",i[i.SIGN_PSBT=4]="SIGN_PSBT",i[i.GET_MASTER_FINGERPRINT=5]="GET_MASTER_FINGERPRINT",i[i.SIGN_MESSAGE=16]="SIGN_MESSAGE",(o=n||(n={}))[o.CONTINUE_INTERRUPTED=1]="CONTINUE_INTERRUPTED";class h{constructor(e,t,r){this.pubkey=e,this.signature=t,this.tapleafHash=r}}e.exports.PartialSignature=h;class d{constructor(e){this.transport=e}async makeRequest(e,t,r){let i=await this.transport.send(225,e,0,1,t,[36864,57344]);for(;57344===i.readUInt16BE(i.length-2);){if(!r)throw Error("Unexpected SW_INTERRUPTED_EXECUTION");let e=i.slice(0,-2),t=r.execute(e);i=await this.transport.send(248,n.CONTINUE_INTERRUPTED,0,0,t,[36864,57344])}return i.slice(0,-2)}async getAppAndVersion(){let e=await this.transport.send(176,1,0,0),t=0;if(1!==e[t++])throw Error("Unexpected response");let r=e[t++],n=e.slice(t,t+=r).toString("ascii"),i=e[t++],o=e.slice(t,t+=i).toString("ascii"),s=e[t++];return{name:n,version:o,flags:e.slice(t,t+=s)}}async getExtendedPubkey(e,t=!1){let n=(0,a.pathStringToArray)(e);if(n.length>6)throw Error("Path too long. At most 6 levels allowed.");return(await this.makeRequest(r.GET_PUBKEY,s.concat([s.from(t?[1]:[0]),(0,a.pathElementsToBuffer)(n)]))).toString("ascii")}async registerWallet(e){await this.validatePolicy(e);let t=new u.ClientCommandInterpreter;t.addKnownWalletPolicy(e);let n=e.serialize(),i=await this.makeRequest(r.REGISTER_WALLET,s.concat([(0,c.createVarint)(n.length),n]),t);if(64!=i.length)throw Error(`Invalid response length. Expected 64 bytes, got ${i.length}`);return[i.subarray(0,32),i.subarray(32)]}async getWalletAddress(e,t,n,i,o){if(0!==n&&1!==n)throw Error("Change can only be 0 or 1");if(i<0||!Number.isInteger(i))throw Error("Invalid address index");if(null!=t&&32!=t.length)throw Error("Invalid HMAC length");await this.validatePolicy(e);let a=new u.ClientCommandInterpreter;a.addKnownWalletPolicy(e);let p=s.alloc(4);return p.writeUInt32BE(i,0),(await this.makeRequest(r.GET_WALLET_ADDRESS,s.concat([s.from(o?[1]:[0]),e.getId(),t||s.alloc(32,0),s.from([n]),p]),a)).toString("ascii")}async signPsbt(e,t,n,i){if(await this.validatePolicy(t),"string"==typeof e&&(e=s.from(e,"base64")),s.isBuffer(e)){let t=new f.PsbtV2;t.deserialize(e),e=t}let o=new p.MerkelizedPsbt(e);if(null!=n&&32!=n.length)throw Error("Invalid HMAC length");let a=new u.ClientCommandInterpreter(i);for(let e of(a.addKnownWalletPolicy(t),a.addKnownMapping(o.globalMerkleMap),o.inputMerkleMaps))a.addKnownMapping(e);for(let e of o.outputMerkleMaps)a.addKnownMapping(e);a.addKnownList(o.inputMapCommitments);let d=new l.Merkle(o.inputMapCommitments.map(e=>(0,l.hashLeaf)(e))).getRoot();a.addKnownList(o.outputMapCommitments);let y=new l.Merkle(o.outputMapCommitments.map(e=>(0,l.hashLeaf)(e))).getRoot();await this.makeRequest(r.SIGN_PSBT,s.concat([o.getGlobalKeysValuesRoot(),(0,c.createVarint)(o.getGlobalInputCount()),d,(0,c.createVarint)(o.getGlobalOutputCount()),y,t.getId(),n||s.alloc(32,0)]),a);let g=a.getYielded(),E=[];for(let e of g){let[t,r]=(0,c.parseVarint)(e,0),n=e[r],i=function(e,t){if(64==e.length)return new h(e.slice(0,32),t,e.slice(32,64));if(32==e.length||33==e.length)return new h(e,t);throw Error(`Invalid length for pubkeyAugm: ${e.length} bytes.`)}(e.subarray(r+1,r+1+n),e.subarray(r+1+n));E.push([Number(t),i])}return E}async getMasterFingerprint(){return(await this.makeRequest(r.GET_MASTER_FINGERPRINT,s.from([]))).toString("hex")}async signMessage(e,t){let n=(0,a.pathStringToArray)(t),i=new u.ClientCommandInterpreter,o=Math.ceil(e.length/64),p=[];for(let t=0;t<o;t++)p.push(e.subarray(64*t,64*t+64));i.addKnownList(p);let f=new l.Merkle(p.map(e=>(0,l.hashLeaf)(e))).getRoot();return(await this.makeRequest(r.SIGN_MESSAGE,s.concat([(0,a.pathElementsToBuffer)(n),(0,c.createVarint)(e.length),f]),i)).toString("base64")}async validatePolicy(e){if((e.descriptorTemplate.match(/[asctdvjnlu]+:/g)||[]).some(e=>e.includes("a"))&&["2.1.0","2.1.1"].includes((await this.getAppAndVersion()).version))throw Error("Please update your Ledger Bitcoin app.")}}e.exports.AppClient=d,e.exports.default=d}),O("6ZWSX",function(t,r){e(t.exports,"Buffer",()=>n,e=>n=e),e(t.exports,"SlowBuffer",()=>i,e=>i=e),e(t.exports,"INSPECT_MAX_BYTES",()=>o,e=>o=e),e(t.exports,"kMaxLength",()=>s,e=>s=e);var n,i,o,s,a=x("kuxul"),u=x("9NvM5");let p="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function l(e){if(e>2147483647)throw RangeError('The value "'+e+'" is invalid for option "size"');let t=new Uint8Array(e);return Object.setPrototypeOf(t,f.prototype),t}function f(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return d(e)}return c(e,t,r)}function c(e,t,r){if("string"==typeof e)return function(e,t){if(("string"!=typeof t||""===t)&&(t="utf8"),!f.isEncoding(t))throw TypeError("Unknown encoding: "+t);let r=0|m(e,t),n=l(r),i=n.write(e,t);return i!==r&&(n=n.slice(0,i)),n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(j(e,Uint8Array)){let t=new Uint8Array(e);return g(t.buffer,t.byteOffset,t.byteLength)}return y(e)}(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(j(e,ArrayBuffer)||e&&j(e.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(j(e,SharedArrayBuffer)||e&&j(e.buffer,SharedArrayBuffer)))return g(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');let n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return f.from(n,t,r);let i=function(e){var t;if(f.isBuffer(e)){let t=0|E(e.length),r=l(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||(t=e.length)!=t?l(0):y(e):"Buffer"===e.type&&Array.isArray(e.data)?y(e.data):void 0}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return f.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function h(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function d(e){return h(e),l(e<0?0:0|E(e))}function y(e){let t=e.length<0?0:0|E(e.length),r=l(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function g(e,t,r){let n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),f.prototype),n}function E(e){if(e>=2147483647)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function m(e,t){if(f.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||j(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);let r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return H(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return F(e).length;default:if(i)return n?-1:H(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){let n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=V[e[n]];return i}(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":var i,o;return i=t,o=r,0===i&&o===this.length?a.fromByteArray(this):a.fromByteArray(this.slice(i,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){let n=e.slice(t,r),i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}(this,t,r);default:if(n)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function w(e,t,r,n,i){var o;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),(o=r=+r)!=o&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return -1;r=e.length-1}else if(r<0){if(!i)return -1;r=0}if("string"==typeof t&&(t=f.from(t,n)),f.isBuffer(t))return 0===t.length?-1:I(e,t,r,n,i);if("number"==typeof t)return(t&=255,"function"==typeof Uint8Array.prototype.indexOf)?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):I(e,[t],r,n,i);throw TypeError("val must be string, number or Buffer")}function I(e,t,r,n,i){let o,s=1,a=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;s=2,a/=2,u/=2,r/=2}function p(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(i){let n=-1;for(o=r;o<a;o++)if(p(e,o)===p(t,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===u)return n*s}else -1!==n&&(o-=o-n),n=-1}else for(r+u>a&&(r=a-u),o=r;o>=0;o--){let r=!0;for(let n=0;n<u;n++)if(p(e,o+n)!==p(t,n)){r=!1;break}if(r)return o}return -1}function S(e,t,r){r=Math.min(e.length,r);let n=[],i=t;for(;i<r;){let t=e[i],o=null,s=t>239?4:t>223?3:t>191?2:1;if(i+s<=r){let r,n,a,u;switch(s){case 1:t<128&&(o=t);break;case 2:(192&(r=e[i+1]))==128&&(u=(31&t)<<6|63&r)>127&&(o=u);break;case 3:r=e[i+1],n=e[i+2],(192&r)==128&&(192&n)==128&&(u=(15&t)<<12|(63&r)<<6|63&n)>2047&&(u<55296||u>57343)&&(o=u);break;case 4:r=e[i+1],n=e[i+2],a=e[i+3],(192&r)==128&&(192&n)==128&&(192&a)==128&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&a)>65535&&u<1114112&&(o=u)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(e){let t=e.length;if(t<=4096)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=4096));return r}(n)}function T(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function _(e,t,r,n,i,o){if(!f.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function O(e,t,r,n,i){L(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,r}function P(e,t,r,n,i){L(t,n,i,e,r,7);let o=Number(t&BigInt(4294967295));e[r+7]=o,o>>=8,e[r+6]=o,o>>=8,e[r+5]=o,o>>=8,e[r+4]=o;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=s,s>>=8,e[r+2]=s,s>>=8,e[r+1]=s,s>>=8,e[r]=s,r+8}function A(e,t,r,n,i,o){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function k(e,t,r,n,i){return t=+t,r>>>=0,i||A(e,t,r,4,34028234663852886e22,-34028234663852886e22),u.write(e,t,r,n,23,4),r+4}function N(e,t,r,n,i){return t=+t,r>>>=0,i||A(e,t,r,8,17976931348623157e292,-17976931348623157e292),u.write(e,t,r,n,52,8),r+8}n=f,i=function(e){return+e!=e&&(e=0),f.alloc(+e)},o=50,s=2147483647,f.TYPED_ARRAY_SUPPORT=function(){try{let e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),f.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(f.prototype,"parent",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.buffer}}),Object.defineProperty(f.prototype,"offset",{enumerable:!0,get:function(){if(f.isBuffer(this))return this.byteOffset}}),f.poolSize=8192,f.from=function(e,t,r){return c(e,t,r)},Object.setPrototypeOf(f.prototype,Uint8Array.prototype),Object.setPrototypeOf(f,Uint8Array),f.alloc=function(e,t,r){return(h(e),e<=0)?l(e):void 0!==t?"string"==typeof r?l(e).fill(t,r):l(e).fill(t):l(e)},f.allocUnsafe=function(e){return d(e)},f.allocUnsafeSlow=function(e){return d(e)},f.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==f.prototype},f.compare=function(e,t){if(j(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),j(t,Uint8Array)&&(t=f.from(t,t.offset,t.byteLength)),!f.isBuffer(e)||!f.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},f.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(e,t){let r;if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return f.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;let n=f.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){let t=e[r];if(j(t,Uint8Array))i+t.length>n.length?(f.isBuffer(t)||(t=f.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else if(f.isBuffer(t))t.copy(n,i);else throw TypeError('"list" argument must be an Array of Buffers');i+=t.length}return n},f.byteLength=m,f.prototype._isBuffer=!0,f.prototype.swap16=function(){let e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},f.prototype.swap32=function(){let e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},f.prototype.swap64=function(){let e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},f.prototype.toString=function(){let e=this.length;return 0===e?"":0==arguments.length?S(this,0,e):v.apply(this,arguments)},f.prototype.toLocaleString=f.prototype.toString,f.prototype.equals=function(e){if(!f.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===f.compare(this,e)},f.prototype.inspect=function(){let e="",t=o;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"},p&&(f.prototype[p]=f.prototype.inspect),f.prototype.compare=function(e,t,r,n,i){if(j(e,Uint8Array)&&(e=f.from(e,e.offset,e.byteLength)),!f.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;let o=i-n,s=r-t,a=Math.min(o,s),u=this.slice(n,i),p=e.slice(t,r);for(let e=0;e<a;++e)if(u[e]!==p[e]){o=u[e],s=p[e];break}return o<s?-1:s<o?1:0},f.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},f.prototype.indexOf=function(e,t,r){return w(this,e,t,r,!0)},f.prototype.lastIndexOf=function(e,t,r){return w(this,e,t,r,!1)},f.prototype.write=function(e,t,r,n){var i,o,s,a,u,p,l,f;if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let c=this.length-t;if((void 0===r||r>c)&&(r=c),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let h=!1;for(;;)switch(n){case"hex":return function(e,t,r,n){let i;r=Number(r)||0;let o=e.length-r;n?(n=Number(n))>o&&(n=o):n=o;let s=t.length;for(n>s/2&&(n=s/2),i=0;i<n;++i){let n=parseInt(t.substr(2*i,2),16);if(n!=n)break;e[r+i]=n}return i}(this,e,t,r);case"utf8":case"utf-8":return i=t,o=r,G(H(e,this.length-i),this,i,o);case"ascii":case"latin1":case"binary":return s=t,a=r,G(function(e){let t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(e),this,s,a);case"base64":return u=t,p=r,G(F(e),this,u,p);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return l=t,f=r,G(function(e,t){let r,n;let i=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)n=(r=e.charCodeAt(o))>>8,i.push(r%256),i.push(n);return i}(e,this.length-l),this,l,f);default:if(h)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),h=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},f.prototype.slice=function(e,t){let r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);let n=this.subarray(e,t);return Object.setPrototypeOf(n,f.prototype),n},f.prototype.readUintLE=f.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n},f.prototype.readUintBE=f.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},f.prototype.readUint8=f.prototype.readUInt8=function(e,t){return e>>>=0,t||T(e,1,this.length),this[e]},f.prototype.readUint16LE=f.prototype.readUInt16LE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]|this[e+1]<<8},f.prototype.readUint16BE=f.prototype.readUInt16BE=function(e,t){return e>>>=0,t||T(e,2,this.length),this[e]<<8|this[e+1]},f.prototype.readUint32LE=f.prototype.readUInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},f.prototype.readUint32BE=f.prototype.readUInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},f.prototype.readBigUInt64LE=W(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=t+256*this[++e]+65536*this[++e]+16777216*this[++e],i=this[++e]+256*this[++e]+65536*this[++e]+16777216*r;return BigInt(n)+(BigInt(i)<<BigInt(32))}),f.prototype.readBigUInt64BE=W(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];(void 0===t||void 0===r)&&M(e,this.length-8);let n=16777216*t+65536*this[++e]+256*this[++e]+this[++e],i=16777216*this[++e]+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)}),f.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);let n=this[e],i=1,o=0;for(;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},f.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||T(e,t,this.length);let n=t,i=1,o=this[e+--n];for(;n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},f.prototype.readInt8=function(e,t){return(e>>>=0,t||T(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},f.prototype.readInt16LE=function(e,t){e>>>=0,t||T(e,2,this.length);let r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt16BE=function(e,t){e>>>=0,t||T(e,2,this.length);let r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},f.prototype.readInt32LE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},f.prototype.readInt32BE=function(e,t){return e>>>=0,t||T(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},f.prototype.readBigInt64LE=W(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&M(e,this.length-8),(BigInt(this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24))<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+16777216*this[++e])}),f.prototype.readBigInt64BE=W(function(e){C(e>>>=0,"offset");let t=this[e],r=this[e+7];return(void 0===t||void 0===r)&&M(e,this.length-8),(BigInt((t<<24)+65536*this[++e]+256*this[++e]+this[++e])<<BigInt(32))+BigInt(16777216*this[++e]+65536*this[++e]+256*this[++e]+r)}),f.prototype.readFloatLE=function(e,t){return e>>>=0,t||T(e,4,this.length),u.read(this,e,!0,23,4)},f.prototype.readFloatBE=function(e,t){return e>>>=0,t||T(e,4,this.length),u.read(this,e,!1,23,4)},f.prototype.readDoubleLE=function(e,t){return e>>>=0,t||T(e,8,this.length),u.read(this,e,!0,52,8)},f.prototype.readDoubleBE=function(e,t){return e>>>=0,t||T(e,8,this.length),u.read(this,e,!1,52,8)},f.prototype.writeUintLE=f.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},f.prototype.writeUintBE=f.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){let n=Math.pow(2,8*r)-1;_(this,e,t,r,n,0)}let i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},f.prototype.writeUint8=f.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,255,0),this[t]=255&e,t+1},f.prototype.writeUint16LE=f.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeUint16BE=f.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeUint32LE=f.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},f.prototype.writeUint32BE=f.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigUInt64LE=W(function(e,t=0){return O(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeBigUInt64BE=W(function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))}),f.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=0,o=1,s=0;for(this[t]=255&e;++i<r&&(o*=256);)e<0&&0===s&&0!==this[t+i-1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},f.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){let n=Math.pow(2,8*r-1);_(this,e,t,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[t+i]=255&e;--i>=0&&(o*=256);)e<0&&0===s&&0!==this[t+i+1]&&(s=1),this[t+i]=(e/o>>0)-s&255;return t+r},f.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},f.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},f.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},f.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},f.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||_(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},f.prototype.writeBigInt64LE=W(function(e,t=0){return O(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeBigInt64BE=W(function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),f.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},f.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},f.prototype.writeDoubleLE=function(e,t,r){return N(this,e,t,!0,r)},f.prototype.writeDoubleBE=function(e,t,r){return N(this,e,t,!1,r)},f.prototype.copy=function(e,t,r,n){if(!f.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);let i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},f.prototype.fill=function(e,t,r,n){let i;if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){let t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{let o=f.isBuffer(e)?e:f.from(e,n),s=o.length;if(0===s)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%s]}return this};let R={};function U(e,t,r){R[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function B(e){let t="",r=e.length,n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function L(e,t,r,n,i,o){if(e>r||e<t){let n;let i="bigint"==typeof t?"n":"";throw n=o>3?0===t||t===BigInt(0)?`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:`>= ${t}${i} and <= ${r}${i}`,new R.ERR_OUT_OF_RANGE("value",n,e)}C(i,"offset"),(void 0===n[i]||void 0===n[i+o])&&M(i,n.length-(o+1))}function C(e,t){if("number"!=typeof e)throw new R.ERR_INVALID_ARG_TYPE(t,"number",e)}function M(e,t,r){if(Math.floor(e)!==e)throw C(e,r),new R.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new R.ERR_BUFFER_OUT_OF_BOUNDS;throw new R.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}U("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),U("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),U("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>4294967296?i=B(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=B(i)),i+="n"),n+=` It must be ${t}. Received ${i}`},RangeError);let D=/[^+/0-9A-Za-z-_]/g;function H(e,t){let r;t=t||1/0;let n=e.length,i=null,o=[];for(let s=0;s<n;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!i){if(r>56319||s+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return o}function F(e){return a.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(D,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function j(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}let V=function(){let e="0123456789abcdef",t=Array(256);for(let r=0;r<16;++r){let n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function W(e){return"undefined"==typeof BigInt?K:e}function K(){throw Error("BigInt not supported")}}),O("kuxul",function(t,r){e(t.exports,"toByteArray",()=>n,e=>n=e),e(t.exports,"fromByteArray",()=>i,e=>i=e),n=function(e){var t,r,n=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}(e),i=n[0],o=n[1],u=new a((i+o)*3/4-o),p=0,l=o>0?i-4:i;for(r=0;r<l;r+=4)t=s[e.charCodeAt(r)]<<18|s[e.charCodeAt(r+1)]<<12|s[e.charCodeAt(r+2)]<<6|s[e.charCodeAt(r+3)],u[p++]=t>>16&255,u[p++]=t>>8&255,u[p++]=255&t;return 2===o&&(t=s[e.charCodeAt(r)]<<2|s[e.charCodeAt(r+1)]>>4,u[p++]=255&t),1===o&&(t=s[e.charCodeAt(r)]<<10|s[e.charCodeAt(r+1)]<<4|s[e.charCodeAt(r+2)]>>2,u[p++]=t>>8&255,u[p++]=255&t),u},i=function(e){for(var t,r=e.length,n=r%3,i=[],s=0,a=r-n;s<a;s+=16383)i.push(function(e,t,r){for(var n,i=[],s=t;s<r;s+=3)i.push(o[(n=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+o[n>>12&63]+o[n>>6&63]+o[63&n]);return i.join("")}(e,s,s+16383>a?a:s+16383));return 1===n?i.push(o[(t=e[r-1])>>2]+o[t<<4&63]+"=="):2===n&&i.push(o[(t=(e[r-2]<<8)+e[r-1])>>10]+o[t>>4&63]+o[t<<2&63]+"="),i.join("")};for(var n,i,o=[],s=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",p=0,l=u.length;p<l;++p)o[p]=u[p],s[u.charCodeAt(p)]=p;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63}),O("9NvM5",function(t,r){var n,i;e(t.exports,"read",()=>n,e=>n=e),e(t.exports,"write",()=>i,e=>i=e),n=function(e,t,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,p=u>>1,l=-7,f=r?i-1:0,c=r?-1:1,h=e[t+f];for(f+=c,o=h&(1<<-l)-1,h>>=-l,l+=a;l>0;o=256*o+e[t+f],f+=c,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+e[t+f],f+=c,l-=8);if(0===o)o=1-p;else{if(o===u)return s?NaN:1/0*(h?-1:1);s+=Math.pow(2,n),o-=p}return(h?-1:1)*s*Math.pow(2,o-n)},i=function(e,t,r,n,i,o){var s,a,u,p=8*o-i-1,l=(1<<p)-1,f=l>>1,c=23===i?5960464477539062e-23:0,h=n?0:o-1,d=n?1:-1,y=t<0||0===t&&1/t<0?1:0;for(isNaN(t=Math.abs(t))||t===1/0?(a=isNaN(t)?1:0,s=l):(s=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-s))<1&&(s--,u*=2),s+f>=1?t+=c/u:t+=c*Math.pow(2,1-f),t*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(t*u-1)*Math.pow(2,i),s+=f):(a=t*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;e[r+h]=255&a,h+=d,a/=256,i-=8);for(s=s<<i|a,p+=i;p>0;e[r+h]=255&s,h+=d,s/=256,p-=8);e[r+h-d]|=128*y}}),O("1suGZ",function(e,t){var r=x("6ZWSX").Buffer,n=e.exports&&e.exports.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hardenedPathOf=e.exports.getXpubComponents=e.exports.pubkeyFromXpub=e.exports.pathStringToArray=e.exports.pathArrayToString=e.exports.bip32asBuffer=e.exports.pathElementsToBuffer=void 0;let i=n(x("4c5Uh")),o=n(x("lpa1P"));function s(e){let t=r.alloc(1+4*e.length);return t[0]=e.length,e.forEach((e,r)=>{t.writeUInt32BE(e,1+4*r)}),t}function a(e){return"m"==e||""==e?[]:i.default.fromString(e).toPathArray()}e.exports.pathElementsToBuffer=s,e.exports.bip32asBuffer=function(e){return s(e?a(e):[])},e.exports.pathArrayToString=function(e){return 0==e.length?"m":i.default.fromPathArray(e).toString()},e.exports.pathStringToArray=a,e.exports.pubkeyFromXpub=function(e){let t=o.default.decode(e);return t.slice(t.length-33)},e.exports.getXpubComponents=function(e){let t=o.default.decode(e);return{chaincode:t.slice(13,45),pubkey:t.slice(t.length-33),version:t.readUInt32BE(0)}},e.exports.hardenedPathOf=function(e){for(let t=e.length-1;t>=0;t--)if(e[t]>=2147483648)return e.slice(0,t+1);return[]}}),O("4c5Uh",function(e,t){var r=function(e){if(!Array.isArray(e))throw Error("Input must be an Array");if(0===e.length)throw Error("Path must contain at least one level");for(var t=0;t<e.length;t++)if("number"!=typeof e[t])throw Error("Path element is not a number");this.path=e};r.validatePathArray=function(e){try{return r.fromPathArray(e),!0}catch(e){return!1}},r.validateString=function(e,t){try{return r.fromString(e,t),!0}catch(e){return!1}},r.fromPathArray=function(e){return new r(e)},r.fromString=function(e,t){if(/^m\//i.test(e))e=e.slice(2);else if(t)throw Error("Root element is required");for(var n=e.split("/"),i=Array(n.length),o=0;o<n.length;o++){var s=/(\d+)([hH\']?)/.exec(n[o]);if(null===s)throw Error("Invalid input");if(i[o]=parseInt(s[1],10),i[o]>=2147483648)throw Error("Invalid child index");if("h"===s[2]||"H"===s[2]||"'"===s[2])i[o]+=2147483648;else if(0!=s[2].length)throw Error("Invalid modifier")}return new r(i)},r.prototype.toPathArray=function(){return this.path},r.prototype.toString=function(e,t){for(var r=Array(this.path.length),n=0;n<this.path.length;n++){var i=this.path[n];2147483648&i?r[n]=(2147483647&i)+(t?"h":"'"):r[n]=i}return(e?"":"m/")+r.join("/")},r.prototype.inspect=function(){return"BIPPath <"+this.toString()+">"},e.exports=r}),O("lpa1P",function(e,t){var r=x("6XnWx").sha256,n=x("bJNmB");e.exports=n(function(e){return r(r(e))})}),O("6XnWx",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha224=e.exports.sha256=void 0;var r=x("iYRTw"),n=x("3Bcdj");let i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),o=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),s=new Uint32Array(64);class a extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}get(){let{A:e,B:t,C:r,D:n,E:i,F:o,G:s,H:a}=this;return[e,t,r,n,i,o,s,a]}set(e,t,r,n,i,o,s,a){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i,this.F=0|o,this.G=0|s,this.H=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=s[e-15],r=s[e-2],i=(0,n.rotr)(t,7)^(0,n.rotr)(t,18)^t>>>3,o=(0,n.rotr)(r,17)^(0,n.rotr)(r,19)^r>>>10;s[e]=o+s[e-7]+i+s[e-16]|0}let{A:o,B:a,C:u,D:p,E:l,F:f,G:c,H:h}=this;for(let e=0;e<64;e++){let t=h+((0,n.rotr)(l,6)^(0,n.rotr)(l,11)^(0,n.rotr)(l,25))+(0,r.Chi)(l,f,c)+i[e]+s[e]|0,d=((0,n.rotr)(o,2)^(0,n.rotr)(o,13)^(0,n.rotr)(o,22))+(0,r.Maj)(o,a,u)|0;h=c,c=f,f=l,l=p+t|0,p=u,u=a,a=o,o=t+d|0}o=o+this.A|0,a=a+this.B|0,u=u+this.C|0,p=p+this.D|0,l=l+this.E|0,f=f+this.F|0,c=c+this.G|0,h=h+this.H|0,this.set(o,a,u,p,l,f,c,h)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends a{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}e.exports.sha256=(0,n.wrapConstructor)(()=>new a),e.exports.sha224=(0,n.wrapConstructor)(()=>new u)}),O("iYRTw",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.HashMD=e.exports.Maj=e.exports.Chi=void 0;var r=x("dNiq9"),n=x("3Bcdj");e.exports.Chi=(e,t,r)=>e&t^~e&r,e.exports.Maj=(e,t,r)=>e&t^e&r^t&r;class i extends n.Hash{constructor(e,t,r,i){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,n.createView)(this.buffer)}update(e){(0,r.exists)(this);let{view:t,buffer:i,blockLen:o}=this,s=(e=(0,n.toBytes)(e)).length;for(let r=0;r<s;){let a=Math.min(o-this.pos,s-r);if(a===o){let t=(0,n.createView)(e);for(;o<=s-r;r+=o)this.process(t,r);continue}i.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===o&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.exists)(this),(0,r.output)(e,this),this.finished=!0;let{buffer:t,view:i,blockLen:o,isLE:s}=this,{pos:a}=this;t[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(i,0),a=0);for(let e=a;e<o;e++)t[e]=0;(function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let i=BigInt(32),o=BigInt(4294967295),s=Number(r>>i&o),a=Number(r&o),u=n?4:0,p=n?0:4;e.setUint32(t+u,s,n),e.setUint32(t+p,a,n)})(i,o-8,BigInt(8*this.length),s),this.process(i,0);let u=(0,n.createView)(e),p=this.outputLen;if(p%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=p/4,f=this.get();if(l>f.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,f[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:i,destroyed:o,pos:s}=this;return e.length=n,e.pos=s,e.finished=i,e.destroyed=o,n%t&&e.buffer.set(r),e}}e.exports.HashMD=i}),O("dNiq9",function(e,t){function r(e){if(!Number.isSafeInteger(e)||e<0)throw Error(`positive integer expected, not ${e}`)}function n(e){if("boolean"!=typeof e)throw Error(`boolean expected, not ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function o(e,...t){if(!i(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function s(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function a(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function u(e,t){o(e);let r=t.outputLen;if(e.length<r)throw Error(`digestInto() expects output buffer of length at least ${r}`)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.output=e.exports.exists=e.exports.hash=e.exports.bytes=e.exports.bool=e.exports.number=e.exports.isBytes=void 0,e.exports.number=r,e.exports.bool=n,e.exports.isBytes=i,e.exports.bytes=o,e.exports.hash=s,e.exports.exists=a,e.exports.output=u,e.exports.default={number:r,bool:n,bytes:o,hash:s,exists:a,output:u}}),O("3Bcdj",function(e,t){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.randomBytes=e.exports.wrapXOFConstructorWithOpts=e.exports.wrapConstructorWithOpts=e.exports.wrapConstructor=e.exports.checkOpts=e.exports.Hash=e.exports.concatBytes=e.exports.toBytes=e.exports.utf8ToBytes=e.exports.asyncLoop=e.exports.nextTick=e.exports.hexToBytes=e.exports.bytesToHex=e.exports.byteSwap32=e.exports.byteSwapIfBE=e.exports.byteSwap=e.exports.isLE=e.exports.rotl=e.exports.rotr=e.exports.createView=e.exports.u32=e.exports.u8=e.exports.isBytes=void 0;var r=x("dUxV2"),n=x("dNiq9");e.exports.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name},e.exports.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),e.exports.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),e.exports.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),e.exports.rotr=(e,t)=>e<<32-t|e>>>t,e.exports.rotl=(e,t)=>e<<t|e>>>32-t>>>0,e.exports.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],e.exports.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,e.exports.byteSwapIfBE=e.exports.isLE?e=>e:t=>(0,e.exports.byteSwap)(t),e.exports.byteSwap32=function(t){for(let r=0;r<t.length;r++)t[r]=(0,e.exports.byteSwap)(t[r])};let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));e.exports.bytesToHex=function(e){(0,n.bytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t};let o={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function s(e){return e>=o._0&&e<=o._9?e-o._0:e>=o._A&&e<=o._F?e-(o._A-10):e>=o._a&&e<=o._f?e-(o._a-10):void 0}e.exports.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,i=0;t<r;t++,i+=2){let r=s(e.charCodeAt(i)),o=s(e.charCodeAt(i+1));if(void 0===r||void 0===o)throw Error('hex string expected, got non-hex character "'+(e[i]+e[i+1])+'" at index '+i);n[t]=16*r+o}return n};let a=async()=>{};async function u(t,r,n){let i=Date.now();for(let o=0;o<t;o++){n(o);let t=Date.now()-i;t>=0&&t<r||(await (0,e.exports.nextTick)(),i+=t)}}function p(e){if("string"!=typeof e)throw Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function l(e){return"string"==typeof e&&(e=p(e)),(0,n.bytes)(e),e}e.exports.nextTick=a,e.exports.asyncLoop=u,e.exports.utf8ToBytes=p,e.exports.toBytes=l,e.exports.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let i=e[r];(0,n.bytes)(i),t+=i.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let i=e[t];r.set(i,n),n+=i.length}return r},e.exports.Hash=class{clone(){return this._cloneInto()}};let f={}.toString;e.exports.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==f.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},e.exports.wrapConstructor=function(e){let t=t=>e().update(l(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},e.exports.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.exports.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(l(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},e.exports.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw Error("crypto.getRandomValues must be defined")}}),O("dUxV2",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.crypto=void 0,e.exports.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0}),O("bJNmB",function(e,t){var r=x("bYkMz");e.exports=function(e){function t(t){var r=t.slice(0,-4),n=t.slice(-4),i=e(r);if(!(n[0]^i[0]|n[1]^i[1]|n[2]^i[2]|n[3]^i[3]))return r}return{encode:function(t){var n=Uint8Array.from(t),i=e(n),o=n.length+4,s=new Uint8Array(o);return s.set(n,0),s.set(i.subarray(0,4),n.length),r.encode(s,o)},decode:function(n){var i=t(r.decode(n),e);if(!i)throw Error("Invalid checksum");return i},decodeUnsafe:function(e){var n=r.decodeUnsafe(e);if(n)return t(n)}}}}),O("bYkMz",function(e,t){var r=x("0DhcF");e.exports=r("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz")}),O("0DhcF",function(e,t){e.exports=function(e){if(e.length>=255)throw TypeError("Alphabet too long");for(var t=new Uint8Array(256),r=0;r<t.length;r++)t[r]=255;for(var n=0;n<e.length;n++){var i=e.charAt(n),o=i.charCodeAt(0);if(255!==t[o])throw TypeError(i+" is ambiguous");t[o]=n}var s=e.length,a=e.charAt(0),u=Math.log(s)/Math.log(256),p=Math.log(256)/Math.log(s);function l(e){if("string"!=typeof e)throw TypeError("Expected String");if(0===e.length)return new Uint8Array;for(var r=0,n=0,i=0;e[r]===a;)n++,r++;for(var o=(e.length-r)*u+1>>>0,p=new Uint8Array(o);e[r];){var l=t[e.charCodeAt(r)];if(255===l)return;for(var f=0,c=o-1;(0!==l||f<i)&&-1!==c;c--,f++)l+=s*p[c]>>>0,p[c]=l%256>>>0,l=l/256>>>0;if(0!==l)throw Error("Non-zero carry");i=f,r++}for(var h=o-i;h!==o&&0===p[h];)h++;for(var d=new Uint8Array(n+(o-h)),y=n;h!==o;)d[y++]=p[h++];return d}return{encode:function(t){if(t instanceof Uint8Array||(ArrayBuffer.isView(t)?t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength):Array.isArray(t)&&(t=Uint8Array.from(t))),!(t instanceof Uint8Array))throw TypeError("Expected Uint8Array");if(0===t.length)return"";for(var r=0,n=0,i=0,o=t.length;i!==o&&0===t[i];)i++,r++;for(var u=(o-i)*p+1>>>0,l=new Uint8Array(u);i!==o;){for(var f=t[i],c=0,h=u-1;(0!==f||c<n)&&-1!==h;h--,c++)f+=256*l[h]>>>0,l[h]=f%s>>>0,f=f/s>>>0;if(0!==f)throw Error("Non-zero carry");n=c,i++}for(var d=u-n;d!==u&&0===l[d];)d++;for(var y=a.repeat(r);d<u;++d)y+=e.charAt(l[d]);return y},decodeUnsafe:l,decode:function(e){var t=l(e);if(t)return t;throw Error("Non-base"+s+" character")}}}}),O("bBRJ3",function(e,t){var r,n,i=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ClientCommandInterpreter=e.exports.GetMoreElementsCommand=e.exports.GetMerkleLeafIndexCommand=e.exports.GetMerkleLeafProofCommand=e.exports.GetPreimageCommand=e.exports.YieldCommand=void 0;var o=x("3wrUl"),s=x("8rRzQ"),a=x("goh0i"),u=x("8GOLq");(n=r||(r={}))[n.YIELD=16]="YIELD",n[n.GET_PREIMAGE=64]="GET_PREIMAGE",n[n.GET_MERKLE_LEAF_PROOF=65]="GET_MERKLE_LEAF_PROOF",n[n.GET_MERKLE_LEAF_INDEX=66]="GET_MERKLE_LEAF_INDEX",n[n.GET_MORE_ELEMENTS=160]="GET_MORE_ELEMENTS";class p{}class l extends p{constructor(e,t){super(),this.progressCallback=t,this.code=r.YIELD,this.results=e}execute(e){return this.results.push(i.from(e.subarray(1))),this.progressCallback&&this.progressCallback(),i.from("")}}e.exports.YieldCommand=l;class f extends p{constructor(e,t){super(),this.code=r.GET_PREIMAGE,this.known_preimages=e,this.queue=t}execute(e){let t=i.from(e.subarray(1));if(33!=t.length)throw Error("Invalid request, unexpected trailing data");if(0!=t[0])throw Error("Unsupported request, the first byte should be 0");let r=i.alloc(32);for(let e=0;e<32;e++)r[e]=t[1+e];let n=r.toString("hex"),o=this.known_preimages.get(n);if(void 0!=o){let e=(0,u.createVarint)(o.length),t=Math.min(255-e.length-1,o.length);if(t<o.length)for(let e=t;e<o.length;e++)this.queue.push(i.from([o[e]]));return i.concat([e,i.from([t]),i.from(o.subarray(0,t))])}throw Error(`Requested unknown preimage for: ${n}`)}}e.exports.GetPreimageCommand=f;class c extends p{constructor(e,t){super(),this.code=r.GET_MERKLE_LEAF_PROOF,this.known_trees=e,this.queue=t}execute(e){let t,r;let n=i.from(e.subarray(1));if(n.length<34)throw Error("Invalid request, expected at least 34 bytes");let o=new s.BufferReader(n),a=o.readSlice(32).toString("hex");try{t=(0,u.sanitizeBigintToNumber)(o.readVarInt()),r=(0,u.sanitizeBigintToNumber)(o.readVarInt())}catch(e){throw Error("Invalid request, couldn't parse tree_size or leaf_index")}let p=this.known_trees.get(a);if(!p)throw Error(`Requested Merkle leaf proof for unknown tree: ${a}`);if(r>=t||p.size()!=t)throw Error("Invalid index or tree size.");if(0!=this.queue.length)throw Error("This command should not execute when the queue is not empty.");let l=p.getProof(r),f=Math.min(Math.floor(6.90625),l.length),c=l.length-f;return c>0&&this.queue.push(...l.slice(-c)),i.concat([p.getLeafHash(r),i.from([l.length]),i.from([f]),...l.slice(0,f)])}}e.exports.GetMerkleLeafProofCommand=c;class h extends p{constructor(e){super(),this.code=r.GET_MERKLE_LEAF_INDEX,this.known_trees=e}execute(e){let t=i.from(e.subarray(1));if(64!=t.length)throw Error("Invalid request, unexpected trailing data");let r=i.alloc(32);for(let e=0;e<32;e++)r[e]=t.readUInt8(e);let n=r.toString("hex"),o=i.alloc(32);for(let e=0;e<32;e++)o[e]=t.readUInt8(32+e);let s=o.toString("hex"),a=this.known_trees.get(n);if(!a)throw Error(`Requested Merkle leaf index for unknown root: ${n}`);let p=0,l=0;for(let e=0;e<a.size();e++)if(a.getLeafHash(e).toString("hex")==s){l=1,p=e;break}return i.concat([i.from([l]),(0,u.createVarint)(p)])}}e.exports.GetMerkleLeafIndexCommand=h;class d extends p{constructor(e){super(),this.code=r.GET_MORE_ELEMENTS,this.queue=e}execute(e){if(1!=e.length)throw Error("Invalid request, unexpected trailing data");if(0===this.queue.length)throw Error("No elements to get");let t=this.queue[0].length;if(this.queue.some(e=>e.length!=t))throw Error("The queue contains elements with different byte length, which is not expected");let r=Math.min(Math.floor(253/t),this.queue.length),n=this.queue.splice(0,r);return i.concat([i.from([r]),i.from([t]),...n])}}e.exports.GetMoreElementsCommand=d,e.exports.ClientCommandInterpreter=class{constructor(e){for(let t of(this.roots=new Map,this.preimages=new Map,this.yielded=[],this.queue=[],this.commands=new Map,[new l(this.yielded,e),new f(this.preimages,this.queue),new h(this.roots),new c(this.roots,this.queue),new d(this.queue)])){if(this.commands.has(t.code))throw Error(`Multiple commands with code ${t.code}`);this.commands.set(t.code,t)}}getYielded(){return this.yielded}addKnownPreimage(e){this.preimages.set(o.crypto.sha256(e).toString("hex"),e)}addKnownList(e){for(let t of e){let e=i.concat([i.from([0]),t]);this.addKnownPreimage(e)}let t=new a.Merkle(e.map(e=>(0,a.hashLeaf)(e)));this.roots.set(t.getRoot().toString("hex"),t)}addKnownMapping(e){this.addKnownList(e.keys),this.addKnownList(e.values)}addKnownWalletPolicy(e){this.addKnownPreimage(e.serialize()),this.addKnownList(e.keys.map(e=>i.from(e,"ascii"))),this.addKnownPreimage(i.from(e.descriptorTemplate))}execute(e){if(0==e.length)throw Error("Unexpected empty command");let t=e[0],r=this.commands.get(t);if(!r)throw Error(`Unexpected command code ${t}`);return r.execute(e)}}}),O("3wrUl",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.initEccLib=e.exports.Transaction=e.exports.opcodes=e.exports.Psbt=e.exports.Block=e.exports.script=e.exports.payments=e.exports.networks=e.exports.crypto=e.exports.address=void 0;var r=x("d1wHE");e.exports.address=r;var n=x("lgTFk");e.exports.crypto=n;var i=x("fjh6Q");e.exports.networks=i;var o=x("j87lX");e.exports.payments=o;var s=x("8wAtk");e.exports.script=s;var a=x("huuL7");Object.defineProperty(e.exports,"Block",{enumerable:!0,get:function(){return a.Block}});var u=x("hXYde");Object.defineProperty(e.exports,"Psbt",{enumerable:!0,get:function(){return u.Psbt}});var p=x("l0in9");Object.defineProperty(e.exports,"opcodes",{enumerable:!0,get:function(){return p.OPS}});var l=x("gMJcK");Object.defineProperty(e.exports,"Transaction",{enumerable:!0,get:function(){return l.Transaction}});var f=x("f6boC");Object.defineProperty(e.exports,"initEccLib",{enumerable:!0,get:function(){return f.initEccLib}})}),O("d1wHE",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.toOutputScript=e.exports.fromOutputScript=e.exports.toBech32=e.exports.toBase58Check=e.exports.fromBech32=e.exports.fromBase58Check=void 0;var n=x("fjh6Q"),i=x("j87lX"),o=x("8wAtk"),s=x("18Mz5"),a=x("db6J2"),u=x("lpa1P");let p="WARNING: Sending to a future segwit version address can lead to loss of funds. End users MUST be warned carefully in the GUI and asked if they wish to proceed with caution. Wallets should verify the segwit version from the output of fromBech32, then decide when it is safe to use which version of segwit.";function l(e){let t=r.from(u.decode(e));if(t.length<21)throw TypeError(e+" is too short");if(t.length>21)throw TypeError(e+" is too long");return{version:t.readUInt8(0),hash:t.slice(1)}}function f(e){let t,n;try{t=a.bech32.decode(e)}catch(e){}if(t){if(0!==(n=t.words[0]))throw TypeError(e+" uses wrong encoding")}else if(0===(n=(t=a.bech32m.decode(e)).words[0]))throw TypeError(e+" uses wrong encoding");let i=a.bech32.fromWords(t.words.slice(1));return{version:n,prefix:t.prefix,data:r.from(i)}}function c(e,t,r){let n=a.bech32.toWords(e);return n.unshift(t),0===t?a.bech32.encode(r,n):a.bech32m.encode(r,n)}e.exports.fromBase58Check=l,e.exports.fromBech32=f,e.exports.toBase58Check=function(e,t){(0,s.typeforce)((0,s.tuple)(s.Hash160bit,s.UInt8),arguments);let n=r.allocUnsafe(21);return n.writeUInt8(t,0),e.copy(n,1),u.encode(n)},e.exports.toBech32=c,e.exports.fromOutputScript=function(e,t){t=t||n.bitcoin;try{return i.p2pkh({output:e,network:t}).address}catch(e){}try{return i.p2sh({output:e,network:t}).address}catch(e){}try{return i.p2wpkh({output:e,network:t}).address}catch(e){}try{return i.p2wsh({output:e,network:t}).address}catch(e){}try{return i.p2tr({output:e,network:t}).address}catch(e){}try{return function(e,t){let r=e.slice(2);if(r.length<2||r.length>40)throw TypeError("Invalid program length for segwit address");let n=e[0]-80;if(n<2||n>16)throw TypeError("Invalid version for segwit address");if(e[1]!==r.length)throw TypeError("Invalid script for segwit address");return console.warn(p),c(r,n,t.bech32)}(e,t)}catch(e){}throw Error(o.toASM(e)+" has no matching Address")},e.exports.toOutputScript=function(e,t){let r,s;t=t||n.bitcoin;try{r=l(e)}catch(e){}if(r){if(r.version===t.pubKeyHash)return i.p2pkh({hash:r.hash}).output;if(r.version===t.scriptHash)return i.p2sh({hash:r.hash}).output}else{try{s=f(e)}catch(e){}if(s){if(s.prefix!==t.bech32)throw Error(e+" has an invalid prefix");if(0===s.version){if(20===s.data.length)return i.p2wpkh({hash:s.data}).output;if(32===s.data.length)return i.p2wsh({hash:s.data}).output}else if(1===s.version){if(32===s.data.length)return i.p2tr({pubkey:s.data}).output}else if(s.version>=2&&s.version<=16&&s.data.length>=2&&s.data.length<=40)return console.warn(p),o.compile([s.version+80,s.data])}}throw Error(e+" has no matching Script")}}),O("fjh6Q",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.testnet=e.exports.regtest=e.exports.bitcoin=void 0,e.exports.bitcoin={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bc",bip32:{public:76067358,private:76066276},pubKeyHash:0,scriptHash:5,wif:128},e.exports.regtest={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"bcrt",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239},e.exports.testnet={messagePrefix:"\x18Bitcoin Signed Message:\n",bech32:"tb",bip32:{public:70617039,private:70615956},pubKeyHash:111,scriptHash:196,wif:239}}),O("j87lX",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2tr=e.exports.p2wsh=e.exports.p2wpkh=e.exports.p2sh=e.exports.p2pkh=e.exports.p2pk=e.exports.p2ms=e.exports.embed=void 0;var r=x("bnRoL");Object.defineProperty(e.exports,"embed",{enumerable:!0,get:function(){return r.p2data}});var n=x("c9fEL");Object.defineProperty(e.exports,"p2ms",{enumerable:!0,get:function(){return n.p2ms}});var i=x("eSuia");Object.defineProperty(e.exports,"p2pk",{enumerable:!0,get:function(){return i.p2pk}});var o=x("jpa81");Object.defineProperty(e.exports,"p2pkh",{enumerable:!0,get:function(){return o.p2pkh}});var s=x("4yk7Y");Object.defineProperty(e.exports,"p2sh",{enumerable:!0,get:function(){return s.p2sh}});var a=x("8P2rG");Object.defineProperty(e.exports,"p2wpkh",{enumerable:!0,get:function(){return a.p2wpkh}});var u=x("576Qs");Object.defineProperty(e.exports,"p2wsh",{enumerable:!0,get:function(){return u.p2wsh}});var p=x("bl5DO");Object.defineProperty(e.exports,"p2tr",{enumerable:!0,get:function(){return p.p2tr}})}),O("bnRoL",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2data=void 0;var r=x("fjh6Q"),n=x("8wAtk"),i=x("18Mz5"),o=x("4v19v");let s=n.OPS;e.exports.p2data=function(e,t){if(!e.data&&!e.output)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,i.typeforce)({network:i.typeforce.maybe(i.typeforce.Object),output:i.typeforce.maybe(i.typeforce.Buffer),data:i.typeforce.maybe(i.typeforce.arrayOf(i.typeforce.Buffer))},e);let a={name:"embed",network:e.network||r.bitcoin};if(o.prop(a,"output",()=>{if(e.data)return n.compile([s.OP_RETURN].concat(e.data))}),o.prop(a,"data",()=>{if(e.output)return n.decompile(e.output).slice(1)}),t.validate&&e.output){var u,p;let t=n.decompile(e.output);if(t[0]!==s.OP_RETURN||!t.slice(1).every(i.typeforce.Buffer))throw TypeError("Output is invalid");if(e.data&&(u=e.data,p=a.data,!(u.length===p.length&&u.every((e,t)=>e.equals(p[t])))))throw TypeError("Data mismatch")}return Object.assign(a,e)}}),O("8wAtk",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.signature=e.exports.number=e.exports.isCanonicalScriptSignature=e.exports.isDefinedHashType=e.exports.isCanonicalPubKey=e.exports.toStack=e.exports.fromASM=e.exports.toASM=e.exports.decompile=e.exports.compile=e.exports.countNonPushOnlyOPs=e.exports.isPushOnly=e.exports.OPS=void 0;var n=x("gDdvx"),i=x("l0in9");Object.defineProperty(e.exports,"OPS",{enumerable:!0,get:function(){return i.OPS}});var o=x("dX1I0"),s=x("1mhXk"),a=x("loONM"),u=x("18Mz5");let{typeforce:p}=u,l=i.OPS.OP_RESERVED;function f(e){return u.Buffer(e)||u.Number(e)&&(e===i.OPS.OP_0||e>=i.OPS.OP_1&&e<=i.OPS.OP_16||e===i.OPS.OP_1NEGATE)}function c(e){return u.Array(e)&&e.every(f)}function h(e){if(0===e.length)return i.OPS.OP_0;if(1===e.length){if(e[0]>=1&&e[0]<=16)return l+e[0];if(129===e[0])return i.OPS.OP_1NEGATE}}function d(e){return r.isBuffer(e)}function y(e){return r.isBuffer(e)}function g(e){if(d(e))return e;p(u.Array,e);let t=e.reduce((e,t)=>y(t)?1===t.length&&void 0!==h(t)?e+1:e+o.encodingLength(t.length)+t.length:e+1,0),n=r.allocUnsafe(t),i=0;if(e.forEach(e=>{if(y(e)){let t=h(e);if(void 0!==t){n.writeUInt8(t,i),i+=1;return}i+=o.encode(n,e.length,i),e.copy(n,i),i+=e.length}else n.writeUInt8(e,i),i+=1}),i!==n.length)throw Error("Could not decode chunks");return n}function E(e){if(u.Array(e))return e;p(u.Buffer,e);let t=[],r=0;for(;r<e.length;){let n=e[r];if(n>i.OPS.OP_0&&n<=i.OPS.OP_PUSHDATA4){let n=o.decode(e,r);if(null===n||(r+=n.size)+n.number>e.length)return null;let i=e.slice(r,r+n.number);r+=n.number;let s=h(i);void 0!==s?t.push(s):t.push(i)}else t.push(n),r+=1}return t}function m(e){let t=-129&e;return t>0&&t<4}e.exports.isPushOnly=c,e.exports.countNonPushOnlyOPs=function(e){return e.length-e.filter(f).length},e.exports.compile=g,e.exports.decompile=E,e.exports.toASM=function(e){return d(e)&&(e=E(e)),e.map(e=>{if(y(e)){let t=h(e);if(void 0===t)return e.toString("hex");e=t}return i.REVERSE_OPS[e]}).join(" ")},e.exports.fromASM=function(e){return p(u.String,e),g(e.split(" ").map(e=>void 0!==i.OPS[e]?i.OPS[e]:(p(u.Hex,e),r.from(e,"hex"))))},e.exports.toStack=function(e){return p(c,e=E(e)),e.map(e=>y(e)?e:e===i.OPS.OP_0?r.allocUnsafe(0):s.encode(e-l))},e.exports.isCanonicalPubKey=function(e){return u.isPoint(e)},e.exports.isDefinedHashType=m,e.exports.isCanonicalScriptSignature=function(e){return!!(r.isBuffer(e)&&m(e[e.length-1]))&&n.check(e.slice(0,-1))},e.exports.number=s,e.exports.signature=a}),O("gDdvx",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=e.exports.check=void 0,e.exports.check=function(e){if(e.length<8||e.length>72||48!==e[0]||e[1]!==e.length-2||2!==e[2])return!1;let t=e[3];if(0===t||5+t>=e.length||2!==e[4+t])return!1;let r=e[5+t];return 0!==r&&6+t+r===e.length&&!(128&e[4])&&(!(t>1)||0!==e[4]||!!(128&e[5]))&&!(128&e[t+6])&&(!(r>1)||0!==e[t+6]||!!(128&e[t+7]))},e.exports.decode=function(e){if(e.length<8)throw Error("DER sequence length is too short");if(e.length>72)throw Error("DER sequence length is too long");if(48!==e[0])throw Error("Expected DER sequence");if(e[1]!==e.length-2)throw Error("DER sequence length is invalid");if(2!==e[2])throw Error("Expected DER integer");let t=e[3];if(0===t)throw Error("R length is zero");if(5+t>=e.length)throw Error("R length is too long");if(2!==e[4+t])throw Error("Expected DER integer (2)");let r=e[5+t];if(0===r)throw Error("S length is zero");if(6+t+r!==e.length)throw Error("S length is invalid");if(128&e[4])throw Error("R value is negative");if(t>1&&0===e[4]&&!(128&e[5]))throw Error("R value excessively padded");if(128&e[t+6])throw Error("S value is negative");if(r>1&&0===e[t+6]&&!(128&e[t+7]))throw Error("S value excessively padded");return{r:e.slice(4,4+t),s:e.slice(6+t)}},e.exports.encode=function(e,t){let n=e.length,i=t.length;if(0===n)throw Error("R length is zero");if(0===i)throw Error("S length is zero");if(n>33)throw Error("R length is too long");if(i>33)throw Error("S length is too long");if(128&e[0])throw Error("R value is negative");if(128&t[0])throw Error("S value is negative");if(n>1&&0===e[0]&&!(128&e[1]))throw Error("R value excessively padded");if(i>1&&0===t[0]&&!(128&t[1]))throw Error("S value excessively padded");let o=r.allocUnsafe(6+n+i);return o[0]=48,o[1]=o.length-2,o[2]=2,o[3]=e.length,e.copy(o,4),o[4+n]=2,o[5+n]=t.length,t.copy(o,6+n),o}}),O("l0in9",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.REVERSE_OPS=e.exports.OPS=void 0;let r={OP_FALSE:0,OP_0:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_TRUE:81,OP_1:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_CHECKLOCKTIMEVERIFY:177,OP_NOP3:178,OP_CHECKSEQUENCEVERIFY:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_CHECKSIGADD:186,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255};e.exports.OPS=r;let n={};for(let t of(e.exports.REVERSE_OPS=n,Object.keys(r)))n[r[t]]=t}),O("dX1I0",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.decode=e.exports.encode=e.exports.encodingLength=void 0;var r=x("l0in9");function n(e){return e<r.OPS.OP_PUSHDATA1?1:e<=255?2:e<=65535?3:5}e.exports.encodingLength=n,e.exports.encode=function(e,t,i){let o=n(t);return 1===o?e.writeUInt8(t,i):2===o?(e.writeUInt8(r.OPS.OP_PUSHDATA1,i),e.writeUInt8(t,i+1)):3===o?(e.writeUInt8(r.OPS.OP_PUSHDATA2,i),e.writeUInt16LE(t,i+1)):(e.writeUInt8(r.OPS.OP_PUSHDATA4,i),e.writeUInt32LE(t,i+1)),o},e.exports.decode=function(e,t){let n,i;let o=e.readUInt8(t);if(o<r.OPS.OP_PUSHDATA1)n=o,i=1;else if(o===r.OPS.OP_PUSHDATA1){if(t+2>e.length)return null;n=e.readUInt8(t+1),i=2}else if(o===r.OPS.OP_PUSHDATA2){if(t+3>e.length)return null;n=e.readUInt16LE(t+1),i=3}else{if(t+5>e.length)return null;if(o!==r.OPS.OP_PUSHDATA4)throw Error("Unexpected opcode");n=e.readUInt32LE(t+1),i=5}return{opcode:o,number:n,size:i}}}),O("1mhXk",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=void 0,e.exports.decode=function(e,t,r){t=t||4,r=void 0===r||r;let n=e.length;if(0===n)return 0;if(n>t)throw TypeError("Script number overflow");if(r&&(127&e[n-1])==0&&(n<=1||(128&e[n-2])==0))throw Error("Non-minimally encoded script number");if(5===n){let t=e.readUInt32LE(0),r=e.readUInt8(4);return 128&r?-((-129&r)*4294967296+t):4294967296*r+t}let i=0;for(let t=0;t<n;++t)i|=e[t]<<8*t;return 128&e[n-1]?-(i&~(128<<8*(n-1))):i},e.exports.encode=function(e){var t;let n=Math.abs(e),i=(t=n)>2147483647?5:t>8388607?4:t>32767?3:t>127?2:t>0?1:0,o=r.allocUnsafe(i),s=e<0;for(let e=0;e<i;++e)o.writeUInt8(255&n,e),n>>=8;return 128&o[i-1]?o.writeUInt8(s?128:0,i-1):s&&(o[i-1]|=128),o}}),O("loONM",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=e.exports.decode=void 0;var n=x("gDdvx"),i=x("18Mz5");let{typeforce:o}=i,s=r.alloc(1,0);function a(e){let t=0;for(;0===e[t];)++t;return t===e.length?s:128&(e=e.slice(t))[0]?r.concat([s,e],1+e.length):e}function u(e){0===e[0]&&(e=e.slice(1));let t=r.alloc(32,0),n=Math.max(0,32-e.length);return e.copy(t,n),t}e.exports.decode=function(e){let t=e.readUInt8(e.length-1),i=-129&t;if(i<=0||i>=4)throw Error("Invalid hashType "+t);let o=n.decode(e.slice(0,-1)),s=u(o.r),a=u(o.s);return{signature:r.concat([s,a],64),hashType:t}},e.exports.encode=function(e,t){o({signature:i.BufferN(64),hashType:i.UInt8},{signature:e,hashType:t});let s=-129&t;if(s<=0||s>=4)throw Error("Invalid hashType "+t);let u=r.allocUnsafe(1);u.writeUInt8(t,0);let p=a(e.slice(0,32)),l=a(e.slice(32,64));return r.concat([n.encode(p,l),u])}}),O("18Mz5",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.oneOf=e.exports.Null=e.exports.BufferN=e.exports.Function=e.exports.UInt32=e.exports.UInt8=e.exports.tuple=e.exports.maybe=e.exports.Hex=e.exports.Buffer=e.exports.String=e.exports.Boolean=e.exports.Array=e.exports.Number=e.exports.Hash256bit=e.exports.Hash160bit=e.exports.Buffer256bit=e.exports.isTaptree=e.exports.isTapleaf=e.exports.TAPLEAF_VERSION_MASK=e.exports.Network=e.exports.ECPoint=e.exports.Satoshi=e.exports.Signer=e.exports.BIP32Path=e.exports.UInt31=e.exports.isPoint=e.exports.typeforce=void 0;var r=x("6ZWSX");e.exports.typeforce=x("lYlyf");let n=r.Buffer.alloc(32,0),i=r.Buffer.from("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f","hex");function o(t){return e.exports.typeforce.String(t)&&!!t.match(/^(m\/)?(\d+'?\/)*\d+'?$/)}e.exports.isPoint=function(e){if(!r.Buffer.isBuffer(e)||e.length<33)return!1;let t=e[0],o=e.slice(1,33);if(0===o.compare(n)||o.compare(i)>=0)return!1;if((2===t||3===t)&&33===e.length)return!0;let s=e.slice(33);return!(0===s.compare(n)||s.compare(i)>=0)&&4===t&&65===e.length},e.exports.UInt31=function(t){return e.exports.typeforce.UInt32(t)&&t<=2147483647},e.exports.BIP32Path=o,o.toJSON=()=>"BIP32 derivation path",e.exports.Signer=function(t){return(e.exports.typeforce.Buffer(t.publicKey)||"function"==typeof t.getPublicKey)&&"function"==typeof t.sign};let s=21*1e14;function a(t){return!!(t&&"output"in t&&r.Buffer.isBuffer(t.output))&&(void 0===t.version||(t.version&e.exports.TAPLEAF_VERSION_MASK)===t.version)}e.exports.Satoshi=function(t){return e.exports.typeforce.UInt53(t)&&t<=s},e.exports.ECPoint=e.exports.typeforce.quacksLike("Point"),e.exports.Network=e.exports.typeforce.compile({messagePrefix:e.exports.typeforce.oneOf(e.exports.typeforce.Buffer,e.exports.typeforce.String),bip32:{public:e.exports.typeforce.UInt32,private:e.exports.typeforce.UInt32},pubKeyHash:e.exports.typeforce.UInt8,scriptHash:e.exports.typeforce.UInt8,wif:e.exports.typeforce.UInt8}),e.exports.TAPLEAF_VERSION_MASK=254,e.exports.isTapleaf=a,e.exports.isTaptree=function t(r){return(0,e.exports.Array)(r)?2===r.length&&r.every(e=>t(e)):a(r)},e.exports.Buffer256bit=e.exports.typeforce.BufferN(32),e.exports.Hash160bit=e.exports.typeforce.BufferN(20),e.exports.Hash256bit=e.exports.typeforce.BufferN(32),e.exports.Number=e.exports.typeforce.Number,e.exports.Array=e.exports.typeforce.Array,e.exports.Boolean=e.exports.typeforce.Boolean,e.exports.String=e.exports.typeforce.String,e.exports.Buffer=e.exports.typeforce.Buffer,e.exports.Hex=e.exports.typeforce.Hex,e.exports.maybe=e.exports.typeforce.maybe,e.exports.tuple=e.exports.typeforce.tuple,e.exports.UInt8=e.exports.typeforce.UInt8,e.exports.UInt32=e.exports.typeforce.UInt32,e.exports.Function=e.exports.typeforce.Function,e.exports.BufferN=e.exports.typeforce.BufferN,e.exports.Null=e.exports.typeforce.Null,e.exports.oneOf=e.exports.typeforce.oneOf}),O("lYlyf",function(e,t){var r=x("akIbT"),n=x("heKts"),i=r.tfJSON,o=r.TfTypeError,s=r.TfPropertyTypeError,a=r.tfSubError,u=r.getValueTypeName,p={arrayOf:function(e,t){function r(r,i){return!(!n.Array(r)||n.Nil(r))&&(void 0===t.minLength||!(r.length<t.minLength))&&(void 0===t.maxLength||!(r.length>t.maxLength))&&(void 0===t.length||r.length===t.length)&&r.every(function(t,r){try{return f(e,t,i)}catch(e){throw a(e,r)}})}return e=l(e),t=t||{},r.toJSON=function(){var r="["+i(e)+"]";return void 0!==t.length?r+="{"+t.length+"}":(void 0!==t.minLength||void 0!==t.maxLength)&&(r+="{"+(void 0===t.minLength?0:t.minLength)+","+(void 0===t.maxLength?1/0:t.maxLength)+"}"),r},r},maybe:function e(t){function r(r,i){return n.Nil(r)||t(r,i,e)}return t=l(t),r.toJSON=function(){return"?"+i(t)},r},map:function(e,t){function r(r,i){if(!n.Object(r)||n.Nil(r))return!1;for(var o in r){try{t&&f(t,o,i)}catch(e){throw a(e,o,"key")}try{var s=r[o];f(e,s,i)}catch(e){throw a(e,o)}}return!0}return e=l(e),t&&(t=l(t)),t?r.toJSON=function(){return"{"+i(t)+": "+i(e)+"}"}:r.toJSON=function(){return"{"+i(e)+"}"},r},object:function(e){var t={};for(var r in e)t[r]=l(e[r]);function o(e,r){if(!n.Object(e)||n.Nil(e))return!1;try{for(i in t){var i,o=t[i],u=e[i];f(o,u,r)}}catch(e){throw a(e,i)}if(r){for(i in e)if(!t[i])throw new s(void 0,i)}return!0}return o.toJSON=function(){return i(t)},o},anyOf:function(){var e=[].slice.call(arguments).map(l);function t(t,r){return e.some(function(e){try{return f(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(i).join("|")},t},allOf:function(){var e=[].slice.call(arguments).map(l);function t(t,r){return e.every(function(e){try{return f(e,t,r)}catch(e){return!1}})}return t.toJSON=function(){return e.map(i).join(" & ")},t},quacksLike:function(e){function t(t){return e===u(t)}return t.toJSON=function(){return e},t},tuple:function(){var e=[].slice.call(arguments).map(l);function t(t,r){return!(n.Nil(t)||n.Nil(t.length))&&(!r||t.length===e.length)&&e.every(function(e,n){try{return f(e,t[n],r)}catch(e){throw a(e,n)}})}return t.toJSON=function(){return"("+e.map(i).join(", ")+")"},t},value:function(e){function t(t){return t===e}return t.toJSON=function(){return e},t}};function l(e){if(n.String(e))return"?"===e[0]?p.maybe(e.slice(1)):n[e]||p.quacksLike(e);if(e&&n.Object(e)){if(n.Array(e)){if(1!==e.length)throw TypeError("Expected compile() parameter of type Array of length 1");return p.arrayOf(e[0])}return p.object(e)}return n.Function(e)?e:p.value(e)}function f(e,t,r,i){if(n.Function(e)){if(e(t,r))return!0;throw new o(i||e,t)}return f(l(e),t,r)}for(var c in p.oneOf=p.anyOf,n)f[c]=n[c];for(c in p)f[c]=p[c];var h=x("8tZX5");for(c in h)f[c]=h[c];f.compile=l,f.TfTypeError=o,f.TfPropertyTypeError=s,e.exports=f}),O("akIbT",function(e,t){var r=x("heKts");function n(e){return e.name||e.toString().match(/function (.*?)\s*\(/)[1]}function i(e){return r.Nil(e)?"":n(e.constructor)}function o(e,t){Error.captureStackTrace&&Error.captureStackTrace(e,t)}function s(e){return r.Function(e)?e.toJSON?e.toJSON():n(e):r.Array(e)?"Array":e&&r.Object(e)?"Object":void 0!==e?e:""}function a(e,t,n){var i=r.Function(t)?"":r.String(t)?JSON.stringify(t):t&&r.Object(t)?"":t;return"Expected "+s(e)+", got"+(""!==n?" "+n:"")+(""!==i?" "+i:"")}function u(e,t,r){r=r||i(t),this.message=a(e,t,r),o(this,u),this.__type=e,this.__value=t,this.__valueTypeName=r}function p(e,t,r,n,p){if(e){var l,f;p=p||i(n),this.message=(l=p,f='" of type ',"key"===r&&(f='" with key type '),a('property "'+s(t)+f+s(e),n,l))}else this.message='Unexpected property "'+t+'"';o(this,u),this.__label=r,this.__property=t,this.__type=e,this.__value=n,this.__valueTypeName=p}u.prototype=Object.create(Error.prototype),u.prototype.constructor=u,p.prototype=Object.create(Error.prototype),p.prototype.constructor=u,e.exports={TfTypeError:u,TfPropertyTypeError:p,tfCustomError:function(e,t){return new u(e,{},t)},tfSubError:function(e,t,r){return e instanceof p?(t=t+"."+e.__property,e=new p(e.__type,t,e.__label,e.__value,e.__valueTypeName)):e instanceof u&&(e=new p(e.__type,t,r,e.__value,e.__valueTypeName)),o(e),e},tfJSON:s,getValueTypeName:i}}),O("heKts",function(e,t){var r={Array:function(e){return null!=e&&e.constructor===Array},Boolean:function(e){return"boolean"==typeof e},Function:function(e){return"function"==typeof e},Nil:function(e){return null==e},Number:function(e){return"number"==typeof e},Object:function(e){return"object"==typeof e},String:function(e){return"string"==typeof e},"":function(){return!0}};for(var n in r.Null=r.Nil,r)r[n].toJSON=(function(e){return e}).bind(null,n);e.exports=r}),O("8tZX5",function(e,t){var r=x("6ZWSX").Buffer,n=x("heKts"),i=x("akIbT");function o(e){return r.isBuffer(e)}function s(e){return"string"==typeof e&&/^([0-9a-f]{2})+$/i.test(e)}function a(e,t){var r=e.toJSON();function n(n){if(!e(n))return!1;if(n.length===t)return!0;throw i.tfCustomError(r+"(Length: "+t+")",r+"(Length: "+n.length+")")}return n.toJSON=function(){return r},n}var u=a.bind(null,n.Array),p=a.bind(null,o),l=a.bind(null,s),f={ArrayN:u,Buffer:o,BufferN:p,Finite:function(e){return"number"==typeof e&&isFinite(e)},Hex:s,HexN:l,Int8:function(e){return e<<24>>24===e},Int16:function(e){return e<<16>>16===e},Int32:function(e){return(0|e)===e},Int53:function(e){return"number"==typeof e&&e>=-9007199254740991&&e<=9007199254740991&&Math.floor(e)===e},Range:function(e,t,r){function i(n,i){return r(n,i)&&n>e&&n<t}return r=r||n.Number,i.toJSON=function(){return`${r.toJSON()} between [${e}, ${t}]`},i},StringN:a.bind(null,n.String),UInt8:function(e){return(255&e)===e},UInt16:function(e){return(65535&e)===e},UInt32:function(e){return e>>>0===e},UInt53:function(e){return"number"==typeof e&&e>=0&&e<=9007199254740991&&Math.floor(e)===e}};for(var c in f)f[c].toJSON=(function(e){return e}).bind(null,c);e.exports=f}),O("4v19v",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.value=e.exports.prop=void 0,e.exports.prop=function(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let e=r.call(this);return this[t]=e,e},set(e){Object.defineProperty(this,t,{configurable:!0,enumerable:!0,value:e,writable:!0})}})},e.exports.value=function(e){let t;return()=>void 0!==t?t:t=e()}}),O("c9fEL",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2ms=void 0;var r=x("fjh6Q"),n=x("8wAtk"),i=x("18Mz5"),o=x("4v19v");let s=n.OPS,a=s.OP_RESERVED;function u(e,t){return e.length===t.length&&e.every((e,r)=>e.equals(t[r]))}e.exports.p2ms=function(e,t){if(!e.input&&!e.output&&!(e.pubkeys&&void 0!==e.m)&&!e.signatures)throw TypeError("Not enough data");function p(e){return n.isCanonicalScriptSignature(e)||(t.allowIncomplete&&e===s.OP_0)!==void 0}t=Object.assign({validate:!0},t||{}),(0,i.typeforce)({network:i.typeforce.maybe(i.typeforce.Object),m:i.typeforce.maybe(i.typeforce.Number),n:i.typeforce.maybe(i.typeforce.Number),output:i.typeforce.maybe(i.typeforce.Buffer),pubkeys:i.typeforce.maybe(i.typeforce.arrayOf(i.isPoint)),signatures:i.typeforce.maybe(i.typeforce.arrayOf(p)),input:i.typeforce.maybe(i.typeforce.Buffer)},e);let l={network:e.network||r.bitcoin},f=[],c=!1;function h(e){c||(c=!0,f=n.decompile(e),l.m=f[0]-a,l.n=f[f.length-2]-a,l.pubkeys=f.slice(1,-2))}if(o.prop(l,"output",()=>{if(e.m&&l.n&&e.pubkeys)return n.compile([].concat(a+e.m,e.pubkeys,a+l.n,s.OP_CHECKMULTISIG))}),o.prop(l,"m",()=>{if(l.output)return h(l.output),l.m}),o.prop(l,"n",()=>{if(l.pubkeys)return l.pubkeys.length}),o.prop(l,"pubkeys",()=>{if(e.output)return h(e.output),l.pubkeys}),o.prop(l,"signatures",()=>{if(e.input)return n.decompile(e.input).slice(1)}),o.prop(l,"input",()=>{if(e.signatures)return n.compile([s.OP_0].concat(e.signatures))}),o.prop(l,"witness",()=>{if(l.input)return[]}),o.prop(l,"name",()=>{if(l.m&&l.n)return`p2ms(${l.m} of ${l.n})`}),t.validate){if(e.output){if(h(e.output),!i.typeforce.Number(f[0])||!i.typeforce.Number(f[f.length-2])||f[f.length-1]!==s.OP_CHECKMULTISIG||l.m<=0||l.n>16||l.m>l.n||l.n!==f.length-3||!l.pubkeys.every(e=>(0,i.isPoint)(e)))throw TypeError("Output is invalid");if(void 0!==e.m&&e.m!==l.m)throw TypeError("m mismatch");if(void 0!==e.n&&e.n!==l.n)throw TypeError("n mismatch");if(e.pubkeys&&!u(e.pubkeys,l.pubkeys))throw TypeError("Pubkeys mismatch")}if(e.pubkeys){if(void 0!==e.n&&e.n!==e.pubkeys.length)throw TypeError("Pubkey count mismatch");if(l.n=e.pubkeys.length,l.n<l.m)throw TypeError("Pubkey count cannot be less than m")}if(e.signatures){if(e.signatures.length<l.m)throw TypeError("Not enough signatures provided");if(e.signatures.length>l.m)throw TypeError("Too many signatures provided")}if(e.input){if(e.input[0]!==s.OP_0)throw TypeError("Input is invalid");if(0===l.signatures.length||!l.signatures.every(p))throw TypeError("Input has invalid signature(s)");if(e.signatures&&!u(e.signatures,l.signatures))throw TypeError("Signature mismatch");if(void 0!==e.m&&e.m!==e.signatures.length)throw TypeError("Signature count mismatch")}}return Object.assign(l,e)}}),O("eSuia",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2pk=void 0;var r=x("fjh6Q"),n=x("8wAtk"),i=x("18Mz5"),o=x("4v19v");let s=n.OPS;e.exports.p2pk=function(e,t){if(!e.input&&!e.output&&!e.pubkey&&!e.input&&!e.signature)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,i.typeforce)({network:i.typeforce.maybe(i.typeforce.Object),output:i.typeforce.maybe(i.typeforce.Buffer),pubkey:i.typeforce.maybe(i.isPoint),signature:i.typeforce.maybe(n.isCanonicalScriptSignature),input:i.typeforce.maybe(i.typeforce.Buffer)},e);let a=o.value(()=>n.decompile(e.input)),u={name:"p2pk",network:e.network||r.bitcoin};if(o.prop(u,"output",()=>{if(e.pubkey)return n.compile([e.pubkey,s.OP_CHECKSIG])}),o.prop(u,"pubkey",()=>{if(e.output)return e.output.slice(1,-1)}),o.prop(u,"signature",()=>{if(e.input)return a()[0]}),o.prop(u,"input",()=>{if(e.signature)return n.compile([e.signature])}),o.prop(u,"witness",()=>{if(u.input)return[]}),t.validate){if(e.output){if(e.output[e.output.length-1]!==s.OP_CHECKSIG)throw TypeError("Output is invalid");if(!(0,i.isPoint)(u.pubkey))throw TypeError("Output pubkey is invalid");if(e.pubkey&&!e.pubkey.equals(u.pubkey))throw TypeError("Pubkey mismatch")}if(e.signature&&e.input&&!e.input.equals(u.input))throw TypeError("Signature mismatch");if(e.input){if(1!==a().length)throw TypeError("Input is invalid");if(!n.isCanonicalScriptSignature(u.signature))throw TypeError("Input has invalid signature")}}return Object.assign(u,e)}}),O("jpa81",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2pkh=void 0;var n=x("lgTFk"),i=x("fjh6Q"),o=x("8wAtk"),s=x("18Mz5"),a=x("4v19v"),u=x("lpa1P");let p=o.OPS;e.exports.p2pkh=function(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({network:s.typeforce.maybe(s.typeforce.Object),address:s.typeforce.maybe(s.typeforce.String),hash:s.typeforce.maybe(s.typeforce.BufferN(20)),output:s.typeforce.maybe(s.typeforce.BufferN(25)),pubkey:s.typeforce.maybe(s.isPoint),signature:s.typeforce.maybe(o.isCanonicalScriptSignature),input:s.typeforce.maybe(s.typeforce.Buffer)},e);let l=a.value(()=>{let t=r.from(u.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),f=a.value(()=>o.decompile(e.input)),c=e.network||i.bitcoin,h={name:"p2pkh",network:c};if(a.prop(h,"address",()=>{if(!h.hash)return;let e=r.allocUnsafe(21);return e.writeUInt8(c.pubKeyHash,0),h.hash.copy(e,1),u.encode(e)}),a.prop(h,"hash",()=>e.output?e.output.slice(3,23):e.address?l().hash:e.pubkey||h.pubkey?n.hash160(e.pubkey||h.pubkey):void 0),a.prop(h,"output",()=>{if(h.hash)return o.compile([p.OP_DUP,p.OP_HASH160,h.hash,p.OP_EQUALVERIFY,p.OP_CHECKSIG])}),a.prop(h,"pubkey",()=>{if(e.input)return f()[1]}),a.prop(h,"signature",()=>{if(e.input)return f()[0]}),a.prop(h,"input",()=>{if(e.pubkey&&e.signature)return o.compile([e.signature,e.pubkey])}),a.prop(h,"witness",()=>{if(h.input)return[]}),t.validate){let t=r.from([]);if(e.address){if(l().version!==c.pubKeyHash)throw TypeError("Invalid version or Network mismatch");if(20!==l().hash.length)throw TypeError("Invalid address");t=l().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(25!==e.output.length||e.output[0]!==p.OP_DUP||e.output[1]!==p.OP_HASH160||20!==e.output[2]||e.output[23]!==p.OP_EQUALVERIFY||e.output[24]!==p.OP_CHECKSIG)throw TypeError("Output is invalid");let r=e.output.slice(3,23);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.pubkey){let r=n.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.input){let r=f();if(2!==r.length)throw TypeError("Input is invalid");if(!o.isCanonicalScriptSignature(r[0]))throw TypeError("Input has invalid signature");if(!(0,s.isPoint)(r[1]))throw TypeError("Input has invalid pubkey");if(e.signature&&!e.signature.equals(r[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(r[1]))throw TypeError("Pubkey mismatch");let i=n.hash160(r[1]);if(t.length>0&&!t.equals(i))throw TypeError("Hash mismatch")}}return Object.assign(h,e)}}),O("lgTFk",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.taggedHash=e.exports.TAGGED_HASH_PREFIXES=e.exports.TAGS=e.exports.hash256=e.exports.hash160=e.exports.sha256=e.exports.sha1=e.exports.ripemd160=void 0;var n=x("j5xzM"),i=x("dGR9X"),o=x("6XnWx");function s(e){return r.from((0,o.sha256)(Uint8Array.from(e)))}e.exports.ripemd160=function(e){return r.from((0,n.ripemd160)(Uint8Array.from(e)))},e.exports.sha1=function(e){return r.from((0,i.sha1)(Uint8Array.from(e)))},e.exports.sha256=s,e.exports.hash160=function(e){return r.from((0,n.ripemd160)((0,o.sha256)(Uint8Array.from(e))))},e.exports.hash256=function(e){return r.from((0,o.sha256)((0,o.sha256)(Uint8Array.from(e))))},e.exports.TAGS=["BIP0340/challenge","BIP0340/aux","BIP0340/nonce","TapLeaf","TapBranch","TapSighash","TapTweak","KeyAgg list","KeyAgg coefficient"],e.exports.TAGGED_HASH_PREFIXES={"BIP0340/challenge":r.from([123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124,123,181,45,122,159,239,88,50,62,177,191,122,64,125,179,130,210,243,242,216,27,177,34,79,73,254,81,143,109,72,211,124]),"BIP0340/aux":r.from([241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144,241,239,78,94,192,99,202,218,109,148,202,250,157,152,126,160,105,38,88,57,236,193,31,151,45,119,165,46,216,193,204,144]),"BIP0340/nonce":r.from([7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47,7,73,119,52,167,155,203,53,91,155,140,125,3,79,18,28,244,52,215,62,247,45,218,25,135,0,97,251,82,191,235,47]),TapLeaf:r.from([174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238,174,234,143,220,66,8,152,49,5,115,75,88,8,29,30,38,56,211,95,28,181,64,8,212,211,87,202,3,190,120,233,238]),TapBranch:r.from([25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21,25,65,161,242,229,110,185,95,162,169,241,148,190,92,1,247,33,111,51,237,130,176,145,70,52,144,208,91,245,22,160,21]),TapSighash:r.from([244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49,244,10,72,223,75,42,112,200,180,146,75,242,101,70,97,237,61,149,253,102,163,19,235,135,35,117,151,198,40,228,160,49]),TapTweak:r.from([232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233,232,15,225,99,156,156,160,80,227,175,27,57,193,67,198,62,66,156,188,235,21,217,64,251,181,197,161,244,175,87,197,233]),"KeyAgg list":r.from([72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240,72,28,151,28,60,11,70,215,240,178,117,174,89,141,78,44,126,215,49,156,89,74,92,110,199,158,160,212,153,2,148,240]),"KeyAgg coefficient":r.from([191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129,191,201,4,3,77,28,136,232,200,14,34,229,61,36,86,109,100,130,78,214,66,114,129,192,145,0,249,77,205,82,201,129])},e.exports.taggedHash=function(t,n){return s(r.concat([e.exports.TAGGED_HASH_PREFIXES[t],n]))}}),O("j5xzM",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.ripemd160=e.exports.RIPEMD160=void 0;var r=x("iYRTw"),n=x("3Bcdj");let i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),s=o.map(e=>(9*e+5)%16),a=[o],u=[s];for(let e=0;e<4;e++)for(let t of[a,u])t.push(t[e].map(e=>i[e]));let p=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),l=a.map((e,t)=>e.map(e=>p[t][e])),f=u.map((e,t)=>e.map(e=>p[t][e])),c=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),h=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function d(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let y=new Uint32Array(16);class g extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:r,h3:n,h4:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)y[r]=e.getUint32(t,!0);let r=0|this.h0,i=r,o=0|this.h1,s=o,p=0|this.h2,g=p,E=0|this.h3,m=E,v=0|this.h4,b=v;for(let e=0;e<5;e++){let t=4-e,w=c[e],I=h[e],S=a[e],T=u[e],_=l[e],x=f[e];for(let t=0;t<16;t++){let i=(0,n.rotl)(r+d(e,o,p,E)+y[S[t]]+w,_[t])+v|0;r=v,v=E,E=0|(0,n.rotl)(p,10),p=o,o=i}for(let e=0;e<16;e++){let r=(0,n.rotl)(i+d(t,s,g,m)+y[T[e]]+I,x[e])+b|0;i=b,b=m,m=0|(0,n.rotl)(g,10),g=s,s=r}}this.set(this.h1+p+m|0,this.h2+E+b|0,this.h3+v+i|0,this.h4+r+s|0,this.h0+o+g|0)}roundClean(){y.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}e.exports.RIPEMD160=g,e.exports.ripemd160=(0,n.wrapConstructor)(()=>new g)}),O("dGR9X",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.sha1=void 0;var r=x("iYRTw"),n=x("3Bcdj");let i=new Uint32Array([1732584193,4023233417,2562383102,271733878,3285377520]),o=new Uint32Array(80);class s extends r.HashMD{constructor(){super(64,20,8,!1),this.A=0|i[0],this.B=0|i[1],this.C=0|i[2],this.D=0|i[3],this.E=0|i[4]}get(){let{A:e,B:t,C:r,D:n,E:i}=this;return[e,t,r,n,i]}set(e,t,r,n,i){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|i}process(e,t){for(let r=0;r<16;r++,t+=4)o[r]=e.getUint32(t,!1);for(let e=16;e<80;e++)o[e]=(0,n.rotl)(o[e-3]^o[e-8]^o[e-14]^o[e-16],1);let{A:i,B:s,C:a,D:u,E:p}=this;for(let e=0;e<80;e++){let t,l;e<20?(t=(0,r.Chi)(s,a,u),l=1518500249):e<40?(t=s^a^u,l=1859775393):e<60?(t=(0,r.Maj)(s,a,u),l=2400959708):(t=s^a^u,l=3395469782);let f=(0,n.rotl)(i,5)+t+p+l+o[e]|0;p=u,u=a,a=(0,n.rotl)(s,30),s=i,i=f}i=i+this.A|0,s=s+this.B|0,a=a+this.C|0,u=u+this.D|0,p=p+this.E|0,this.set(i,s,a,u,p)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0),this.buffer.fill(0)}}e.exports.sha1=(0,n.wrapConstructor)(()=>new s)}),O("4yk7Y",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2sh=void 0;var n=x("lgTFk"),i=x("fjh6Q"),o=x("8wAtk"),s=x("18Mz5"),a=x("4v19v"),u=x("lpa1P");let p=o.OPS;e.exports.p2sh=function(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.input)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({network:s.typeforce.maybe(s.typeforce.Object),address:s.typeforce.maybe(s.typeforce.String),hash:s.typeforce.maybe(s.typeforce.BufferN(20)),output:s.typeforce.maybe(s.typeforce.BufferN(23)),redeem:s.typeforce.maybe({network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.Buffer),input:s.typeforce.maybe(s.typeforce.Buffer),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))}),input:s.typeforce.maybe(s.typeforce.Buffer),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))},e);let l=e.network;l||(l=e.redeem&&e.redeem.network||i.bitcoin);let f={network:l},c=a.value(()=>{let t=r.from(u.decode(e.address));return{version:t.readUInt8(0),hash:t.slice(1)}}),h=a.value(()=>o.decompile(e.input)),d=a.value(()=>{let t=h(),n=t[t.length-1];return{network:l,output:n===p.OP_FALSE?r.from([]):n,input:o.compile(t.slice(0,-1)),witness:e.witness||[]}});if(a.prop(f,"address",()=>{if(!f.hash)return;let e=r.allocUnsafe(21);return e.writeUInt8(f.network.scriptHash,0),f.hash.copy(e,1),u.encode(e)}),a.prop(f,"hash",()=>e.output?e.output.slice(2,22):e.address?c().hash:f.redeem&&f.redeem.output?n.hash160(f.redeem.output):void 0),a.prop(f,"output",()=>{if(f.hash)return o.compile([p.OP_HASH160,f.hash,p.OP_EQUAL])}),a.prop(f,"redeem",()=>{if(e.input)return d()}),a.prop(f,"input",()=>{if(e.redeem&&e.redeem.input&&e.redeem.output)return o.compile([].concat(o.decompile(e.redeem.input),e.redeem.output))}),a.prop(f,"witness",()=>f.redeem&&f.redeem.witness?f.redeem.witness:f.input?[]:void 0),a.prop(f,"name",()=>{let e=["p2sh"];return void 0!==f.redeem&&void 0!==f.redeem.name&&e.push(f.redeem.name),e.join("-")}),t.validate){let t=r.from([]);if(e.address){if(c().version!==l.scriptHash)throw TypeError("Invalid version or Network mismatch");if(20!==c().hash.length)throw TypeError("Invalid address");t=c().hash}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(23!==e.output.length||e.output[0]!==p.OP_HASH160||20!==e.output[1]||e.output[22]!==p.OP_EQUAL)throw TypeError("Output is invalid");let r=e.output.slice(2,22);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}let i=e=>{if(e.output){let r=o.decompile(e.output);if(!r||r.length<1)throw TypeError("Redeem.output too short");if(e.output.byteLength>520)throw TypeError("Redeem.output unspendable if larger than 520 bytes");if(o.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let i=n.hash160(e.output);if(t.length>0&&!t.equals(i))throw TypeError("Hash mismatch");t=i}if(e.input){let t=e.input.length>0,r=e.witness&&e.witness.length>0;if(!t&&!r)throw TypeError("Empty input");if(t&&r)throw TypeError("Input and witness provided");if(t){let t=o.decompile(e.input);if(!o.isPushOnly(t))throw TypeError("Non push-only scriptSig")}}};if(e.input){let e=h();if(!e||e.length<1)throw TypeError("Input too short");if(!r.isBuffer(d().output))throw TypeError("Input is invalid");i(d())}if(e.redeem){if(e.redeem.network&&e.redeem.network!==l)throw TypeError("Network mismatch");if(e.input){let t=d();if(e.redeem.output&&!e.redeem.output.equals(t.output))throw TypeError("Redeem.output mismatch");if(e.redeem.input&&!e.redeem.input.equals(t.input))throw TypeError("Redeem.input mismatch")}i(e.redeem)}if(e.witness){var y,g;if(e.redeem&&e.redeem.witness&&(y=e.redeem.witness,g=e.witness,!(y.length===g.length&&y.every((e,t)=>e.equals(g[t])))))throw TypeError("Witness and redeem.witness mismatch")}}return Object.assign(f,e)}}),O("8P2rG",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2wpkh=void 0;var n=x("lgTFk"),i=x("fjh6Q"),o=x("8wAtk"),s=x("18Mz5"),a=x("4v19v"),u=x("db6J2");let p=o.OPS,l=r.alloc(0);e.exports.p2wpkh=function(e,t){if(!e.address&&!e.hash&&!e.output&&!e.pubkey&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({address:s.typeforce.maybe(s.typeforce.String),hash:s.typeforce.maybe(s.typeforce.BufferN(20)),input:s.typeforce.maybe(s.typeforce.BufferN(0)),network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.BufferN(22)),pubkey:s.typeforce.maybe(s.isPoint),signature:s.typeforce.maybe(o.isCanonicalScriptSignature),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))},e);let f=a.value(()=>{let t=u.bech32.decode(e.address),n=t.words.shift(),i=u.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.from(i)}}),c=e.network||i.bitcoin,h={name:"p2wpkh",network:c};if(a.prop(h,"address",()=>{if(!h.hash)return;let e=u.bech32.toWords(h.hash);return e.unshift(0),u.bech32.encode(c.bech32,e)}),a.prop(h,"hash",()=>e.output?e.output.slice(2,22):e.address?f().data:e.pubkey||h.pubkey?n.hash160(e.pubkey||h.pubkey):void 0),a.prop(h,"output",()=>{if(h.hash)return o.compile([p.OP_0,h.hash])}),a.prop(h,"pubkey",()=>e.pubkey?e.pubkey:e.witness?e.witness[1]:void 0),a.prop(h,"signature",()=>{if(e.witness)return e.witness[0]}),a.prop(h,"input",()=>{if(h.witness)return l}),a.prop(h,"witness",()=>{if(e.pubkey&&e.signature)return[e.signature,e.pubkey]}),t.validate){let t=r.from([]);if(e.address){if(c&&c.bech32!==f().prefix)throw TypeError("Invalid prefix or Network mismatch");if(0!==f().version)throw TypeError("Invalid address version");if(20!==f().data.length)throw TypeError("Invalid address data");t=f().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(22!==e.output.length||e.output[0]!==p.OP_0||20!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Hash mismatch");t=e.output.slice(2)}if(e.pubkey){let r=n.hash160(e.pubkey);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");if(t=r,!(0,s.isPoint)(e.pubkey)||33!==e.pubkey.length)throw TypeError("Invalid pubkey for p2wpkh")}if(e.witness){if(2!==e.witness.length)throw TypeError("Witness is invalid");if(!o.isCanonicalScriptSignature(e.witness[0]))throw TypeError("Witness has invalid signature");if(!(0,s.isPoint)(e.witness[1])||33!==e.witness[1].length)throw TypeError("Witness has invalid pubkey");if(e.signature&&!e.signature.equals(e.witness[0]))throw TypeError("Signature mismatch");if(e.pubkey&&!e.pubkey.equals(e.witness[1]))throw TypeError("Pubkey mismatch");let r=n.hash160(e.witness[1]);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch")}}return Object.assign(h,e)}}),O("db6J2",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.bech32m=e.exports.bech32=void 0;let r="qpzry9x8gf2tvdw0s3jn54khce6mua7l",n={};for(let e=0;e<r.length;e++)n[r.charAt(e)]=e;function i(e){let t=e>>25;return(33554431&e)<<5^996825010&-(t>>0&1)^642813549&-(t>>1&1)^513874426&-(t>>2&1)^1027748829&-(t>>3&1)^705979059&-(t>>4&1)}function o(e){let t=1;for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+e+")";t=i(t)^n>>5}t=i(t);for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);t=i(t)^31&n}return t}function s(e,t,r,n){let i=0,o=0,s=(1<<r)-1,a=[];for(let n=0;n<e.length;++n)for(i=i<<t|e[n],o+=t;o>=r;)a.push(i>>(o-=r)&s);if(n)o>0&&a.push(i<<r-o&s);else{if(o>=t)return"Excess padding";if(i<<r-o&s)return"Non-zero padding"}return a}function a(e){return s(e,8,5,!0)}function u(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t}function p(e){let t=s(e,5,8,!1);if(Array.isArray(t))return t;throw Error(t)}function l(e){let t;function s(e,r){if(r=r||90,e.length<8)return e+" too short";if(e.length>r)return"Exceeds length limit";let s=e.toLowerCase(),a=e.toUpperCase();if(e!==s&&e!==a)return"Mixed-case string "+e;let u=(e=s).lastIndexOf("1");if(-1===u)return"No separator character for "+e;if(0===u)return"Missing prefix for "+e;let p=e.slice(0,u),l=e.slice(u+1);if(l.length<6)return"Data too short";let f=o(p);if("string"==typeof f)return f;let c=[];for(let e=0;e<l.length;++e){let t=l.charAt(e),r=n[t];if(void 0===r)return"Unknown character "+t;f=i(f)^r,e+6>=l.length||c.push(r)}return f!==t?"Invalid checksum for "+e:{prefix:p,words:c}}return t="bech32"===e?1:734539939,{decodeUnsafe:function(e,t){let r=s(e,t);if("object"==typeof r)return r},decode:function(e,t){let r=s(e,t);if("object"==typeof r)return r;throw Error(r)},encode:function(e,n,s){if(s=s||90,e.length+7+n.length>s)throw TypeError("Exceeds length limit");let a=o(e=e.toLowerCase());if("string"==typeof a)throw Error(a);let u=e+"1";for(let e=0;e<n.length;++e){let t=n[e];if(t>>5!=0)throw Error("Non 5-bit word");a=i(a)^t,u+=r.charAt(t)}for(let e=0;e<6;++e)a=i(a);a^=t;for(let e=0;e<6;++e){let t=a>>(5-e)*5&31;u+=r.charAt(t)}return u},toWords:a,fromWordsUnsafe:u,fromWords:p}}e.exports.bech32=l("bech32"),e.exports.bech32m=l("bech32m")}),O("576Qs",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2wsh=void 0;var n=x("lgTFk"),i=x("fjh6Q"),o=x("8wAtk"),s=x("18Mz5"),a=x("4v19v"),u=x("db6J2");let p=o.OPS,l=r.alloc(0);function f(e){return!!(r.isBuffer(e)&&65===e.length&&4===e[0]&&(0,s.isPoint)(e))}e.exports.p2wsh=function(e,t){if(!e.address&&!e.hash&&!e.output&&!e.redeem&&!e.witness)throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,s.typeforce)({network:s.typeforce.maybe(s.typeforce.Object),address:s.typeforce.maybe(s.typeforce.String),hash:s.typeforce.maybe(s.typeforce.BufferN(32)),output:s.typeforce.maybe(s.typeforce.BufferN(34)),redeem:s.typeforce.maybe({input:s.typeforce.maybe(s.typeforce.Buffer),network:s.typeforce.maybe(s.typeforce.Object),output:s.typeforce.maybe(s.typeforce.Buffer),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))}),input:s.typeforce.maybe(s.typeforce.BufferN(0)),witness:s.typeforce.maybe(s.typeforce.arrayOf(s.typeforce.Buffer))},e);let c=a.value(()=>{let t=u.bech32.decode(e.address),n=t.words.shift(),i=u.bech32.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.from(i)}}),h=a.value(()=>o.decompile(e.redeem.input)),d=e.network;d||(d=e.redeem&&e.redeem.network||i.bitcoin);let y={network:d};if(a.prop(y,"address",()=>{if(!y.hash)return;let e=u.bech32.toWords(y.hash);return e.unshift(0),u.bech32.encode(d.bech32,e)}),a.prop(y,"hash",()=>e.output?e.output.slice(2):e.address?c().data:y.redeem&&y.redeem.output?n.sha256(y.redeem.output):void 0),a.prop(y,"output",()=>{if(y.hash)return o.compile([p.OP_0,y.hash])}),a.prop(y,"redeem",()=>{if(e.witness)return{output:e.witness[e.witness.length-1],input:l,witness:e.witness.slice(0,-1)}}),a.prop(y,"input",()=>{if(y.witness)return l}),a.prop(y,"witness",()=>{if(e.redeem&&e.redeem.input&&e.redeem.input.length>0&&e.redeem.output&&e.redeem.output.length>0){let t=o.toStack(h());return y.redeem=Object.assign({witness:t},e.redeem),y.redeem.input=l,[].concat(t,e.redeem.output)}if(e.redeem&&e.redeem.output&&e.redeem.witness)return[].concat(e.redeem.witness,e.redeem.output)}),a.prop(y,"name",()=>{let e=["p2wsh"];return void 0!==y.redeem&&void 0!==y.redeem.name&&e.push(y.redeem.name),e.join("-")}),t.validate){let t=r.from([]);if(e.address){if(c().prefix!==d.bech32)throw TypeError("Invalid prefix or Network mismatch");if(0!==c().version)throw TypeError("Invalid address version");if(32!==c().data.length)throw TypeError("Invalid address data");t=c().data}if(e.hash){if(t.length>0&&!t.equals(e.hash))throw TypeError("Hash mismatch");t=e.hash}if(e.output){if(34!==e.output.length||e.output[0]!==p.OP_0||32!==e.output[1])throw TypeError("Output is invalid");let r=e.output.slice(2);if(t.length>0&&!t.equals(r))throw TypeError("Hash mismatch");t=r}if(e.redeem){var g,E;if(e.redeem.network&&e.redeem.network!==d)throw TypeError("Network mismatch");if(e.redeem.input&&e.redeem.input.length>0&&e.redeem.witness&&e.redeem.witness.length>0)throw TypeError("Ambiguous witness source");if(e.redeem.output){let r=o.decompile(e.redeem.output);if(!r||r.length<1)throw TypeError("Redeem.output is invalid");if(e.redeem.output.byteLength>3600)throw TypeError("Redeem.output unspendable if larger than 3600 bytes");if(o.countNonPushOnlyOPs(r)>201)throw TypeError("Redeem.output unspendable with more than 201 non-push ops");let i=n.sha256(e.redeem.output);if(t.length>0&&!t.equals(i))throw TypeError("Hash mismatch");t=i}if(e.redeem.input&&!o.isPushOnly(h()))throw TypeError("Non push-only scriptSig");if(e.witness&&e.redeem.witness&&(g=e.witness,E=e.redeem.witness,!(g.length===E.length&&g.every((e,t)=>e.equals(E[t])))))throw TypeError("Witness and redeem.witness mismatch");if(e.redeem.input&&h().some(f)||e.redeem.output&&(o.decompile(e.redeem.output)||[]).some(f))throw TypeError("redeem.input or redeem.output contains uncompressed pubkey")}if(e.witness&&e.witness.length>0){let t=e.witness[e.witness.length-1];if(e.redeem&&e.redeem.output&&!e.redeem.output.equals(t))throw TypeError("Witness and redeem.output mismatch");if(e.witness.some(f)||(o.decompile(t)||[]).some(f))throw TypeError("Witness contains uncompressed pubkey")}}return Object.assign(y,e)}}),O("bl5DO",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.p2tr=void 0;var r=x("6ZWSX"),n=x("fjh6Q"),i=x("8wAtk"),o=x("18Mz5"),s=x("f6boC"),a=x("lzIk8"),u=x("4v19v"),p=x("db6J2");let l=i.OPS;e.exports.p2tr=function(e,t){if(!e.address&&!e.output&&!e.pubkey&&!e.internalPubkey&&!(e.witness&&e.witness.length>1))throw TypeError("Not enough data");t=Object.assign({validate:!0},t||{}),(0,o.typeforce)({address:o.typeforce.maybe(o.typeforce.String),input:o.typeforce.maybe(o.typeforce.BufferN(0)),network:o.typeforce.maybe(o.typeforce.Object),output:o.typeforce.maybe(o.typeforce.BufferN(34)),internalPubkey:o.typeforce.maybe(o.typeforce.BufferN(32)),hash:o.typeforce.maybe(o.typeforce.BufferN(32)),pubkey:o.typeforce.maybe(o.typeforce.BufferN(32)),signature:o.typeforce.maybe(o.typeforce.anyOf(o.typeforce.BufferN(64),o.typeforce.BufferN(65))),witness:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer)),scriptTree:o.typeforce.maybe(o.isTaptree),redeem:o.typeforce.maybe({output:o.typeforce.maybe(o.typeforce.Buffer),redeemVersion:o.typeforce.maybe(o.typeforce.Number),witness:o.typeforce.maybe(o.typeforce.arrayOf(o.typeforce.Buffer))}),redeemVersion:o.typeforce.maybe(o.typeforce.Number)},e);let f=u.value(()=>{let t=p.bech32m.decode(e.address),n=t.words.shift(),i=p.bech32m.fromWords(t.words);return{version:n,prefix:t.prefix,data:r.Buffer.from(i)}}),c=u.value(()=>{if(e.witness&&e.witness.length)return e.witness.length>=2&&80===e.witness[e.witness.length-1][0]?e.witness.slice(0,-1):e.witness.slice()}),h=u.value(()=>e.scriptTree?(0,a.toHashTree)(e.scriptTree):e.hash?{hash:e.hash}:void 0),d=e.network||n.bitcoin,y={name:"p2tr",network:d};if(u.prop(y,"address",()=>{if(!y.pubkey)return;let e=p.bech32m.toWords(y.pubkey);return e.unshift(1),p.bech32m.encode(d.bech32,e)}),u.prop(y,"hash",()=>{let e=h();if(e)return e.hash;let t=c();if(t&&t.length>1){let e=t[t.length-1],r=e[0]&o.TAPLEAF_VERSION_MASK,n=t[t.length-2],i=(0,a.tapleafHash)({output:n,version:r});return(0,a.rootHashFromPath)(e,i)}return null}),u.prop(y,"output",()=>{if(y.pubkey)return i.compile([l.OP_1,y.pubkey])}),u.prop(y,"redeemVersion",()=>e.redeemVersion?e.redeemVersion:e.redeem&&void 0!==e.redeem.redeemVersion&&null!==e.redeem.redeemVersion?e.redeem.redeemVersion:a.LEAF_VERSION_TAPSCRIPT),u.prop(y,"redeem",()=>{let e=c();if(e&&!(e.length<2))return{output:e[e.length-2],witness:e.slice(0,-2),redeemVersion:e[e.length-1][0]&o.TAPLEAF_VERSION_MASK}}),u.prop(y,"pubkey",()=>{if(e.pubkey)return e.pubkey;if(e.output)return e.output.slice(2);if(e.address)return f().data;if(y.internalPubkey){let e=(0,a.tweakKey)(y.internalPubkey,y.hash);if(e)return e.x}}),u.prop(y,"internalPubkey",()=>{if(e.internalPubkey)return e.internalPubkey;let t=c();if(t&&t.length>1)return t[t.length-1].slice(1,33)}),u.prop(y,"signature",()=>{if(e.signature)return e.signature;let t=c();if(t&&1===t.length)return t[0]}),u.prop(y,"witness",()=>{if(e.witness)return e.witness;let t=h();if(t&&e.redeem&&e.redeem.output&&e.internalPubkey){let n=(0,a.tapleafHash)({output:e.redeem.output,version:y.redeemVersion}),i=(0,a.findScriptPath)(t,n);if(!i)return;let o=(0,a.tweakKey)(e.internalPubkey,t.hash);if(!o)return;let s=r.Buffer.concat([r.Buffer.from([y.redeemVersion|o.parity]),e.internalPubkey].concat(i));return[e.redeem.output,s]}if(e.signature)return[e.signature]}),t.validate){let t=r.Buffer.from([]);if(e.address){if(d&&d.bech32!==f().prefix)throw TypeError("Invalid prefix or Network mismatch");if(1!==f().version)throw TypeError("Invalid address version");if(32!==f().data.length)throw TypeError("Invalid address data");t=f().data}if(e.pubkey){if(t.length>0&&!t.equals(e.pubkey))throw TypeError("Pubkey mismatch");t=e.pubkey}if(e.output){if(34!==e.output.length||e.output[0]!==l.OP_1||32!==e.output[1])throw TypeError("Output is invalid");if(t.length>0&&!t.equals(e.output.slice(2)))throw TypeError("Pubkey mismatch");t=e.output.slice(2)}if(e.internalPubkey){let r=(0,a.tweakKey)(e.internalPubkey,y.hash);if(t.length>0&&!t.equals(r.x))throw TypeError("Pubkey mismatch");t=r.x}if(t&&t.length&&!(0,s.getEccLib)().isXOnlyPoint(t))throw TypeError("Invalid pubkey for p2tr");let n=h();if(e.hash&&n&&!e.hash.equals(n.hash))throw TypeError("Hash mismatch");if(e.redeem&&e.redeem.output&&n){let t=(0,a.tapleafHash)({output:e.redeem.output,version:y.redeemVersion});if(!(0,a.findScriptPath)(n,t))throw TypeError("Redeem script not in tree")}let u=c();if(e.redeem&&y.redeem){var g,E;if(e.redeem.redeemVersion&&e.redeem.redeemVersion!==y.redeem.redeemVersion)throw TypeError("Redeem.redeemVersion and witness mismatch");if(e.redeem.output){if(0===i.decompile(e.redeem.output).length)throw TypeError("Redeem.output is invalid");if(y.redeem.output&&!e.redeem.output.equals(y.redeem.output))throw TypeError("Redeem.output and witness mismatch")}if(e.redeem.witness&&y.redeem.witness&&(g=e.redeem.witness,E=y.redeem.witness,!(g.length===E.length&&g.every((e,t)=>e.equals(E[t])))))throw TypeError("Redeem.witness and witness mismatch")}if(u&&u.length){if(1===u.length){if(e.signature&&!e.signature.equals(u[0]))throw TypeError("Signature mismatch")}else{let r=u[u.length-1];if(r.length<33)throw TypeError(`The control-block length is too small. Got ${r.length}, expected min 33.`);if((r.length-33)%32!=0)throw TypeError(`The control-block length of ${r.length} is incorrect!`);let n=(r.length-33)/32;if(n>128)throw TypeError(`The script path is too long. Got ${n}, expected max 128.`);let i=r.slice(1,33);if(e.internalPubkey&&!e.internalPubkey.equals(i))throw TypeError("Internal pubkey mismatch");if(!(0,s.getEccLib)().isXOnlyPoint(i))throw TypeError("Invalid internalPubkey for p2tr witness");let p=r[0]&o.TAPLEAF_VERSION_MASK,l=u[u.length-2],f=(0,a.tapleafHash)({output:l,version:p}),c=(0,a.rootHashFromPath)(r,f),h=(0,a.tweakKey)(i,c);if(!h)throw TypeError("Invalid outputKey for p2tr witness");if(t.length&&!t.equals(h.x))throw TypeError("Pubkey mismatch for p2tr witness");if(h.parity!==(1&r[0]))throw Error("Incorrect parity")}}}return Object.assign(y,e)}}),O("f6boC",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.getEccLib=e.exports.initEccLib=void 0;let n={};e.exports.initEccLib=function(e){e?e!==n.eccLib&&(o("function"==typeof e.isXOnlyPoint),o(e.isXOnlyPoint(i("79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"))),o(e.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffeeffffc2e"))),o(e.isXOnlyPoint(i("f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9"))),o(e.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000001"))),o(!e.isXOnlyPoint(i("0000000000000000000000000000000000000000000000000000000000000000"))),o(!e.isXOnlyPoint(i("fffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"))),o("function"==typeof e.xOnlyPointAddTweak),s.forEach(t=>{let n=e.xOnlyPointAddTweak(i(t.pubkey),i(t.tweak));null===t.result?o(null===n):(o(null!==n),o(n.parity===t.parity),o(r.from(n.xOnlyPubkey).equals(i(t.result))))}),n.eccLib=e):n.eccLib=e},e.exports.getEccLib=function(){if(!n.eccLib)throw Error("No ECC Library provided. You must call initEccLib() with a valid TinySecp256k1Interface instance");return n.eccLib};let i=e=>r.from(e,"hex");function o(e){if(!e)throw Error("ecc library invalid")}let s=[{pubkey:"79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798",tweak:"fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364140",parity:-1,result:null},{pubkey:"1617d38ed8d8657da4d4761e8057bc396ea9e4b9d29776d4be096016dbd2509b",tweak:"a8397a935f0dfceba6ba9618f6451ef4d80637abf4e6af2669fbc9de6a8fd2ac",parity:1,result:"e478f99dab91052ab39a33ea35fd5e6e4933f4d28023cd597c9a1f6760346adf"},{pubkey:"2c0b7cf95324a07d05398b240174dc0c2be444d96b159aa6c7f7b1e668680991",tweak:"823c3cd2142744b075a87eade7e1b8678ba308d566226a0056ca2b7a76f86b47",parity:0,result:"9534f8dc8c6deda2dc007655981c78b49c5d96c778fbf363462a11ec9dfd948c"}]}),O("lzIk8",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.tweakKey=e.exports.tapTweakHash=e.exports.tapleafHash=e.exports.findScriptPath=e.exports.toHashTree=e.exports.rootHashFromPath=e.exports.MAX_TAPTREE_DEPTH=e.exports.LEAF_VERSION_TAPSCRIPT=void 0;var r=x("6ZWSX"),n=x("f6boC"),i=x("lgTFk"),o=x("lMPrw"),s=x("18Mz5");e.exports.LEAF_VERSION_TAPSCRIPT=192,e.exports.MAX_TAPTREE_DEPTH=128;let a=e=>"left"in e&&"right"in e;function u(t){let n=t.version||e.exports.LEAF_VERSION_TAPSCRIPT;return i.taggedHash("TapLeaf",r.Buffer.concat([r.Buffer.from([n]),function(e){let t=o.varuint.encodingLength(e.length),n=r.Buffer.allocUnsafe(t);return o.varuint.encode(e.length,n),r.Buffer.concat([n,e])}(t.output)]))}function p(e,t){return i.taggedHash("TapTweak",r.Buffer.concat(t?[e,t]:[e]))}function l(e,t){return i.taggedHash("TapBranch",r.Buffer.concat([e,t]))}e.exports.rootHashFromPath=function(e,t){if(e.length<33)throw TypeError(`The control-block length is too small. Got ${e.length}, expected min 33.`);let r=(e.length-33)/32,n=t;for(let t=0;t<r;t++){let r=e.slice(33+32*t,65+32*t);n=0>n.compare(r)?l(n,r):l(r,n)}return n},e.exports.toHashTree=function e(t){if((0,s.isTapleaf)(t))return{hash:u(t)};let r=[e(t[0]),e(t[1])];r.sort((e,t)=>e.hash.compare(t.hash));let[n,i]=r;return{hash:l(n.hash,i.hash),left:n,right:i}},e.exports.findScriptPath=function e(t,r){if(a(t)){let n=e(t.left,r);if(void 0!==n)return[...n,t.right.hash];let i=e(t.right,r);if(void 0!==i)return[...i,t.left.hash]}else if(t.hash.equals(r))return[]},e.exports.tapleafHash=u,e.exports.tapTweakHash=p,e.exports.tweakKey=function(e,t){if(!r.Buffer.isBuffer(e)||32!==e.length||t&&32!==t.length)return null;let i=p(e,t),o=(0,n.getEccLib)().xOnlyPointAddTweak(e,i);return o&&null!==o.xOnlyPubkey?{parity:o.parity,x:r.Buffer.from(o.xOnlyPubkey)}:null}}),O("lMPrw",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BufferReader=e.exports.BufferWriter=e.exports.cloneBuffer=e.exports.reverseBuffer=e.exports.writeUInt64LE=e.exports.readUInt64LE=e.exports.varuint=void 0;var n=x("18Mz5");let{typeforce:i}=n;var o=x("JAEWR");function s(e,t){if("number"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0)throw Error("specified a negative value for writing an unsigned value");if(e>t)throw Error("RangeError: value out of range");if(Math.floor(e)!==e)throw Error("value has a fractional component")}function a(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return s((n*=4294967296)+r,9007199254740991),n+r}function u(e,t,r){return s(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}e.exports.varuint=o,e.exports.readUInt64LE=a,e.exports.writeUInt64LE=u,e.exports.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},e.exports.cloneBuffer=function(e){let t=r.allocUnsafe(e.length);return e.copy(t),t};class p{static withCapacity(e){return new p(r.alloc(e))}constructor(e,t=0){this.buffer=e,this.offset=t,i(n.tuple(n.Buffer,n.UInt32),[e,t])}writeUInt8(e){this.offset=this.buffer.writeUInt8(e,this.offset)}writeInt32(e){this.offset=this.buffer.writeInt32LE(e,this.offset)}writeUInt32(e){this.offset=this.buffer.writeUInt32LE(e,this.offset)}writeUInt64(e){this.offset=u(this.buffer,e,this.offset)}writeVarInt(e){o.encode(e,this.buffer,this.offset),this.offset+=o.encode.bytes}writeSlice(e){if(this.buffer.length<this.offset+e.length)throw Error("Cannot write slice out of bounds");this.offset+=e.copy(this.buffer,this.offset)}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}writeVector(e){this.writeVarInt(e.length),e.forEach(e=>this.writeVarSlice(e))}end(){if(this.buffer.length===this.offset)return this.buffer;throw Error(`buffer size ${this.buffer.length}, offset ${this.offset}`)}}e.exports.BufferWriter=p,e.exports.BufferReader=class{constructor(e,t=0){this.buffer=e,this.offset=t,i(n.tuple(n.Buffer,n.UInt32),[e,t])}readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){let e=a(this.buffer,this.offset);return this.offset+=8,e}readVarInt(){let e=o.decode(this.buffer,this.offset);return this.offset+=o.decode.bytes,e}readSlice(e){if(this.buffer.length<this.offset+e)throw Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){return this.readSlice(this.readVarInt())}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}}),O("JAEWR",function(e,t){var r=x("1U9GM").Buffer;function n(e){if(e<0||e>9007199254740991||e%1!=0)throw RangeError("value out of range")}function i(e){return n(e),e<253?1:e<=65535?3:e<=4294967295?5:9}e.exports={encode:function e(t,o,s){if(n(t),o||(o=r.allocUnsafe(i(t))),!r.isBuffer(o))throw TypeError("buffer must be a Buffer instance");return s||(s=0),t<253?(o.writeUInt8(t,s),e.bytes=1):t<=65535?(o.writeUInt8(253,s),o.writeUInt16LE(t,s+1),e.bytes=3):t<=4294967295?(o.writeUInt8(254,s),o.writeUInt32LE(t,s+1),e.bytes=5):(o.writeUInt8(255,s),o.writeUInt32LE(t>>>0,s+1),o.writeUInt32LE(t/4294967296|0,s+5),e.bytes=9),o},decode:function e(t,i){if(!r.isBuffer(t))throw TypeError("buffer must be a Buffer instance");i||(i=0);var o=t.readUInt8(i);if(o<253)return e.bytes=1,o;if(253===o)return e.bytes=3,t.readUInt16LE(i+1);if(254===o)return e.bytes=5,t.readUInt32LE(i+1);e.bytes=9;var s=t.readUInt32LE(i+1),a=4294967296*t.readUInt32LE(i+5)+s;return n(a),a},encodingLength:i}}),O("1U9GM",function(e,t){/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var r=x("6ZWSX"),n=r.Buffer;function i(e,t){for(var r in e)t[r]=e[r]}function o(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=r:(i(r,e.exports),e.exports.Buffer=o),o.prototype=Object.create(n.prototype),i(n,o),o.from=function(e,t,r){if("number"==typeof e)throw TypeError("Argument must not be a number");return n(e,t,r)},o.alloc=function(e,t,r){if("number"!=typeof e)throw TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"==typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},o.allocUnsafe=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return n(e)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw TypeError("Argument must be a number");return r.SlowBuffer(e)}}),O("huuL7",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Block=void 0;var n=x("lMPrw"),i=x("lgTFk"),o=x("gmJA7"),s=x("gMJcK"),a=x("18Mz5");let{typeforce:u}=a,p=TypeError("Cannot compute merkle root for zero transactions"),l=TypeError("Cannot compute witness commit for non-segwit block");class f{constructor(){this.version=1,this.prevHash=void 0,this.merkleRoot=void 0,this.timestamp=0,this.witnessCommit=void 0,this.bits=0,this.nonce=0,this.transactions=void 0}static fromBuffer(e){if(e.length<80)throw Error("Buffer too small (< 80 bytes)");let t=new n.BufferReader(e),r=new f;if(r.version=t.readInt32(),r.prevHash=t.readSlice(32),r.merkleRoot=t.readSlice(32),r.timestamp=t.readUInt32(),r.bits=t.readUInt32(),r.nonce=t.readUInt32(),80===e.length)return r;let i=()=>{let e=s.Transaction.fromBuffer(t.buffer.slice(t.offset),!0);return t.offset+=e.byteLength(),e},o=t.readVarInt();r.transactions=[];for(let e=0;e<o;++e){let e=i();r.transactions.push(e)}let a=r.getWitnessCommit();return a&&(r.witnessCommit=a),r}static fromHex(e){return f.fromBuffer(r.from(e,"hex"))}static calculateTarget(e){let t=r.alloc(32,0);return t.writeUIntBE(8388607&e,29-(((4278190080&e)>>24)-3),3),t}static calculateMerkleRoot(e,t){if(u([{getHash:a.Function}],e),0===e.length)throw p;if(t&&!c(e))throw l;let n=e.map(e=>e.getHash(t)),s=(0,o.fastMerkleRoot)(n,i.hash256);return t?i.hash256(r.concat([s,e[0].ins[0].witness[0]])):s}getWitnessCommit(){if(!c(this.transactions))return null;let e=this.transactions[0].outs.filter(e=>e.script.slice(0,6).equals(r.from("6a24aa21a9ed","hex"))).map(e=>e.script.slice(6,38));if(0===e.length)return null;let t=e[e.length-1];return t instanceof r&&32===t.length?t:null}hasWitnessCommit(){return this.witnessCommit instanceof r&&32===this.witnessCommit.length||null!==this.getWitnessCommit()}hasWitness(){var e;return(e=this.transactions)instanceof Array&&e.some(e=>"object"==typeof e&&e.ins instanceof Array&&e.ins.some(e=>"object"==typeof e&&e.witness instanceof Array&&e.witness.length>0))}weight(){return 3*this.byteLength(!1,!1)+this.byteLength(!1,!0)}byteLength(e,t=!0){return e||!this.transactions?80:80+n.varuint.encodingLength(this.transactions.length)+this.transactions.reduce((e,r)=>e+r.byteLength(t),0)}getHash(){return i.hash256(this.toBuffer(!0))}getId(){return(0,n.reverseBuffer)(this.getHash()).toString("hex")}getUTCDate(){let e=new Date(0);return e.setUTCSeconds(this.timestamp),e}toBuffer(e){let t=r.allocUnsafe(this.byteLength(e)),i=new n.BufferWriter(t);return i.writeInt32(this.version),i.writeSlice(this.prevHash),i.writeSlice(this.merkleRoot),i.writeUInt32(this.timestamp),i.writeUInt32(this.bits),i.writeUInt32(this.nonce),e||!this.transactions||(n.varuint.encode(this.transactions.length,t,i.offset),i.offset+=n.varuint.encode.bytes,this.transactions.forEach(e=>{let r=e.byteLength();e.toBuffer(t,i.offset),i.offset+=r})),t}toHex(e){return this.toBuffer(e).toString("hex")}checkTxRoots(){let e=this.hasWitnessCommit();return!(!e&&this.hasWitness())&&this.__checkMerkleRoot()&&(!e||this.__checkWitnessCommit())}checkProofOfWork(){let e=(0,n.reverseBuffer)(this.getHash()),t=f.calculateTarget(this.bits);return 0>=e.compare(t)}__checkMerkleRoot(){if(!this.transactions)throw p;let e=f.calculateMerkleRoot(this.transactions);return 0===this.merkleRoot.compare(e)}__checkWitnessCommit(){if(!this.transactions)throw p;if(!this.hasWitnessCommit())throw l;let e=f.calculateMerkleRoot(this.transactions,!0);return 0===this.witnessCommit.compare(e)}}function c(e){return e instanceof Array&&e[0]&&e[0].ins&&e[0].ins instanceof Array&&e[0].ins[0]&&e[0].ins[0].witness&&e[0].ins[0].witness instanceof Array&&e[0].ins[0].witness.length>0}e.exports.Block=f}),O("gmJA7",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.fastMerkleRoot=void 0,e.exports.fastMerkleRoot=function(e,t){if(!Array.isArray(e))throw TypeError("Expected values Array");if("function"!=typeof t)throw TypeError("Expected digest Function");let n=e.length,i=e.concat();for(;n>1;){let e=0;for(let o=0;o<n;o+=2,++e){let s=i[o],a=o+1===n?s:i[o+1],u=r.concat([s,a]);i[e]=t(u)}n=e}return i[0]}}),O("gMJcK",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Transaction=void 0;var n=x("lMPrw"),i=x("lgTFk"),o=(x("8wAtk"),x("8wAtk")),s=x("18Mz5");let{typeforce:a}=s;function u(e){let t=e.length;return n.varuint.encodingLength(t)+t}let p=r.allocUnsafe(0),l=[],f=r.from("0000000000000000000000000000000000000000000000000000000000000000","hex"),c=r.from("0000000000000000000000000000000000000000000000000000000000000001","hex"),h={script:p,valueBuffer:r.from("ffffffffffffffff","hex")};class d{constructor(){this.version=1,this.locktime=0,this.ins=[],this.outs=[]}static fromBuffer(e,t){let r=new n.BufferReader(e),i=new d;i.version=r.readInt32();let o=r.readUInt8(),s=r.readUInt8(),a=!1;o===d.ADVANCED_TRANSACTION_MARKER&&s===d.ADVANCED_TRANSACTION_FLAG?a=!0:r.offset-=2;let u=r.readVarInt();for(let e=0;e<u;++e)i.ins.push({hash:r.readSlice(32),index:r.readUInt32(),script:r.readVarSlice(),sequence:r.readUInt32(),witness:l});let p=r.readVarInt();for(let e=0;e<p;++e)i.outs.push({value:r.readUInt64(),script:r.readVarSlice()});if(a){for(let e=0;e<u;++e)i.ins[e].witness=r.readVector();if(!i.hasWitnesses())throw Error("Transaction has superfluous witness data")}if(i.locktime=r.readUInt32(),t)return i;if(r.offset!==e.length)throw Error("Transaction has unexpected data");return i}static fromHex(e){return d.fromBuffer(r.from(e,"hex"),!1)}static isCoinbaseHash(e){a(s.Hash256bit,e);for(let t=0;t<32;++t)if(0!==e[t])return!1;return!0}isCoinbase(){return 1===this.ins.length&&d.isCoinbaseHash(this.ins[0].hash)}addInput(e,t,r,n){return a(s.tuple(s.Hash256bit,s.UInt32,s.maybe(s.UInt32),s.maybe(s.Buffer)),arguments),s.Null(r)&&(r=d.DEFAULT_SEQUENCE),this.ins.push({hash:e,index:t,script:n||p,sequence:r,witness:l})-1}addOutput(e,t){return a(s.tuple(s.Buffer,s.Satoshi),arguments),this.outs.push({script:e,value:t})-1}hasWitnesses(){return this.ins.some(e=>0!==e.witness.length)}weight(){return 3*this.byteLength(!1)+this.byteLength(!0)}virtualSize(){return Math.ceil(this.weight()/4)}byteLength(e=!0){let t=e&&this.hasWitnesses();return(t?10:8)+n.varuint.encodingLength(this.ins.length)+n.varuint.encodingLength(this.outs.length)+this.ins.reduce((e,t)=>e+40+u(t.script),0)+this.outs.reduce((e,t)=>e+8+u(t.script),0)+(t?this.ins.reduce((e,t)=>e+function(e){let t=e.length;return n.varuint.encodingLength(t)+e.reduce((e,t)=>e+u(t),0)}(t.witness),0):0)}clone(){let e=new d;return e.version=this.version,e.locktime=this.locktime,e.ins=this.ins.map(e=>({hash:e.hash,index:e.index,script:e.script,sequence:e.sequence,witness:e.witness})),e.outs=this.outs.map(e=>({script:e.script,value:e.value})),e}hashForSignature(e,t,n){if(a(s.tuple(s.UInt32,s.Buffer,s.Number),arguments),e>=this.ins.length)return c;let u=o.compile(o.decompile(t).filter(e=>e!==o.OPS.OP_CODESEPARATOR)),l=this.clone();if((31&n)===d.SIGHASH_NONE)l.outs=[],l.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)});else if((31&n)===d.SIGHASH_SINGLE){if(e>=this.outs.length)return c;l.outs.length=e+1;for(let t=0;t<e;t++)l.outs[t]=h;l.ins.forEach((t,r)=>{r!==e&&(t.sequence=0)})}n&d.SIGHASH_ANYONECANPAY?(l.ins=[l.ins[e]],l.ins[0].script=u):(l.ins.forEach(e=>{e.script=p}),l.ins[e].script=u);let f=r.allocUnsafe(l.byteLength(!1)+4);return f.writeInt32LE(n,f.length-4),l.__toBuffer(f,0,!1),i.hash256(f)}hashForWitnessV1(e,t,o,l,f,c){if(a(s.tuple(s.UInt32,a.arrayOf(s.Buffer),a.arrayOf(s.Satoshi),s.UInt32),arguments),o.length!==this.ins.length||t.length!==this.ins.length)throw Error("Must supply prevout script and value for all inputs");let h=l===d.SIGHASH_DEFAULT?d.SIGHASH_ALL:l&d.SIGHASH_OUTPUT_MASK,y=(l&d.SIGHASH_INPUT_MASK)===d.SIGHASH_ANYONECANPAY,g=h===d.SIGHASH_NONE,E=h===d.SIGHASH_SINGLE,m=p,v=p,b=p,w=p,I=p;if(!y){let e=n.BufferWriter.withCapacity(36*this.ins.length);this.ins.forEach(t=>{e.writeSlice(t.hash),e.writeUInt32(t.index)}),m=i.sha256(e.end()),e=n.BufferWriter.withCapacity(8*this.ins.length),o.forEach(t=>e.writeUInt64(t)),v=i.sha256(e.end()),e=n.BufferWriter.withCapacity(t.map(u).reduce((e,t)=>e+t)),t.forEach(t=>e.writeVarSlice(t)),b=i.sha256(e.end()),e=n.BufferWriter.withCapacity(4*this.ins.length),this.ins.forEach(t=>e.writeUInt32(t.sequence)),w=i.sha256(e.end())}if(g||E){if(E&&e<this.outs.length){let t=this.outs[e],r=n.BufferWriter.withCapacity(8+u(t.script));r.writeUInt64(t.value),r.writeVarSlice(t.script),I=i.sha256(r.end())}}else{let e=this.outs.map(e=>8+u(e.script)).reduce((e,t)=>e+t),t=n.BufferWriter.withCapacity(e);this.outs.forEach(e=>{t.writeUInt64(e.value),t.writeVarSlice(e.script)}),I=i.sha256(t.end())}let S=(f?2:0)+(c?1:0),T=174-(y?49:0)-(g?32:0)+(c?32:0)+(f?37:0),_=n.BufferWriter.withCapacity(T);if(_.writeUInt8(l),_.writeInt32(this.version),_.writeUInt32(this.locktime),_.writeSlice(m),_.writeSlice(v),_.writeSlice(b),_.writeSlice(w),g||E||_.writeSlice(I),_.writeUInt8(S),y){let r=this.ins[e];_.writeSlice(r.hash),_.writeUInt32(r.index),_.writeUInt64(o[e]),_.writeVarSlice(t[e]),_.writeUInt32(r.sequence)}else _.writeUInt32(e);if(c){let e=n.BufferWriter.withCapacity(u(c));e.writeVarSlice(c),_.writeSlice(i.sha256(e.end()))}return E&&_.writeSlice(I),f&&(_.writeSlice(f),_.writeUInt8(0),_.writeUInt32(4294967295)),i.taggedHash("TapSighash",r.concat([r.from([0]),_.end()]))}hashForWitnessV0(e,t,o,p){let l;a(s.tuple(s.UInt32,s.Buffer,s.Satoshi,s.UInt32),arguments);let c=r.from([]),h=f,y=f,g=f;if(p&d.SIGHASH_ANYONECANPAY||(c=r.allocUnsafe(36*this.ins.length),l=new n.BufferWriter(c,0),this.ins.forEach(e=>{l.writeSlice(e.hash),l.writeUInt32(e.index)}),y=i.hash256(c)),p&d.SIGHASH_ANYONECANPAY||(31&p)===d.SIGHASH_SINGLE||(31&p)===d.SIGHASH_NONE||(c=r.allocUnsafe(4*this.ins.length),l=new n.BufferWriter(c,0),this.ins.forEach(e=>{l.writeUInt32(e.sequence)}),g=i.hash256(c)),(31&p)!==d.SIGHASH_SINGLE&&(31&p)!==d.SIGHASH_NONE){let e=this.outs.reduce((e,t)=>e+8+u(t.script),0);c=r.allocUnsafe(e),l=new n.BufferWriter(c,0),this.outs.forEach(e=>{l.writeUInt64(e.value),l.writeVarSlice(e.script)}),h=i.hash256(c)}else if((31&p)===d.SIGHASH_SINGLE&&e<this.outs.length){let t=this.outs[e];c=r.allocUnsafe(8+u(t.script)),(l=new n.BufferWriter(c,0)).writeUInt64(t.value),l.writeVarSlice(t.script),h=i.hash256(c)}c=r.allocUnsafe(156+u(t)),l=new n.BufferWriter(c,0);let E=this.ins[e];return l.writeInt32(this.version),l.writeSlice(y),l.writeSlice(g),l.writeSlice(E.hash),l.writeUInt32(E.index),l.writeVarSlice(t),l.writeUInt64(o),l.writeUInt32(E.sequence),l.writeSlice(h),l.writeUInt32(this.locktime),l.writeUInt32(p),i.hash256(c)}getHash(e){return e&&this.isCoinbase()?r.alloc(32,0):i.hash256(this.__toBuffer(void 0,void 0,e))}getId(){return(0,n.reverseBuffer)(this.getHash(!1)).toString("hex")}toBuffer(e,t){return this.__toBuffer(e,t,!0)}toHex(){return this.toBuffer(void 0,void 0).toString("hex")}setInputScript(e,t){a(s.tuple(s.Number,s.Buffer),arguments),this.ins[e].script=t}setWitness(e,t){a(s.tuple(s.Number,[s.Buffer]),arguments),this.ins[e].witness=t}__toBuffer(e,t,i=!1){e||(e=r.allocUnsafe(this.byteLength(i)));let o=new n.BufferWriter(e,t||0);o.writeInt32(this.version);let s=i&&this.hasWitnesses();return(s&&(o.writeUInt8(d.ADVANCED_TRANSACTION_MARKER),o.writeUInt8(d.ADVANCED_TRANSACTION_FLAG)),o.writeVarInt(this.ins.length),this.ins.forEach(e=>{o.writeSlice(e.hash),o.writeUInt32(e.index),o.writeVarSlice(e.script),o.writeUInt32(e.sequence)}),o.writeVarInt(this.outs.length),this.outs.forEach(e=>{void 0!==e.value?o.writeUInt64(e.value):o.writeSlice(e.valueBuffer),o.writeVarSlice(e.script)}),s&&this.ins.forEach(e=>{o.writeVector(e.witness)}),o.writeUInt32(this.locktime),void 0!==t)?e.slice(t,o.offset):e}}e.exports.Transaction=d,d.DEFAULT_SEQUENCE=4294967295,d.SIGHASH_DEFAULT=0,d.SIGHASH_ALL=1,d.SIGHASH_NONE=2,d.SIGHASH_SINGLE=3,d.SIGHASH_ANYONECANPAY=128,d.SIGHASH_OUTPUT_MASK=3,d.SIGHASH_INPUT_MASK=128,d.ADVANCED_TRANSACTION_MARKER=0,d.ADVANCED_TRANSACTION_FLAG=1}),O("hXYde",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.Psbt=void 0;var n=x("jbkDe"),i=x("gjBY1"),o=x("geRUU"),s=x("d1wHE"),a=x("lMPrw"),u=x("fjh6Q"),p=x("j87lX"),l=x("lzIk8"),f=x("8wAtk"),c=x("gMJcK"),h=x("7rkx8"),d=x("9txdn");let y={network:u.bitcoin,maximumFeeRate:5e3};class g{static fromBase64(e,t={}){let n=r.from(e,"base64");return this.fromBuffer(n,t)}static fromHex(e,t={}){let n=r.from(e,"hex");return this.fromBuffer(n,t)}static fromBuffer(e,t={}){let r=new g(t,n.Psbt.fromBuffer(e,E));return function(e,t){e.ins.forEach(e=>{O(t,e)})}(r.__CACHE.__TX,r.__CACHE),r}constructor(e={},t=new n.Psbt(new m)){this.data=t,this.opts=Object.assign({},y,e),this.__CACHE={__NON_WITNESS_UTXO_TX_CACHE:[],__NON_WITNESS_UTXO_BUF_CACHE:[],__TX_IN_CACHE:{},__TX:this.data.globalMap.unsignedTx.tx,__UNSAFE_SIGN_NONSEGWIT:!1},0===this.data.inputs.length&&this.setVersion(2);let r=(e,t,r,n)=>Object.defineProperty(e,t,{enumerable:r,writable:n});r(this,"__CACHE",!1,!0),r(this,"opts",!1,!0)}get inputCount(){return this.data.inputs.length}get version(){return this.__CACHE.__TX.version}set version(e){this.setVersion(e)}get locktime(){return this.__CACHE.__TX.locktime}set locktime(e){this.setLocktime(e)}get txInputs(){return this.__CACHE.__TX.ins.map(e=>({hash:(0,a.cloneBuffer)(e.hash),index:e.index,sequence:e.sequence}))}get txOutputs(){return this.__CACHE.__TX.outs.map(e=>{let t;try{t=(0,s.fromOutputScript)(e.script,this.opts.network)}catch(e){}return{script:(0,a.cloneBuffer)(e.script),value:e.value,address:t}})}combine(...e){return this.data.combine(...e.map(e=>e.data)),this}clone(){let e=g.fromBuffer(this.data.toBuffer());return e.opts=JSON.parse(JSON.stringify(this.opts)),e}setMaximumFeeRate(e){S(e),this.opts.maximumFeeRate=e}setVersion(e){S(e),T(this.data.inputs,"setVersion");let t=this.__CACHE;return t.__TX.version=e,t.__EXTRACTED_TX=void 0,this}setLocktime(e){S(e),T(this.data.inputs,"setLocktime");let t=this.__CACHE;return t.__TX.locktime=e,t.__EXTRACTED_TX=void 0,this}setInputSequence(e,t){S(t),T(this.data.inputs,"setInputSequence");let r=this.__CACHE;if(r.__TX.ins.length<=e)throw Error("Input index too high");return r.__TX.ins[e].sequence=t,r.__EXTRACTED_TX=void 0,this}addInputs(e){return e.forEach(e=>this.addInput(e)),this}addInput(e){if(arguments.length>1||!e||void 0===e.hash||void 0===e.index)throw Error("Invalid arguments for Psbt.addInput. Requires single object with at least [hash] and [index]");(0,h.checkTaprootInputFields)(e,e,"addInput"),T(this.data.inputs,"addInput"),e.witnessScript&&q(e.witnessScript);let t=this.__CACHE;this.data.addInput(e);let r=t.__TX.ins[t.__TX.ins.length-1];O(t,r);let n=this.data.inputs.length-1,i=this.data.inputs[n];return i.nonWitnessUtxo&&G(this.__CACHE,i,n),t.__FEE=void 0,t.__FEE_RATE=void 0,t.__EXTRACTED_TX=void 0,this}addOutputs(e){return e.forEach(e=>this.addOutput(e)),this}addOutput(e){if(arguments.length>1||!e||void 0===e.value||void 0===e.address&&void 0===e.script)throw Error("Invalid arguments for Psbt.addOutput. Requires single object with at least [script or address] and [value]");T(this.data.inputs,"addOutput");let{address:t}=e;if("string"==typeof t){let{network:r}=this.opts,n=(0,s.toOutputScript)(t,r);e=Object.assign(e,{script:n})}(0,h.checkTaprootOutputFields)(e,e,"addOutput");let r=this.__CACHE;return this.data.addOutput(e),r.__FEE=void 0,r.__FEE_RATE=void 0,r.__EXTRACTED_TX=void 0,this}extractTransaction(e){if(!this.data.inputs.every(w))throw Error("Not finalized");let t=this.__CACHE;if(e||function(e,t,r){let n=t.__FEE_RATE||e.getFeeRate(),i=t.__EXTRACTED_TX.virtualSize();if(n>=r.maximumFeeRate)throw Error(`Warning: You are paying around ${(n*i/1e8).toFixed(8)} in fees, which is ${n} satoshi per byte for a transaction with a VSize of ${i} bytes (segwit counted as 0.25 byte per byte). Use setMaximumFeeRate method to raise your threshold, or pass true to the first arg of extractTransaction.`)}(this,t,this.opts),t.__EXTRACTED_TX)return t.__EXTRACTED_TX;let r=t.__TX.clone();return j(this.data.inputs,r,t,!0),r}getFeeRate(){return N("__FEE_RATE","fee rate",this.data.inputs,this.__CACHE)}getFee(){return N("__FEE","fee",this.data.inputs,this.__CACHE)}finalizeAllInputs(){return(0,o.checkForInput)(this.data.inputs,0),Y(this.data.inputs.length).forEach(e=>this.finalizeInput(e)),this}finalizeInput(e,t){let r=(0,o.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(r)?this._finalizeTaprootInput(e,r,void 0,t):this._finalizeInput(e,r,t)}finalizeTaprootInput(e,t,r=h.tapScriptFinalizer){let n=(0,o.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(n))return this._finalizeTaprootInput(e,n,t,r);throw Error(`Cannot finalize input #${e}. Not Taproot.`)}_finalizeInput(e,t,r=R){let{script:n,isP2SH:i,isP2WSH:o,isSegwit:s}=function(e,t,r){let n=r.__TX,i={script:null,isSegwit:!1,isP2SH:!1,isP2WSH:!1};if(i.isP2SH=!!t.redeemScript,i.isP2WSH=!!t.witnessScript,t.witnessScript)i.script=t.witnessScript;else if(t.redeemScript)i.script=t.redeemScript;else if(t.nonWitnessUtxo){let o=V(r,t,e),s=n.ins[e].index;i.script=o.outs[s].script}else t.witnessUtxo&&(i.script=t.witnessUtxo.script);return(t.witnessScript||(0,d.isP2WPKH)(i.script))&&(i.isSegwit=!0),i}(e,t,this.__CACHE);if(!n)throw Error(`No script found for input #${e}`);(function(e){if(!e.sighashType||!e.partialSig)return;let{partialSig:t,sighashType:r}=e;t.forEach(e=>{let{hashType:t}=f.signature.decode(e.signature);if(r!==t)throw Error("Signature sighash does not match input sighash type")})})(t);let{finalScriptSig:a,finalScriptWitness:u}=r(e,t,n,s,i,o);if(a&&this.data.updateInput(e,{finalScriptSig:a}),u&&this.data.updateInput(e,{finalScriptWitness:u}),!a&&!u)throw Error(`Unknown error finalizing input #${e}`);return this.data.clearFinalizedInput(e),this}_finalizeTaprootInput(e,t,r,n=h.tapScriptFinalizer){if(!t.witnessUtxo)throw Error(`Cannot finalize input #${e}. Missing withness utxo.`);if(t.tapKeySig){let r=p.p2tr({output:t.witnessUtxo.script,signature:t.tapKeySig}),n=(0,d.witnessStackToScriptWitness)(r.witness);this.data.updateInput(e,{finalScriptWitness:n})}else{let{finalScriptWitness:i}=n(e,t,r);this.data.updateInput(e,{finalScriptWitness:i})}return this.data.clearFinalizedInput(e),this}getInputType(e){let t=(0,o.checkForInput)(this.data.inputs,e),n=X(W(e,t,this.__CACHE),e,"input",t.redeemScript||function(e){if(!e)return;let t=f.decompile(e);if(!t)return;let n=t[t.length-1];if(!(!r.isBuffer(n)||$(n)||f.isCanonicalScriptSignature(n))&&f.decompile(n))return n}(t.finalScriptSig),t.witnessScript||function(e){if(!e)return;let t=F(e),r=t[t.length-1];if(!$(r)&&f.decompile(r))return r}(t.finalScriptWitness));return("raw"===n.type?"":n.type+"-")+z(n.meaningfulScript)}inputHasPubkey(e,t){return function(e,t,r,n){let{meaningfulScript:i}=X(W(r,t,n),r,"input",t.redeemScript,t.witnessScript);return(0,d.pubkeyInScript)(e,i)}(t,(0,o.checkForInput)(this.data.inputs,e),e,this.__CACHE)}inputHasHDKey(e,t){let r=(0,o.checkForInput)(this.data.inputs,e),n=I(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}outputHasPubkey(e,t){return function(e,t,r,n){let{meaningfulScript:i}=X(n.__TX.outs[r].script,r,"output",t.redeemScript,t.witnessScript);return(0,d.pubkeyInScript)(e,i)}(t,(0,o.checkForOutput)(this.data.outputs,e),e,this.__CACHE)}outputHasHDKey(e,t){let r=(0,o.checkForOutput)(this.data.outputs,e),n=I(t);return!!r.bip32Derivation&&r.bip32Derivation.some(n)}validateSignaturesOfAllInputs(e){return(0,o.checkForInput)(this.data.inputs,0),Y(this.data.inputs.length).map(t=>this.validateSignaturesOfInput(t,e)).reduce((e,t)=>!0===t&&e,!0)}validateSignaturesOfInput(e,t,r){let n=this.data.inputs[e];return(0,h.isTaprootInput)(n)?this.validateSignaturesOfTaprootInput(e,t,r):this._validateSignaturesOfInput(e,t,r)}_validateSignaturesOfInput(e,t,r){let n,i,o;let s=this.data.inputs[e],a=(s||{}).partialSig;if(!s||!a||a.length<1)throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let u=r?a.filter(e=>e.pubkey.equals(r)):a;if(u.length<1)throw Error("No signatures for this pubkey");let p=[];for(let r of u){let a=f.signature.decode(r.signature),{hash:u,script:l}=o!==a.hashType?B(e,Object.assign({},s,{sighashType:a.hashType}),this.__CACHE,!0):{hash:n,script:i};o=a.hashType,n=u,i=l,_(r.pubkey,l,"verify"),p.push(t(r.pubkey,u,a.signature))}return p.every(e=>!0===e)}validateSignaturesOfTaprootInput(e,t,r){let n=this.data.inputs[e],i=(n||{}).tapKeySig,o=(n||{}).tapScriptSig;if(!n&&!i&&!(o&&!o.length))throw Error("No signatures to validate");if("function"!=typeof t)throw Error("Need validator function to validate signatures");let s=(r=r&&(0,h.toXOnly)(r))?M(e,n,this.data.inputs,r,this.__CACHE):function(e,t,r,n){let i=[];if(t.tapInternalKey){let r=L(e,t,n);r&&i.push(r)}if(t.tapScriptSig){let e=t.tapScriptSig.map(e=>e.pubkey);i.push(...e)}return i.map(i=>M(e,t,r,i,n)).flat()}(e,n,this.data.inputs,this.__CACHE);if(!s.length)throw Error("No signatures for this pubkey");let a=s.find(e=>!e.leafHash),u=0;if(i&&a){if(!t(a.pubkey,a.hash,C(i)))return!1;u++}if(o)for(let e of o){let r=s.find(t=>e.pubkey.equals(t.pubkey));if(r){if(!t(e.pubkey,r.hash,C(e.signature)))return!1;u++}}return u>0}signAllInputsHD(e,t=[c.Transaction.SIGHASH_ALL]){if(!e||!e.publicKey||!e.fingerprint)throw Error("Need HDSigner to sign input");let r=[];for(let n of Y(this.data.inputs.length))try{this.signInputHD(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsHDAsync(e,t=[c.Transaction.SIGHASH_ALL]){return new Promise((r,n)=>{if(!e||!e.publicKey||!e.fingerprint)return n(Error("Need HDSigner to sign input"));let i=[],o=[];for(let r of Y(this.data.inputs.length))o.push(this.signInputHDAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInputHD(e,t,r=[c.Transaction.SIGHASH_ALL]){if(!t||!t.publicKey||!t.fingerprint)throw Error("Need HDSigner to sign input");return H(e,this.data.inputs,t).forEach(t=>this.signInput(e,t,r)),this}signInputHDAsync(e,t,r=[c.Transaction.SIGHASH_ALL]){return new Promise((n,i)=>t&&t.publicKey&&t.fingerprint?Promise.all(H(e,this.data.inputs,t).map(t=>this.signInputAsync(e,t,r))).then(()=>{n()}).catch(i):i(Error("Need HDSigner to sign input")))}signAllInputs(e,t){if(!e||!e.publicKey)throw Error("Need Signer to sign input");let r=[];for(let n of Y(this.data.inputs.length))try{this.signInput(n,e,t),r.push(!0)}catch(e){r.push(!1)}if(r.every(e=>!1===e))throw Error("No inputs were signed");return this}signAllInputsAsync(e,t){return new Promise((r,n)=>{if(!e||!e.publicKey)return n(Error("Need Signer to sign input"));let i=[],o=[];for(let[r]of this.data.inputs.entries())o.push(this.signInputAsync(r,e,t).then(()=>{i.push(!0)},()=>{i.push(!1)}));return Promise.all(o).then(()=>{if(i.every(e=>!1===e))return n(Error("No inputs were signed"));r()})})}signInput(e,t,r){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,o.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(n)?this._signTaprootInput(e,n,t,void 0,r):this._signInput(e,t,r)}signTaprootInput(e,t,r,n){if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,o.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(i))return this._signTaprootInput(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)}_signInput(e,t,r=[c.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=U(this.data.inputs,e,t.publicKey,this.__CACHE,r),o=[{pubkey:t.publicKey,signature:f.signature.encode(t.sign(n),i)}];return this.data.updateInput(e,{partialSig:o}),this}_signTaprootInput(e,t,r,n,i=[c.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=o.filter(e=>!e.leafHash).map(e=>(0,h.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType))[0],a=o.filter(e=>!!e.leafHash).map(e=>({pubkey:(0,h.toXOnly)(r.publicKey),signature:(0,h.serializeTaprootSignature)(r.signSchnorr(e.hash),t.sighashType),leafHash:e.leafHash}));return s&&this.data.updateInput(e,{tapKeySig:s}),a.length&&this.data.updateInput(e,{tapScriptSig:a}),this}signInputAsync(e,t,r){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let n=(0,o.checkForInput)(this.data.inputs,e);return(0,h.isTaprootInput)(n)?this._signTaprootInputAsync(e,n,t,void 0,r):this._signInputAsync(e,t,r)})}signTaprootInputAsync(e,t,r,n){return Promise.resolve().then(()=>{if(!t||!t.publicKey)throw Error("Need Signer to sign input");let i=(0,o.checkForInput)(this.data.inputs,e);if((0,h.isTaprootInput)(i))return this._signTaprootInputAsync(e,i,t,r,n);throw Error(`Input #${e} is not of type Taproot.`)})}_signInputAsync(e,t,r=[c.Transaction.SIGHASH_ALL]){let{hash:n,sighashType:i}=U(this.data.inputs,e,t.publicKey,this.__CACHE,r);return Promise.resolve(t.sign(n)).then(r=>{let n=[{pubkey:t.publicKey,signature:f.signature.encode(r,i)}];this.data.updateInput(e,{partialSig:n})})}async _signTaprootInputAsync(e,t,r,n,i=[c.Transaction.SIGHASH_DEFAULT]){let o=this.checkTaprootHashesForSig(e,t,r,n,i),s=[],a=o.filter(e=>!e.leafHash)[0];if(a){let e=Promise.resolve(r.signSchnorr(a.hash)).then(e=>({tapKeySig:(0,h.serializeTaprootSignature)(e,t.sighashType)}));s.push(e)}let u=o.filter(e=>!!e.leafHash);if(u.length){let e=u.map(e=>Promise.resolve(r.signSchnorr(e.hash)).then(n=>({tapScriptSig:[{pubkey:(0,h.toXOnly)(r.publicKey),signature:(0,h.serializeTaprootSignature)(n,t.sighashType),leafHash:e.leafHash}]})));s.push(...e)}return Promise.all(s).then(t=>{t.forEach(t=>this.data.updateInput(e,t))})}checkTaprootHashesForSig(e,t,r,n,i){if("function"!=typeof r.signSchnorr)throw Error(`Need Schnorr Signer to sign taproot input #${e}.`);let o=M(e,t,this.data.inputs,r.publicKey,this.__CACHE,n,i);if(!o||!o.length)throw Error(`Can not sign for input #${e} with the key ${r.publicKey.toString("hex")}`);return o}toBuffer(){return v(this.__CACHE),this.data.toBuffer()}toHex(){return v(this.__CACHE),this.data.toHex()}toBase64(){return v(this.__CACHE),this.data.toBase64()}updateGlobal(e){return this.data.updateGlobal(e),this}updateInput(e,t){return t.witnessScript&&q(t.witnessScript),(0,h.checkTaprootInputFields)(this.data.inputs[e],t,"updateInput"),this.data.updateInput(e,t),t.nonWitnessUtxo&&G(this.__CACHE,this.data.inputs[e],e),this}updateOutput(e,t){let r=this.data.outputs[e];return(0,h.checkTaprootOutputFields)(r,t,"updateOutput"),this.data.updateOutput(e,t),this}addUnknownKeyValToGlobal(e){return this.data.addUnknownKeyValToGlobal(e),this}addUnknownKeyValToInput(e,t){return this.data.addUnknownKeyValToInput(e,t),this}addUnknownKeyValToOutput(e,t){return this.data.addUnknownKeyValToOutput(e,t),this}clearFinalizedInput(e){return this.data.clearFinalizedInput(e),this}}e.exports.Psbt=g;let E=e=>new m(e);class m{constructor(e=r.from([2,0,0,0,0,0,0,0,0,0])){this.tx=c.Transaction.fromBuffer(e),function(e){if(!e.ins.every(e=>e.script&&0===e.script.length&&e.witness&&0===e.witness.length))throw Error("Format Error: Transaction ScriptSigs are not empty")}(this.tx),Object.defineProperty(this,"tx",{enumerable:!1,writable:!0})}getInputOutputCounts(){return{inputCount:this.tx.ins.length,outputCount:this.tx.outs.length}}addInput(e){if(void 0===e.hash||void 0===e.index||!r.isBuffer(e.hash)&&"string"!=typeof e.hash||"number"!=typeof e.index)throw Error("Error adding input.");let t="string"==typeof e.hash?(0,a.reverseBuffer)(r.from(e.hash,"hex")):e.hash;this.tx.addInput(t,e.index,e.sequence)}addOutput(e){if(void 0===e.script||void 0===e.value||!r.isBuffer(e.script)||"number"!=typeof e.value)throw Error("Error adding output.");this.tx.addOutput(e.script,e.value)}toBuffer(){return this.tx.toBuffer()}}function v(e){if(!1!==e.__UNSAFE_SIGN_NONSEGWIT)throw Error("Not BIP174 compliant, can not export")}function b(e,t,r){let n;if(!t)return!1;if((n=r?r.map(e=>{let r=function(e){if(65===e.length){let t=1&e[64],r=e.slice(0,33);return r[0]=2|t,r}return e.slice()}(e);return t.find(e=>e.pubkey.equals(r))}).filter(e=>!!e):t).length>e)throw Error("Too many signatures");return n.length===e}function w(e){return!!e.finalScriptSig||!!e.finalScriptWitness}function I(e){return t=>!!(t.masterFingerprint.equals(e.fingerprint)&&e.derivePath(t.path).publicKey.equals(t.pubkey))}function S(e){if("number"!=typeof e||e!==Math.floor(e)||e>4294967295||e<0)throw Error("Invalid 32 bit integer")}function T(e,t){e.forEach(e=>{if((0,h.isTaprootInput)(e)?(0,h.checkTaprootInputForSigs)(e,t):(0,d.checkInputForSig)(e,t))throw Error("Can not modify transaction, signatures exist.")})}function _(e,t,r){if(!(0,d.pubkeyInScript)(e,t))throw Error(`Can not ${r} for this input with the key ${e.toString("hex")}`)}function O(e,t){let n=(0,a.reverseBuffer)(r.from(t.hash)).toString("hex")+":"+t.index;if(e.__TX_IN_CACHE[n])throw Error("Duplicate input detected.");e.__TX_IN_CACHE[n]=1}function P(e,t){return(r,n,i,o)=>{let s=e({redeem:{output:i}}).output;if(!n.equals(s))throw Error(`${t} for ${o} #${r} doesn't match the scriptPubKey in the prevout`)}}let A=P(p.p2sh,"Redeem script"),k=P(p.p2wsh,"Witness script");function N(e,t,r,n){let i;if(!r.every(w))throw Error(`PSBT must be finalized to calculate ${t}`);if("__FEE_RATE"===e&&n.__FEE_RATE)return n.__FEE_RATE;if("__FEE"===e&&n.__FEE)return n.__FEE;let o=!0;return(n.__EXTRACTED_TX?(i=n.__EXTRACTED_TX,o=!1):i=n.__TX.clone(),j(r,i,n,o),"__FEE_RATE"===e)?n.__FEE_RATE:"__FEE"===e?n.__FEE:void 0}function R(e,t,r,n,i,o){let s=z(r);if(!function(e,t,r){switch(r){case"pubkey":case"pubkeyhash":case"witnesspubkeyhash":return b(1,e.partialSig);case"multisig":let n=p.p2ms({output:t});return b(n.m,e.partialSig,n.pubkeys);default:return!1}}(t,r,s))throw Error(`Can not finalize input #${e}`);return function(e,t,r,n,i,o){let s,a;let u=function(e,t,r){let n;switch(t){case"multisig":let i=p.p2ms({output:e}).pubkeys.map(e=>(r.filter(t=>t.pubkey.equals(e))[0]||{}).signature).filter(e=>!!e);n=p.p2ms({output:e,signatures:i});break;case"pubkey":n=p.p2pk({output:e,signature:r[0].signature});break;case"pubkeyhash":n=p.p2pkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature});break;case"witnesspubkeyhash":n=p.p2wpkh({output:e,pubkey:r[0].pubkey,signature:r[0].signature})}return n}(e,t,r),l=o?p.p2wsh({redeem:u}):null,f=i?p.p2sh({redeem:l||u}):null;return n?(a=l?(0,d.witnessStackToScriptWitness)(l.witness):(0,d.witnessStackToScriptWitness)(u.witness),f&&(s=f.input)):s=f?f.input:u.input,{finalScriptSig:s,finalScriptWitness:a}}(r,s,t.partialSig,n,i,o)}function U(e,t,r,n,i){let s=(0,o.checkForInput)(e,t),{hash:a,sighashType:u,script:p}=B(t,s,n,!1,i);return _(r,p,"sign"),{hash:a,sighashType:u}}function B(e,t,r,n,i){let o,s;let a=r.__TX,u=t.sighashType||c.Transaction.SIGHASH_ALL;if(D(u,i),t.nonWitnessUtxo){let n=V(r,t,e),i=a.ins[e].hash,o=n.getHash();if(!i.equals(o))throw Error(`Non-witness UTXO hash for input #${e} doesn't match the hash specified in the prevout`);let u=a.ins[e].index;s=n.outs[u]}else if(t.witnessUtxo)s=t.witnessUtxo;else throw Error("Need a Utxo input item for signing");let{meaningfulScript:l,type:f}=X(s.script,e,"input",t.redeemScript,t.witnessScript);if(["p2sh-p2wsh","p2wsh"].indexOf(f)>=0)o=a.hashForWitnessV0(e,l,s.value,u);else if((0,d.isP2WPKH)(l)){let t=p.p2pkh({hash:l.slice(2)}).output;o=a.hashForWitnessV0(e,t,s.value,u)}else{if(void 0===t.nonWitnessUtxo&&!1===r.__UNSAFE_SIGN_NONSEGWIT)throw Error(`Input #${e} has witnessUtxo but non-segwit script: ${l.toString("hex")}`);n||!1===r.__UNSAFE_SIGN_NONSEGWIT||console.warn("Warning: Signing non-segwit inputs without the full parent transaction means there is a chance that a miner could feed you incorrect information to trick you into paying large fees. This behavior is the same as Psbt's predecesor (TransactionBuilder - now removed) when signing non-segwit scripts. You are not able to export this Psbt with toBuffer|toBase64|toHex since it is not BIP174 compliant.\n*********************\nPROCEED WITH CAUTION!\n*********************"),o=a.hashForSignature(e,l,u)}return{script:l,sighashType:u,hash:o}}function L(e,t,r){let{script:n}=K(e,t,r);return(0,d.isP2TR)(n)?n.subarray(2,34):null}function C(e){return 64===e.length?e:e.subarray(0,64)}function M(e,t,n,i,o,s,a){let u=o.__TX,p=t.sighashType||c.Transaction.SIGHASH_DEFAULT;D(p,a);let f=n.map((e,t)=>K(t,e,o)),y=f.map(e=>e.script),g=f.map(e=>e.value),E=[];if(t.tapInternalKey&&!s){let n=L(e,t,o)||r.from([]);if((0,h.toXOnly)(i).equals(n)){let t=u.hashForWitnessV1(e,y,g,p);E.push({pubkey:i,hash:t})}}let m=(t.tapLeafScript||[]).filter(e=>(0,d.pubkeyInScript)(i,e.script)).map(e=>Object.assign({hash:(0,l.tapleafHash)({output:e.script,version:e.leafVersion})},e)).filter(e=>!s||s.equals(e.hash)).map(t=>({pubkey:i,hash:u.hashForWitnessV1(e,y,g,c.Transaction.SIGHASH_DEFAULT,t.hash),leafHash:t.hash}));return E.concat(m)}function D(e,t){if(t&&0>t.indexOf(e)){let t=function(e){let t=e&c.Transaction.SIGHASH_ANYONECANPAY?"SIGHASH_ANYONECANPAY | ":"";switch(31&e){case c.Transaction.SIGHASH_ALL:t+="SIGHASH_ALL";break;case c.Transaction.SIGHASH_SINGLE:t+="SIGHASH_SINGLE";break;case c.Transaction.SIGHASH_NONE:t+="SIGHASH_NONE"}return t}(e);throw Error(`Sighash type is not allowed. Retry the sign method passing the sighashTypes array of whitelisted types. Sighash type: ${t}`)}}function H(e,t,r){let n=(0,o.checkForInput)(t,e);if(!n.bip32Derivation||0===n.bip32Derivation.length)throw Error("Need bip32Derivation to sign with HD");let i=n.bip32Derivation.map(e=>e.masterFingerprint.equals(r.fingerprint)?e:void 0).filter(e=>!!e);if(0===i.length)throw Error("Need one bip32Derivation masterFingerprint to match the HDSigner fingerprint");return i.map(e=>{let t=r.derivePath(e.path);if(!e.pubkey.equals(t.publicKey))throw Error("pubkey did not match bip32Derivation");return t})}function F(e){let t=0;function r(){let r=i.decode(e,t);return t+=i.decode.bytes,r}return function(){let n=r(),i=[];for(let o=0;o<n;o++)i.push(function(){var n;return n=r(),t+=n,e.slice(t-n,t)}());return i}()}function G(e,t,r){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t.nonWitnessUtxo;let n=c.Transaction.fromBuffer(t.nonWitnessUtxo);e.__NON_WITNESS_UTXO_TX_CACHE[r]=n,delete t.nonWitnessUtxo,Object.defineProperty(t,"nonWitnessUtxo",{enumerable:!0,get(){let t=e.__NON_WITNESS_UTXO_BUF_CACHE[r],n=e.__NON_WITNESS_UTXO_TX_CACHE[r];if(void 0!==t)return t;{let t=n.toBuffer();return e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t,t}},set(t){e.__NON_WITNESS_UTXO_BUF_CACHE[r]=t}})}function j(e,t,r,n){let i=0;e.forEach((e,o)=>{if(n&&e.finalScriptSig&&(t.ins[o].script=e.finalScriptSig),n&&e.finalScriptWitness&&(t.ins[o].witness=F(e.finalScriptWitness)),e.witnessUtxo)i+=e.witnessUtxo.value;else if(e.nonWitnessUtxo){let n=V(r,e,o),s=t.ins[o].index,a=n.outs[s];i+=a.value}});let o=t.outs.reduce((e,t)=>e+t.value,0),s=i-o;if(s<0)throw Error("Outputs are spending more than Inputs");let a=t.virtualSize();r.__FEE=s,r.__EXTRACTED_TX=t,r.__FEE_RATE=Math.floor(s/a)}function V(e,t,r){let n=e.__NON_WITNESS_UTXO_TX_CACHE;return n[r]||G(e,t,r),n[r]}function W(e,t,r){let{script:n}=K(e,t,r);return n}function K(e,t,r){if(void 0!==t.witnessUtxo)return{script:t.witnessUtxo.script,value:t.witnessUtxo.value};if(void 0!==t.nonWitnessUtxo){let n=V(r,t,e).outs[r.__TX.ins[e].index];return{script:n.script,value:n.value}}throw Error("Can't find pubkey in input without Utxo data")}function $(e){return 33===e.length&&f.isCanonicalPubKey(e)}function X(e,t,r,n,i){let o;let s=(0,d.isP2SHScript)(e),a=s&&n&&(0,d.isP2WSHScript)(n),u=(0,d.isP2WSHScript)(e);if(s&&void 0===n)throw Error("scriptPubkey is P2SH but redeemScript missing");if((u||a)&&void 0===i)throw Error("scriptPubkey or redeemScript is P2WSH but witnessScript missing");return a?(o=i,A(t,e,n,r),k(t,n,i,r),q(o)):u?(o=i,k(t,e,i,r),q(o)):s?(o=n,A(t,e,n,r)):o=e,{meaningfulScript:o,type:a?"p2sh-p2wsh":s?"p2sh":u?"p2wsh":"raw"}}function q(e){if((0,d.isP2WPKH)(e)||(0,d.isP2SHScript)(e))throw Error("P2WPKH or P2SH can not be contained within P2WSH")}function z(e){return(0,d.isP2WPKH)(e)?"witnesspubkeyhash":(0,d.isP2PKH)(e)?"pubkeyhash":(0,d.isP2MS)(e)?"multisig":(0,d.isP2PK)(e)?"pubkey":"nonstandard"}function Y(e){return[...Array(e).keys()]}}),O("jbkDe",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("kO5Vi"),i=x("8Damr"),o=x("qpq9i"),s=x("geRUU");e.exports.Psbt=class{constructor(e){this.inputs=[],this.outputs=[],this.globalMap={unsignedTx:e}}static fromBase64(e,t){let n=r.from(e,"base64");return this.fromBuffer(n,t)}static fromHex(e,t){let n=r.from(e,"hex");return this.fromBuffer(n,t)}static fromBuffer(e,t){let r=i.psbtFromBuffer(e,t),n=new this(r.globalMap.unsignedTx);return Object.assign(n,r),n}toBase64(){return this.toBuffer().toString("base64")}toHex(){return this.toBuffer().toString("hex")}toBuffer(){return i.psbtToBuffer(this)}updateGlobal(e){return s.updateGlobal(e,this.globalMap),this}updateInput(e,t){let r=s.checkForInput(this.inputs,e);return s.updateInput(t,r),this}updateOutput(e,t){let r=s.checkForOutput(this.outputs,e);return s.updateOutput(t,r),this}addUnknownKeyValToGlobal(e){return s.checkHasKey(e,this.globalMap.unknownKeyVals,s.getEnumLength(o.GlobalTypes)),this.globalMap.unknownKeyVals||(this.globalMap.unknownKeyVals=[]),this.globalMap.unknownKeyVals.push(e),this}addUnknownKeyValToInput(e,t){let r=s.checkForInput(this.inputs,e);return s.checkHasKey(t,r.unknownKeyVals,s.getEnumLength(o.InputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addUnknownKeyValToOutput(e,t){let r=s.checkForOutput(this.outputs,e);return s.checkHasKey(t,r.unknownKeyVals,s.getEnumLength(o.OutputTypes)),r.unknownKeyVals||(r.unknownKeyVals=[]),r.unknownKeyVals.push(t),this}addInput(e){this.globalMap.unsignedTx.addInput(e),this.inputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.inputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToInput(r,e)),s.addInputAttributes(this.inputs,e),this}addOutput(e){this.globalMap.unsignedTx.addOutput(e),this.outputs.push({unknownKeyVals:[]});let t=e.unknownKeyVals||[],r=this.outputs.length-1;if(!Array.isArray(t))throw Error("unknownKeyVals must be an Array");return t.forEach(e=>this.addUnknownKeyValToOutput(r,e)),s.addOutputAttributes(this.outputs,e),this}clearFinalizedInput(e){let t=s.checkForInput(this.inputs,e);for(let r of(s.inputCheckUncleanFinalized(e,t),Object.keys(t)))["witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknownKeyVals"].includes(r)||delete t[r];return this}combine(...e){return Object.assign(this,n.combine([this].concat(e))),this}getTransaction(){return this.globalMap.unsignedTx.toBuffer()}}}),O("kO5Vi",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=x("8Damr");function n(e,t,r){return n=>{if(e.has(n))return;let i=r.filter(e=>e.key.toString("hex")===n)[0];t.push(i),e.add(n)}}function i(e){return e.globalMap.unsignedTx}function o(e){let t=new Set;return e.forEach(e=>{let r=e.key.toString("hex");if(t.has(r))throw Error("Combine: KeyValue Map keys should be unique");t.add(r)}),t}e.exports.combine=function(e){let t=e[0],s=r.psbtToKeyVals(t),a=e.slice(1);if(0===a.length)throw Error("Combine: Nothing to combine");let u=i(t);if(void 0===u)throw Error("Combine: Self missing transaction");let p=o(s.globalKeyVals),l=s.inputKeyVals.map(o),f=s.outputKeyVals.map(o);for(let e of a){let t=i(e);if(void 0===t||!t.toBuffer().equals(u.toBuffer()))throw Error("Combine: One of the Psbts does not have the same transaction.");let a=r.psbtToKeyVals(e);o(a.globalKeyVals).forEach(n(p,s.globalKeyVals,a.globalKeyVals)),a.inputKeyVals.map(o).forEach((e,t)=>e.forEach(n(l[t],s.inputKeyVals[t],a.inputKeyVals[t]))),a.outputKeyVals.map(o).forEach((e,t)=>e.forEach(n(f[t],s.outputKeyVals[t],a.outputKeyVals[t])))}return r.psbtFromKeyVals(u,{globalMapKeyVals:s.globalKeyVals,inputKeyVals:s.inputKeyVals,outputKeyVals:s.outputKeyVals})}}),O("8Damr",function(e,t){function r(t){for(var r in t)e.exports.hasOwnProperty(r)||(e.exports[r]=t[r])}Object.defineProperty(e.exports,"__esModule",{value:!0}),r(x("8zyJG")),r(x("iWOny"))}),O("8zyJG",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("7H7c4"),i=x("3cFg7"),o=x("gjBY1"),s=x("qpq9i");function a(e,t,n){if(!t.equals(r.from([n])))throw Error(`Format Error: Invalid ${e} key: ${t.toString("hex")}`)}function u(e,{globalMapKeyVals:t,inputKeyVals:r,outputKeyVals:o}){let u={unsignedTx:e},p=0;for(let e of t)switch(e.key[0]){case s.GlobalTypes.UNSIGNED_TX:if(a("global",e.key,s.GlobalTypes.UNSIGNED_TX),p>0)throw Error("Format Error: GlobalMap has multiple UNSIGNED_TX");p++;break;case s.GlobalTypes.GLOBAL_XPUB:void 0===u.globalXpub&&(u.globalXpub=[]),u.globalXpub.push(n.globals.globalXpub.decode(e));break;default:u.unknownKeyVals||(u.unknownKeyVals=[]),u.unknownKeyVals.push(e)}let l=r.length,f=o.length,c=[],h=[];for(let e of i.range(l)){let t={};for(let i of r[e])switch(n.inputs.checkPubkey(i),i.key[0]){case s.InputTypes.NON_WITNESS_UTXO:if(a("input",i.key,s.InputTypes.NON_WITNESS_UTXO),void 0!==t.nonWitnessUtxo)throw Error("Format Error: Input has multiple NON_WITNESS_UTXO");t.nonWitnessUtxo=n.inputs.nonWitnessUtxo.decode(i);break;case s.InputTypes.WITNESS_UTXO:if(a("input",i.key,s.InputTypes.WITNESS_UTXO),void 0!==t.witnessUtxo)throw Error("Format Error: Input has multiple WITNESS_UTXO");t.witnessUtxo=n.inputs.witnessUtxo.decode(i);break;case s.InputTypes.PARTIAL_SIG:void 0===t.partialSig&&(t.partialSig=[]),t.partialSig.push(n.inputs.partialSig.decode(i));break;case s.InputTypes.SIGHASH_TYPE:if(a("input",i.key,s.InputTypes.SIGHASH_TYPE),void 0!==t.sighashType)throw Error("Format Error: Input has multiple SIGHASH_TYPE");t.sighashType=n.inputs.sighashType.decode(i);break;case s.InputTypes.REDEEM_SCRIPT:if(a("input",i.key,s.InputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Input has multiple REDEEM_SCRIPT");t.redeemScript=n.inputs.redeemScript.decode(i);break;case s.InputTypes.WITNESS_SCRIPT:if(a("input",i.key,s.InputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Input has multiple WITNESS_SCRIPT");t.witnessScript=n.inputs.witnessScript.decode(i);break;case s.InputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(n.inputs.bip32Derivation.decode(i));break;case s.InputTypes.FINAL_SCRIPTSIG:a("input",i.key,s.InputTypes.FINAL_SCRIPTSIG),t.finalScriptSig=n.inputs.finalScriptSig.decode(i);break;case s.InputTypes.FINAL_SCRIPTWITNESS:a("input",i.key,s.InputTypes.FINAL_SCRIPTWITNESS),t.finalScriptWitness=n.inputs.finalScriptWitness.decode(i);break;case s.InputTypes.POR_COMMITMENT:a("input",i.key,s.InputTypes.POR_COMMITMENT),t.porCommitment=n.inputs.porCommitment.decode(i);break;case s.InputTypes.TAP_KEY_SIG:a("input",i.key,s.InputTypes.TAP_KEY_SIG),t.tapKeySig=n.inputs.tapKeySig.decode(i);break;case s.InputTypes.TAP_SCRIPT_SIG:void 0===t.tapScriptSig&&(t.tapScriptSig=[]),t.tapScriptSig.push(n.inputs.tapScriptSig.decode(i));break;case s.InputTypes.TAP_LEAF_SCRIPT:void 0===t.tapLeafScript&&(t.tapLeafScript=[]),t.tapLeafScript.push(n.inputs.tapLeafScript.decode(i));break;case s.InputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(n.inputs.tapBip32Derivation.decode(i));break;case s.InputTypes.TAP_INTERNAL_KEY:a("input",i.key,s.InputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=n.inputs.tapInternalKey.decode(i);break;case s.InputTypes.TAP_MERKLE_ROOT:a("input",i.key,s.InputTypes.TAP_MERKLE_ROOT),t.tapMerkleRoot=n.inputs.tapMerkleRoot.decode(i);break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(i)}c.push(t)}for(let e of i.range(f)){let t={};for(let r of o[e])switch(n.outputs.checkPubkey(r),r.key[0]){case s.OutputTypes.REDEEM_SCRIPT:if(a("output",r.key,s.OutputTypes.REDEEM_SCRIPT),void 0!==t.redeemScript)throw Error("Format Error: Output has multiple REDEEM_SCRIPT");t.redeemScript=n.outputs.redeemScript.decode(r);break;case s.OutputTypes.WITNESS_SCRIPT:if(a("output",r.key,s.OutputTypes.WITNESS_SCRIPT),void 0!==t.witnessScript)throw Error("Format Error: Output has multiple WITNESS_SCRIPT");t.witnessScript=n.outputs.witnessScript.decode(r);break;case s.OutputTypes.BIP32_DERIVATION:void 0===t.bip32Derivation&&(t.bip32Derivation=[]),t.bip32Derivation.push(n.outputs.bip32Derivation.decode(r));break;case s.OutputTypes.TAP_INTERNAL_KEY:a("output",r.key,s.OutputTypes.TAP_INTERNAL_KEY),t.tapInternalKey=n.outputs.tapInternalKey.decode(r);break;case s.OutputTypes.TAP_TREE:a("output",r.key,s.OutputTypes.TAP_TREE),t.tapTree=n.outputs.tapTree.decode(r);break;case s.OutputTypes.TAP_BIP32_DERIVATION:void 0===t.tapBip32Derivation&&(t.tapBip32Derivation=[]),t.tapBip32Derivation.push(n.outputs.tapBip32Derivation.decode(r));break;default:t.unknownKeyVals||(t.unknownKeyVals=[]),t.unknownKeyVals.push(r)}h.push(t)}return{globalMap:u,inputs:c,outputs:h}}e.exports.psbtFromBuffer=function(e,t){let r=0;function n(){let t=o.decode(e,r);r+=o.encodingLength(t);let n=e.slice(r,r+t);return r+=t,n}function a(){return{key:n(),value:n()}}function p(){if(r>=e.length)throw Error("Format Error: Unexpected End of PSBT");let t=0===e.readUInt8(r);return t&&r++,t}if(1886610036!==function(){let t=e.readUInt32BE(r);return r+=4,t}())throw Error("Format Error: Invalid Magic Number");if(255!==function(){let t=e.readUInt8(r);return r+=1,t}())throw Error("Format Error: Magic Number must be followed by 0xff separator");let l=[],f={};for(;!p();){let e=a(),t=e.key.toString("hex");if(f[t])throw Error("Format Error: Keys must be unique for global keymap: key "+t);f[t]=1,l.push(e)}let c=l.filter(e=>e.key[0]===s.GlobalTypes.UNSIGNED_TX);if(1!==c.length)throw Error("Format Error: Only one UNSIGNED_TX allowed");let h=t(c[0].value),{inputCount:d,outputCount:y}=h.getInputOutputCounts(),g=[],E=[];for(let e of i.range(d)){let t={},r=[];for(;!p();){let n=a(),i=n.key.toString("hex");if(t[i])throw Error("Format Error: Keys must be unique for each input: input index "+e+" key "+i);t[i]=1,r.push(n)}g.push(r)}for(let e of i.range(y)){let t={},r=[];for(;!p();){let n=a(),i=n.key.toString("hex");if(t[i])throw Error("Format Error: Keys must be unique for each output: output index "+e+" key "+i);t[i]=1,r.push(n)}E.push(r)}return u(h,{globalMapKeyVals:l,inputKeyVals:g,outputKeyVals:E})},e.exports.checkKeyBuffer=a,e.exports.psbtFromKeyVals=u}),O("7H7c4",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0});var r=x("qpq9i"),n=x("2M3mP"),i=x("9CSLb"),o=x("bHI13"),s=x("gsMQz"),a=x("fmNoO"),u=x("9vZgw"),p=x("ckVfp"),l=x("eOKUK"),f=x("bn4w6"),c=x("gJHsk"),h=x("gOgEP"),d=x("fvNw3"),y=x("eweRk"),g=x("jO9dJ"),E=x("7YFpq"),m=x("iVrTH"),v=x("62Nv9"),b=x("3RTes"),w=x("1Ya0J"),I=x("kSfZv");let S={unsignedTx:i,globalXpub:n,checkPubkey:m.makeChecker([])};e.exports.globals=S;let T={nonWitnessUtxo:a,partialSig:u,sighashType:l,finalScriptSig:o,finalScriptWitness:s,porCommitment:p,witnessUtxo:y,bip32Derivation:E.makeConverter(r.InputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(r.InputTypes.REDEEM_SCRIPT),witnessScript:I.makeConverter(r.InputTypes.WITNESS_SCRIPT),checkPubkey:m.makeChecker([r.InputTypes.PARTIAL_SIG,r.InputTypes.BIP32_DERIVATION]),tapKeySig:f,tapScriptSig:d,tapLeafScript:c,tapBip32Derivation:b.makeConverter(r.InputTypes.TAP_BIP32_DERIVATION),tapInternalKey:w.makeConverter(r.InputTypes.TAP_INTERNAL_KEY),tapMerkleRoot:h};e.exports.inputs=T;let _={bip32Derivation:E.makeConverter(r.OutputTypes.BIP32_DERIVATION),redeemScript:v.makeConverter(r.OutputTypes.REDEEM_SCRIPT),witnessScript:I.makeConverter(r.OutputTypes.WITNESS_SCRIPT),checkPubkey:m.makeChecker([r.OutputTypes.BIP32_DERIVATION]),tapBip32Derivation:b.makeConverter(r.OutputTypes.TAP_BIP32_DERIVATION),tapTree:g,tapInternalKey:w.makeConverter(r.OutputTypes.TAP_INTERNAL_KEY)};e.exports.outputs=_}),O("qpq9i",function(e,t){var r,n,i;Object.defineProperty(e.exports,"__esModule",{value:!0}),(r=e.exports.GlobalTypes||(e.exports.GlobalTypes={}))[r.UNSIGNED_TX=0]="UNSIGNED_TX",r[r.GLOBAL_XPUB=1]="GLOBAL_XPUB",e.exports.GLOBAL_TYPE_NAMES=["unsignedTx","globalXpub"],(n=e.exports.InputTypes||(e.exports.InputTypes={}))[n.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",n[n.WITNESS_UTXO=1]="WITNESS_UTXO",n[n.PARTIAL_SIG=2]="PARTIAL_SIG",n[n.SIGHASH_TYPE=3]="SIGHASH_TYPE",n[n.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",n[n.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",n[n.BIP32_DERIVATION=6]="BIP32_DERIVATION",n[n.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",n[n.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",n[n.POR_COMMITMENT=9]="POR_COMMITMENT",n[n.TAP_KEY_SIG=19]="TAP_KEY_SIG",n[n.TAP_SCRIPT_SIG=20]="TAP_SCRIPT_SIG",n[n.TAP_LEAF_SCRIPT=21]="TAP_LEAF_SCRIPT",n[n.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",n[n.TAP_INTERNAL_KEY=23]="TAP_INTERNAL_KEY",n[n.TAP_MERKLE_ROOT=24]="TAP_MERKLE_ROOT",e.exports.INPUT_TYPE_NAMES=["nonWitnessUtxo","witnessUtxo","partialSig","sighashType","redeemScript","witnessScript","bip32Derivation","finalScriptSig","finalScriptWitness","porCommitment","tapKeySig","tapScriptSig","tapLeafScript","tapBip32Derivation","tapInternalKey","tapMerkleRoot"],(i=e.exports.OutputTypes||(e.exports.OutputTypes={}))[i.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",i[i.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",i[i.BIP32_DERIVATION=2]="BIP32_DERIVATION",i[i.TAP_INTERNAL_KEY=5]="TAP_INTERNAL_KEY",i[i.TAP_TREE=6]="TAP_TREE",i[i.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION",e.exports.OUTPUT_TYPE_NAMES=["redeemScript","witnessScript","bip32Derivation","tapInternalKey","tapTree","tapBip32Derivation"]}),O("2M3mP",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");let i=e=>[...Array(e).keys()];e.exports.decode=function(e){if(e.key[0]!==n.GlobalTypes.GLOBAL_XPUB)throw Error("Decode Error: could not decode globalXpub with key 0x"+e.key.toString("hex"));if(79!==e.key.length||![2,3].includes(e.key[46]))throw Error("Decode Error: globalXpub has invalid extended pubkey in key 0x"+e.key.toString("hex"));if(e.value.length/4%1!=0)throw Error("Decode Error: Global GLOBAL_XPUB value length should be multiple of 4");let t=e.key.slice(1),r={masterFingerprint:e.value.slice(0,4),extendedPubkey:t,path:"m"};for(let t of i(e.value.length/4-1)){let n=e.value.readUInt32LE(4*t+4),i=!!(2147483648&n),o=2147483647&n;r.path+="/"+o.toString(10)+(i?"'":"")}return r},e.exports.encode=function(e){let t=r.from([n.GlobalTypes.GLOBAL_XPUB]),i=r.concat([t,e.extendedPubkey]),o=e.path.split("/"),s=r.allocUnsafe(4*o.length);e.masterFingerprint.copy(s,0);let a=4;return o.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4}),{key:i,value:s}},e.exports.expected="{ masterFingerprint: Buffer; extendedPubkey: Buffer; path: string; }",e.exports.check=function(e){let t=e.extendedPubkey,n=e.masterFingerprint,i=e.path;return r.isBuffer(t)&&78===t.length&&[2,3].indexOf(t[45])>-1&&r.isBuffer(n)&&4===n.length&&"string"==typeof i&&!!i.match(/^m(\/\d+'?)*$/)},e.exports.canAddToArray=function(e,t,r){let n=t.extendedPubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.extendedPubkey.equals(t.extendedPubkey)).length)}}),O("9CSLb",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.encode=function(e){return{key:r.from([n.GlobalTypes.UNSIGNED_TX]),value:e.toBuffer()}}}),O("bHI13",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTSIG)throw Error("Decode Error: could not decode finalScriptSig with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.FINAL_SCRIPTSIG]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptSig}}),O("gsMQz",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.FINAL_SCRIPTWITNESS)throw Error("Decode Error: could not decode finalScriptWitness with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.FINAL_SCRIPTWITNESS]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.finalScriptWitness}}),O("fmNoO",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.NON_WITNESS_UTXO)throw Error("Decode Error: could not decode nonWitnessUtxo with key 0x"+e.key.toString("hex"));return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.NON_WITNESS_UTXO]),value:e}},e.exports.expected="Buffer",e.exports.check=function(e){return r.isBuffer(e)},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.nonWitnessUtxo}}),O("9vZgw",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.PARTIAL_SIG)throw Error("Decode Error: could not decode partialSig with key 0x"+e.key.toString("hex"));if(!(34===e.key.length||66===e.key.length)||![2,3,4].includes(e.key[1]))throw Error("Decode Error: partialSig has invalid pubkey in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1),signature:e.value}},e.exports.encode=function(e){let t=r.from([n.InputTypes.PARTIAL_SIG]);return{key:r.concat([t,e.pubkey]),value:e.signature}},e.exports.expected="{ pubkey: Buffer; signature: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.signature)&&[33,65].includes(e.pubkey.length)&&[2,3,4].includes(e.pubkey[0])&&function(e){if(!r.isBuffer(e)||e.length<9||48!==e[0]||e.length!==e[1]+3||2!==e[2])return!1;let t=e[3];if(t>33||t<1||2!==e[3+t+1])return!1;let n=e[3+t+2];return!(n>33)&&!(n<1)&&e.length===3+t+2+n+2}(e.signature)},e.exports.canAddToArray=function(e,t,r){let n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)).length)}}),O("ckVfp",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.POR_COMMITMENT)throw Error("Decode Error: could not decode porCommitment with key 0x"+e.key.toString("hex"));return e.value.toString("utf8")},e.exports.encode=function(e){return{key:r.from([n.InputTypes.POR_COMMITMENT]),value:r.from(e,"utf8")}},e.exports.expected="string",e.exports.check=function(e){return"string"==typeof e},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.porCommitment}}),O("eOKUK",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.SIGHASH_TYPE)throw Error("Decode Error: could not decode sighashType with key 0x"+e.key.toString("hex"));return e.value.readUInt32LE(0)},e.exports.encode=function(e){let t=r.from([n.InputTypes.SIGHASH_TYPE]),i=r.allocUnsafe(4);return i.writeUInt32LE(e,0),{key:t,value:i}},e.exports.expected="number",e.exports.check=function(e){return"number"==typeof e},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.sighashType}}),O("bn4w6",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");function i(e){return r.isBuffer(e)&&(64===e.length||65===e.length)}e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_KEY_SIG||1!==e.key.length)throw Error("Decode Error: could not decode tapKeySig with key 0x"+e.key.toString("hex"));if(!i(e.value))throw Error("Decode Error: tapKeySig not a valid 64-65-byte BIP340 signature");return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.TAP_KEY_SIG]),value:e}},e.exports.expected="Buffer",e.exports.check=i,e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapKeySig}}),O("gJHsk",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_LEAF_SCRIPT)throw Error("Decode Error: could not decode tapLeafScript with key 0x"+e.key.toString("hex"));if((e.key.length-2)%32!=0)throw Error("Decode Error: tapLeafScript has invalid control block in key 0x"+e.key.toString("hex"));let t=e.value[e.value.length-1];if((254&e.key[1])!==t)throw Error("Decode Error: tapLeafScript bad leaf version in key 0x"+e.key.toString("hex"));let r=e.value.slice(0,-1);return{controlBlock:e.key.slice(1),script:r,leafVersion:t}},e.exports.encode=function(e){let t=r.from([n.InputTypes.TAP_LEAF_SCRIPT]),i=r.from([e.leafVersion]);return{key:r.concat([t,e.controlBlock]),value:r.concat([e.script,i])}},e.exports.expected="{ controlBlock: Buffer; leafVersion: number, script: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.controlBlock)&&(e.controlBlock.length-1)%32==0&&(254&e.controlBlock[0])===e.leafVersion&&r.isBuffer(e.script)},e.exports.canAddToArray=function(e,t,r){let n=t.controlBlock.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.controlBlock.equals(t.controlBlock)).length)}}),O("gOgEP",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");function i(e){return r.isBuffer(e)&&32===e.length}e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_MERKLE_ROOT||1!==e.key.length)throw Error("Decode Error: could not decode tapMerkleRoot with key 0x"+e.key.toString("hex"));if(!i(e.value))throw Error("Decode Error: tapMerkleRoot not a 32-byte hash");return e.value},e.exports.encode=function(e){return{key:r.from([n.InputTypes.TAP_MERKLE_ROOT]),value:e}},e.exports.expected="Buffer",e.exports.check=i,e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapMerkleRoot}}),O("fvNw3",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.TAP_SCRIPT_SIG)throw Error("Decode Error: could not decode tapScriptSig with key 0x"+e.key.toString("hex"));if(65!==e.key.length)throw Error("Decode Error: tapScriptSig has invalid key 0x"+e.key.toString("hex"));if(64!==e.value.length&&65!==e.value.length)throw Error("Decode Error: tapScriptSig has invalid signature in key 0x"+e.key.toString("hex"));return{pubkey:e.key.slice(1,33),leafHash:e.key.slice(33),signature:e.value}},e.exports.encode=function(e){let t=r.from([n.InputTypes.TAP_SCRIPT_SIG]);return{key:r.concat([t,e.pubkey,e.leafHash]),value:e.signature}},e.exports.expected="{ pubkey: Buffer; leafHash: Buffer; signature: Buffer; }",e.exports.check=function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.leafHash)&&r.isBuffer(e.signature)&&32===e.pubkey.length&&32===e.leafHash.length&&(64===e.signature.length||65===e.signature.length)},e.exports.canAddToArray=function(e,t,r){let n=t.pubkey.toString("hex")+t.leafHash.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)&&e.leafHash.equals(t.leafHash)).length)}}),O("eweRk",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i"),i=x("3cFg7"),o=x("gjBY1");e.exports.decode=function(e){if(e.key[0]!==n.InputTypes.WITNESS_UTXO)throw Error("Decode Error: could not decode witnessUtxo with key 0x"+e.key.toString("hex"));let t=i.readUInt64LE(e.value,0),r=8,s=o.decode(e.value,r);r+=o.encodingLength(s);let a=e.value.slice(r);if(a.length!==s)throw Error("Decode Error: WITNESS_UTXO script is not proper length");return{script:a,value:t}},e.exports.encode=function(e){let{script:t,value:s}=e,a=o.encodingLength(t.length),u=r.allocUnsafe(8+a+t.length);return i.writeUInt64LE(u,s,0),o.encode(t.length,u,8),t.copy(u,8+a),{key:r.from([n.InputTypes.WITNESS_UTXO]),value:u}},e.exports.expected="{ script: Buffer; value: number; }",e.exports.check=function(e){return r.isBuffer(e.script)&&"number"==typeof e.value},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.witnessUtxo}}),O("3cFg7",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("gjBY1");function i(e){let t=e.key.length,i=e.value.length,o=n.encodingLength(t),s=n.encodingLength(i),a=r.allocUnsafe(o+t+s+i);return n.encode(t,a,0),e.key.copy(a,o),n.encode(i,a,o+t),e.value.copy(a,o+t+s),a}function o(e,t){if("number"!=typeof e)throw Error("cannot write a non-number as a number");if(e<0)throw Error("specified a negative value for writing an unsigned value");if(e>t)throw Error("RangeError: value out of range");if(Math.floor(e)!==e)throw Error("value has a fractional component")}e.exports.range=e=>[...Array(e).keys()],e.exports.reverseBuffer=function(e){if(e.length<1)return e;let t=e.length-1,r=0;for(let n=0;n<e.length/2;n++)r=e[n],e[n]=e[t],e[t]=r,t--;return e},e.exports.keyValsToBuffer=function(e){let t=e.map(i);return t.push(r.from([0])),r.concat(t)},e.exports.keyValToBuffer=i,e.exports.readUInt64LE=function(e,t){let r=e.readUInt32LE(t),n=e.readUInt32LE(t+4);return o((n*=4294967296)+r,9007199254740991),n+r},e.exports.writeUInt64LE=function(e,t,r){return o(t,9007199254740991),e.writeInt32LE(-1&t,r),e.writeUInt32LE(Math.floor(t/4294967296),r+4),r+8}}),O("gjBY1",function(e,t){var r=x("6ZWSX").Buffer;function n(e){if(e<0||e>9007199254740991||e%1!=0)throw RangeError("value out of range")}function i(e){return n(e),e<253?1:e<=65535?3:e<=4294967295?5:9}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.encode=function e(t,o,s){if(n(t),o||(o=r.allocUnsafe(i(t))),!r.isBuffer(o))throw TypeError("buffer must be a Buffer instance");return s||(s=0),t<253?(o.writeUInt8(t,s),Object.assign(e,{bytes:1})):t<=65535?(o.writeUInt8(253,s),o.writeUInt16LE(t,s+1),Object.assign(e,{bytes:3})):t<=4294967295?(o.writeUInt8(254,s),o.writeUInt32LE(t,s+1),Object.assign(e,{bytes:5})):(o.writeUInt8(255,s),o.writeUInt32LE(t>>>0,s+1),o.writeUInt32LE(t/4294967296|0,s+5),Object.assign(e,{bytes:9})),o},e.exports.decode=function e(t,i){if(!r.isBuffer(t))throw TypeError("buffer must be a Buffer instance");i||(i=0);let o=t.readUInt8(i);if(o<253)return Object.assign(e,{bytes:1}),o;if(253===o)return Object.assign(e,{bytes:3}),t.readUInt16LE(i+1);if(254===o)return Object.assign(e,{bytes:5}),t.readUInt32LE(i+1);{Object.assign(e,{bytes:9});let r=t.readUInt32LE(i+1),o=4294967296*t.readUInt32LE(i+5)+r;return n(o),o}},e.exports.encodingLength=i}),O("jO9dJ",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("qpq9i"),i=x("gjBY1");e.exports.decode=function(e){if(e.key[0]!==n.OutputTypes.TAP_TREE||1!==e.key.length)throw Error("Decode Error: could not decode tapTree with key 0x"+e.key.toString("hex"));let t=0,r=[];for(;t<e.value.length;){let n=e.value[t++],o=e.value[t++],s=i.decode(e.value,t);t+=i.encodingLength(s),r.push({depth:n,leafVersion:o,script:e.value.slice(t,t+s)}),t+=s}return{leaves:r}},e.exports.encode=function(e){let t=r.from([n.OutputTypes.TAP_TREE]),o=[].concat(...e.leaves.map(e=>[r.of(e.depth,e.leafVersion),i.encode(e.script.length),e.script]));return{key:t,value:r.concat(o)}},e.exports.expected="{ leaves: [{ depth: number; leafVersion: number, script: Buffer; }] }",e.exports.check=function(e){return Array.isArray(e.leaves)&&e.leaves.every(e=>e.depth>=0&&e.depth<=128&&(254&e.leafVersion)===e.leafVersion&&r.isBuffer(e.script))},e.exports.canAdd=function(e,t){return!!e&&!!t&&void 0===e.tapTree}}),O("7YFpq",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});let n=e=>[...Array(e).keys()],i=e=>33===e.length&&[2,3].includes(e[0])||65===e.length&&4===e[0];e.exports.makeConverter=function(e,t=i){return{decode:function(r){if(r.key[0]!==e)throw Error("Decode Error: could not decode bip32Derivation with key 0x"+r.key.toString("hex"));let i=r.key.slice(1);if(!t(i))throw Error("Decode Error: bip32Derivation has invalid pubkey in key 0x"+r.key.toString("hex"));if(r.value.length/4%1!=0)throw Error("Decode Error: Input BIP32_DERIVATION value length should be multiple of 4");let o={masterFingerprint:r.value.slice(0,4),pubkey:i,path:"m"};for(let e of n(r.value.length/4-1)){let t=r.value.readUInt32LE(4*e+4),n=!!(2147483648&t),i=2147483647&t;o.path+="/"+i.toString(10)+(n?"'":"")}return o},encode:function(t){let n=r.from([e]),i=r.concat([n,t.pubkey]),o=t.path.split("/"),s=r.allocUnsafe(4*o.length);t.masterFingerprint.copy(s,0);let a=4;return o.slice(1).forEach(e=>{let t="'"===e.slice(-1),r=2147483647&parseInt(t?e.slice(0,-1):e,10);t&&(r+=2147483648),s.writeUInt32LE(r,a),a+=4}),{key:i,value:s}},check:function(e){return r.isBuffer(e.pubkey)&&r.isBuffer(e.masterFingerprint)&&"string"==typeof e.path&&t(e.pubkey)&&4===e.masterFingerprint.length},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; }",canAddToArray:function(e,t,r){let n=t.pubkey.toString("hex");return!r.has(n)&&(r.add(n),0===e.filter(e=>e.pubkey.equals(t.pubkey)).length)}}}}),O("iVrTH",function(e,t){Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeChecker=function(e){return function(t){let r;if(e.includes(t.key[0])&&(!(33===(r=t.key.slice(1)).length||65===r.length)||![2,3,4].includes(r[0])))throw Error("Format Error: invalid pubkey in key 0x"+t.key.toString("hex"));return r}}}),O("62Nv9",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode redeemScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.redeemScript}}}}),O("3RTes",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("gjBY1"),i=x("7YFpq");let o=e=>32===e.length;e.exports.makeConverter=function(e){let t=i.makeConverter(e,o);return{decode:function(e){let r=n.decode(e.value),i=n.encodingLength(r),o=t.decode({key:e.key,value:e.value.slice(i+32*r)}),s=Array(r);for(let t=0,n=i;t<r;t++,n+=32)s[t]=e.value.slice(n,n+32);return Object.assign({},o,{leafHashes:s})},encode:function(e){let i=t.encode(e),o=n.encodingLength(e.leafHashes.length),s=r.allocUnsafe(o);n.encode(e.leafHashes.length,s);let a=r.concat([s,...e.leafHashes,i.value]);return Object.assign({},i,{value:a})},check:function(e){return Array.isArray(e.leafHashes)&&e.leafHashes.every(e=>r.isBuffer(e)&&32===e.length)&&t.check(e)},expected:"{ masterFingerprint: Buffer; pubkey: Buffer; path: string; leafHashes: Buffer[]; }",canAddToArray:t.canAddToArray}}}),O("1Ya0J",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e||1!==t.key.length)throw Error("Decode Error: could not decode tapInternalKey with key 0x"+t.key.toString("hex"));if(32!==t.value.length)throw Error("Decode Error: tapInternalKey not a 32-byte x-only pubkey");return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)&&32===e.length},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.tapInternalKey}}}}),O("kSfZv",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.makeConverter=function(e){return{decode:function(t){if(t.key[0]!==e)throw Error("Decode Error: could not decode witnessScript with key 0x"+t.key.toString("hex"));return t.value},encode:function(t){return{key:r.from([e]),value:t}},check:function(e){return r.isBuffer(e)},expected:"Buffer",canAdd:function(e,t){return!!e&&!!t&&void 0===e.witnessScript}}}}),O("iWOny",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("7H7c4"),i=x("3cFg7");e.exports.psbtToBuffer=function({globalMap:e,inputs:t,outputs:n}){let{globalKeyVals:o,inputKeyVals:s,outputKeyVals:u}=a({globalMap:e,inputs:t,outputs:n}),p=i.keyValsToBuffer(o),l=e=>0===e.length?[r.from([0])]:e.map(i.keyValsToBuffer),f=l(s),c=l(u),h=r.allocUnsafe(5);return h.writeUIntBE(482972169471,0,5),r.concat([h,p].concat(f,c))};let o=(e,t)=>e.key.compare(t.key);function s(e,t){let r=new Set,n=Object.entries(e).reduce((e,[n,i])=>{if("unknownKeyVals"===n)return e;let o=t[n];if(void 0===o)return e;let s=(Array.isArray(i)?i:[i]).map(o.encode);return s.map(e=>e.key.toString("hex")).forEach(e=>{if(r.has(e))throw Error("Serialize Error: Duplicate key: "+e);r.add(e)}),e.concat(s)},[]),i=e.unknownKeyVals?e.unknownKeyVals.filter(e=>!r.has(e.key.toString("hex"))):[];return n.concat(i).sort(o)}function a({globalMap:e,inputs:t,outputs:r}){return{globalKeyVals:s(e,n.globals),inputKeyVals:t.map(e=>s(e,n.inputs)),outputKeyVals:r.map(e=>s(e,n.outputs))}}e.exports.psbtToKeyVals=a}),O("geRUU",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0});var n=x("7H7c4");function i(e,t){let r=e[t];if(void 0===r)throw Error(`No input #${t}`);return r}function o(e,t){let r=e[t];if(void 0===r)throw Error(`No output #${t}`);return r}function s(e,t,r,n){throw Error(`Data for ${e} key ${t} is incorrect: Expected ${r} and got ${JSON.stringify(n)}`)}function a(e){return(t,r)=>{for(let i of Object.keys(t)){let o=t[i],{canAdd:a,canAddToArray:u,check:p,expected:l}=n[e+"s"][i]||{},f=!!u;if(p){if(f){if(!Array.isArray(o)||r[i]&&!Array.isArray(r[i]))throw Error(`Key type ${i} must be an array`);o.every(p)||s(e,i,l,o);let t=r[i]||[],n=new Set;if(!o.every(e=>u(t,e,n)))throw Error("Can not add duplicate data to array");r[i]=t.concat(o)}else{if(p(o)||s(e,i,l,o),!a(r,o))throw Error(`Can not add duplicate data to ${e}`);r[i]=o}}}}}e.exports.checkForInput=i,e.exports.checkForOutput=o,e.exports.checkHasKey=function(e,t,r){if(e.key[0]<r)throw Error("Use the method for your specific key instead of addUnknownKeyVal*");if(t&&0!==t.filter(t=>t.key.equals(e.key)).length)throw Error(`Duplicate Key: ${e.key.toString("hex")}`)},e.exports.getEnumLength=function(e){let t=0;return Object.keys(e).forEach(e=>{Number(isNaN(Number(e)))&&t++}),t},e.exports.inputCheckUncleanFinalized=function(e,t){let r=!1;if(t.nonWitnessUtxo||t.witnessUtxo){let e=!!t.redeemScript,n=!!t.witnessScript,i=!e||!!t.finalScriptSig,o=!n||!!t.finalScriptWitness,s=!!t.finalScriptSig||!!t.finalScriptWitness;r=i&&o&&s}if(!1===r)throw Error(`Input #${e} has too much or too little data to clean`)},e.exports.updateGlobal=a("global"),e.exports.updateInput=a("input"),e.exports.updateOutput=a("output"),e.exports.addInputAttributes=function(t,r){let n=t.length-1,o=i(t,n);e.exports.updateInput(r,o)},e.exports.addOutputAttributes=function(t,r){let n=t.length-1,i=o(t,n);e.exports.updateOutput(r,i)},e.exports.defaultVersionSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw Error("Set Version: Invalid Transaction");return t.writeUInt32LE(e,0),t},e.exports.defaultLocktimeSetter=function(e,t){if(!r.isBuffer(t)||t.length<4)throw Error("Set Locktime: Invalid Transaction");return t.writeUInt32LE(e,t.length-4),t}}),O("7rkx8",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.checkTaprootInputForSigs=e.exports.tapTreeFromList=e.exports.tapTreeToList=e.exports.tweakInternalPubKey=e.exports.checkTaprootOutputFields=e.exports.checkTaprootInputFields=e.exports.isTaprootOutput=e.exports.isTaprootInput=e.exports.serializeTaprootSignature=e.exports.tapScriptFinalizer=e.exports.toXOnly=void 0;var n=x("18Mz5"),i=x("gMJcK"),o=x("9txdn"),s=x("lzIk8"),a=x("j87lX"),o=x("9txdn");function u(e){return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||e.witnessUtxo&&(0,o.isP2TR)(e.witnessUtxo.script))}function p(e,t){return e&&!!(e.tapInternalKey||e.tapTree||e.tapBip32Derivation&&e.tapBip32Derivation.length||t&&(0,o.isP2TR)(t))}function l(e=[]){return 1===e.length&&0===e[0].depth?{output:e[0].script,version:e[0].leafVersion}:function(e){let t;for(let r of e)if(!(t=function e(t,r,i=0){if(i>s.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");if(t.depth===i)return r?void 0:{output:t.script,version:t.leafVersion};if((0,n.isTapleaf)(r))return;let o=e(t,r&&r[0],i+1);if(o)return[o,r&&r[1]];let a=e(t,r&&r[1],i+1);if(a)return[r&&r[0],a]}(r,t)))throw Error("No room left to insert tapleaf in tree");return t}(e)}function f(e){return{signature:e.slice(0,64),hashType:e.slice(64)[0]||i.Transaction.SIGHASH_DEFAULT}}function c(e,t){if(!t)return!0;let r=(0,s.tapleafHash)({output:e.script,version:e.leafVersion});return(0,s.rootHashFromPath)(e.controlBlock,r).equals(t)}function h(e){return e&&!!(e.redeemScript||e.witnessScript||e.bip32Derivation&&e.bip32Derivation.length)}e.exports.toXOnly=e=>32===e.length?e:e.slice(1,33),e.exports.tapScriptFinalizer=function(e,t,r){let n=function(e,t,r){if(!e.tapScriptSig||!e.tapScriptSig.length)throw Error(`Can not finalize taproot input #${t}. No tapleaf script signature provided.`);let n=(e.tapLeafScript||[]).sort((e,t)=>e.controlBlock.length-t.controlBlock.length).find(t=>(function(e,t,r){let n=(0,s.tapleafHash)({output:e.script,version:e.leafVersion});return(!r||r.equals(n))&&void 0!==t.find(e=>e.leafHash.equals(n))})(t,e.tapScriptSig,r));if(!n)throw Error(`Can not finalize taproot input #${t}. Signature for tapleaf script not found.`);return n}(t,e,r);try{let e=(function(e,t){let r=(0,s.tapleafHash)({output:t.script,version:t.leafVersion});return(e.tapScriptSig||[]).filter(e=>e.leafHash.equals(r)).map(e=>{var r;return r=t.script,Object.assign({positionInScript:(0,o.pubkeyPositionInScript)(e.pubkey,r)},e)}).sort((e,t)=>t.positionInScript-e.positionInScript).map(e=>e.signature)})(t,n).concat(n.script).concat(n.controlBlock);return{finalScriptWitness:(0,o.witnessStackToScriptWitness)(e)}}catch(t){throw Error(`Can not finalize taproot input #${e}: ${t}`)}},e.exports.serializeTaprootSignature=function(e,t){let n=t?r.from([t]):r.from([]);return r.concat([e,n])},e.exports.isTaprootInput=u,e.exports.isTaprootOutput=p,e.exports.checkTaprootInputFields=function(e,t,r){(function(e,t,r){let n=u(e)&&h(t),i=h(e)&&u(t),o=e===t&&u(t)&&h(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)})(e,t,r),function(e,t,r){if(t.tapMerkleRoot){let n=(t.tapLeafScript||[]).every(e=>c(e,t.tapMerkleRoot)),i=(e.tapLeafScript||[]).every(e=>c(e,t.tapMerkleRoot));if(!n||!i)throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}else if(e.tapMerkleRoot&&!(t.tapLeafScript||[]).every(t=>c(t,e.tapMerkleRoot)))throw Error(`Invalid arguments for Psbt.${r}. Tapleaf not part of taptree.`)}(e,t,r)},e.exports.checkTaprootOutputFields=function(e,t,r){(function(e,t,r){let n=p(e)&&h(t),i=h(e)&&p(t),o=e===t&&p(t)&&h(t);if(n||i||o)throw Error(`Invalid arguments for Psbt.${r}. Cannot use both taproot and non-taproot fields.`)})(e,t,r),function(e,t){if(!t.tapTree&&!t.tapInternalKey)return;let r=t.tapInternalKey||e.tapInternalKey,n=t.tapTree||e.tapTree;if(r){let{script:t}=e,i=function(e,t){let r=t&&l(t.leaves),{output:n}=(0,a.p2tr)({internalPubkey:e,scriptTree:r});return n}(r,n);if(t&&!t.equals(i))throw Error("Error adding output. Script or address missmatch.")}}(e,t)},e.exports.tweakInternalPubKey=function(e,t){let r=t.tapInternalKey,n=r&&(0,s.tweakKey)(r,t.tapMerkleRoot);if(!n)throw Error(`Cannot tweak tap internal key for input #${e}. Public key: ${r&&r.toString("hex")}`);return n.x},e.exports.tapTreeToList=function(e){if(!(0,n.isTaptree)(e))throw Error("Cannot convert taptree to tapleaf list. Expecting a tapree structure.");return function e(t,r=[],i=0){if(i>s.MAX_TAPTREE_DEPTH)throw Error("Max taptree depth exceeded.");return t?((0,n.isTapleaf)(t)?r.push({depth:i,leafVersion:t.version||s.LEAF_VERSION_TAPSCRIPT,script:t.output}):(t[0]&&e(t[0],r,i+1),t[1]&&e(t[1],r,i+1)),r):[]}(e)},e.exports.tapTreeFromList=l,e.exports.checkTaprootInputForSigs=function(e,t){return(function(e){let t=[];if(e.tapKeySig&&t.push(e.tapKeySig),e.tapScriptSig&&t.push(...e.tapScriptSig.map(e=>e.signature)),!t.length){let r=function(e){if(!e)return;let t=e.slice(2);if(64===t.length||65===t.length)return t}(e.finalScriptWitness);r&&t.push(r)}return t})(e).some(e=>(0,o.signatureBlocksAction)(e,f,t))}}),O("9txdn",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.signatureBlocksAction=e.exports.checkInputForSig=e.exports.pubkeyInScript=e.exports.pubkeyPositionInScript=e.exports.witnessStackToScriptWitness=e.exports.isP2TR=e.exports.isP2SHScript=e.exports.isP2WSHScript=e.exports.isP2WPKH=e.exports.isP2PKH=e.exports.isP2PK=e.exports.isP2MS=void 0;var n=x("gjBY1"),i=x("8wAtk"),o=x("gMJcK"),s=x("lgTFk"),a=x("j87lX");function u(e){return t=>{try{return e({output:t}),!0}catch(e){return!1}}}function p(e,t){let r=(0,s.hash160)(e),n=e.slice(1,33),o=i.decompile(t);if(null===o)throw Error("Unknown script error");return o.findIndex(t=>"number"!=typeof t&&(t.equals(e)||t.equals(r)||t.equals(n)))}function l(e,t,r){let{hashType:n}=t(e),i=[];switch(n&o.Transaction.SIGHASH_ANYONECANPAY&&i.push("addInput"),31&n){case o.Transaction.SIGHASH_ALL:break;case o.Transaction.SIGHASH_SINGLE:case o.Transaction.SIGHASH_NONE:i.push("addOutput"),i.push("setInputSequence")}return -1===i.indexOf(r)}e.exports.isP2MS=u(a.p2ms),e.exports.isP2PK=u(a.p2pk),e.exports.isP2PKH=u(a.p2pkh),e.exports.isP2WPKH=u(a.p2wpkh),e.exports.isP2WSHScript=u(a.p2wsh),e.exports.isP2SHScript=u(a.p2sh),e.exports.isP2TR=u(a.p2tr),e.exports.witnessStackToScriptWitness=function(e){let t=r.allocUnsafe(0);function i(e){let i=t.length,o=n.encodingLength(e);t=r.concat([t,r.allocUnsafe(o)]),n.encode(e,t,i)}return i(e.length),e.forEach(function(e){i(e.length),t=r.concat([t,r.from(e)])}),t},e.exports.pubkeyPositionInScript=p,e.exports.pubkeyInScript=function(e,t){return -1!==p(e,t)},e.exports.checkInputForSig=function(e,t){return(function(e){let t=[];if(0===(e.partialSig||[]).length){if(!e.finalScriptSig&&!e.finalScriptWitness)return[];t=function(e){let t=e.finalScriptSig&&i.decompile(e.finalScriptSig)||[],n=e.finalScriptWitness&&i.decompile(e.finalScriptWitness)||[];return t.concat(n).filter(e=>r.isBuffer(e)&&i.isCanonicalScriptSignature(e)).map(e=>({signature:e}))}(e)}else t=e.partialSig;return t.map(e=>e.signature)})(e).some(e=>l(e,i.signature.decode,t))},e.exports.signatureBlocksAction=l}),O("8rRzQ",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.BufferReader=e.exports.BufferWriter=e.exports.unsafeFrom64bitLE=e.exports.unsafeTo64bitLE=void 0;var n=x("8GOLq");function i(e){if(e>Number.MAX_SAFE_INTEGER)throw Error("Can't convert numbers > MAX_SAFE_INT");let t=r.alloc(8,0);for(let r=0;r<t.length;r++){let n=255&e;t[r]=n,e=(e-n)/256}return t}function o(e){let t=0;if(8!=e.length)throw Error("Expected Bufffer of lenght 8");if(0!=e[7]||e[6]>31)throw Error("Can't encode numbers > MAX_SAFE_INT");for(let r=e.length-1;r>=0;r--)t=256*t+e[r];return t}e.exports.unsafeTo64bitLE=i,e.exports.unsafeFrom64bitLE=o,e.exports.BufferWriter=class{constructor(){this.bufs=[]}write(e,t){let n=r.alloc(e);t(n),this.bufs.push(n)}writeUInt8(e){this.write(1,t=>t.writeUInt8(e,0))}writeInt32(e){this.write(4,t=>t.writeInt32LE(e,0))}writeUInt32(e){this.write(4,t=>t.writeUInt32LE(e,0))}writeUInt64(e){let t=i(e);this.writeSlice(t)}writeVarInt(e){this.bufs.push((0,n.createVarint)(e))}writeSlice(e){this.bufs.push(r.from(e))}writeVarSlice(e){this.writeVarInt(e.length),this.writeSlice(e)}buffer(){return r.concat(this.bufs)}},e.exports.BufferReader=class{constructor(e,t=0){this.buffer=e,this.offset=t}available(){return this.buffer.length-this.offset}readUInt8(){let e=this.buffer.readUInt8(this.offset);return this.offset++,e}readInt32(){let e=this.buffer.readInt32LE(this.offset);return this.offset+=4,e}readUInt32(){let e=this.buffer.readUInt32LE(this.offset);return this.offset+=4,e}readUInt64(){return o(this.readSlice(8))}readVarInt(){let[e,t]=(0,n.parseVarint)(this.buffer,this.offset);return this.offset+=t,e}readSlice(e){if(this.buffer.length<this.offset+e)throw Error("Cannot read slice out of bounds");let t=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}readVarSlice(){let e=(0,n.sanitizeBigintToNumber)(this.readVarInt());return this.readSlice(e)}readVector(){let e=this.readVarInt(),t=[];for(let r=0;r<e;r++)t.push(this.readVarSlice());return t}}}),O("8GOLq",function(e,t){var r=x("6ZWSX").Buffer;function n(e){if(e<0)throw RangeError("Negative bigint is not a valid varint");if(e>Number.MAX_SAFE_INTEGER)throw RangeError("Too large for a Number");return Number(e)}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.createVarint=e.exports.parseVarint=e.exports.sanitizeBigintToNumber=void 0,e.exports.sanitizeBigintToNumber=n,e.exports.parseVarint=function(e,t){if(t<0)throw RangeError("Negative offset is invalid");if(void 0==e[t])throw Error("Buffer too small");if(e[t]<253)return[BigInt(e[t]),1];{let r;return r=253===e[t]?2:254===e[t]?4:8,[function(e,t,r){let n=BigInt(0);for(let i=0;i<r;i++){if(void 0==e[i+t])throw Error("Buffer too small");n+=BigInt(e[i+t])<<BigInt(8*i)}return n}(e,t+1,r),r+1]}},e.exports.createVarint=function(e){"number"==typeof e&&(e=n(e));let t=function(e){if("number"==typeof e&&(e=n(e)),e<BigInt(0))throw RangeError("Negative numbers are not supported");if(e>=BigInt(1)<<BigInt(64))throw RangeError("Too large for a Bitcoin-style varint");return e<BigInt(253)?1:e<=BigInt(65535)?3:e<=BigInt(4294967295)?5:9}(e);e=BigInt(e);let i=r.alloc(t);return 1==t?i[0]=Number(e):(3==t?i[0]=253:5===t?i[0]=254:i[0]=255,function(e,t,r,n){for(let n=0;n<t;n++){if(void 0==r[n+1])throw Error("Buffer too small");r[n+1]=Number(e%BigInt(256)),e>>=BigInt(8)}}(e,t-1,i,0)),i}}),O("goh0i",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.hashLeaf=e.exports.Merkle=void 0;var n=x("3wrUl");e.exports.Merkle=class{constructor(e,t=n.crypto.sha256){this.leaves=e,this.h=t;let r=this.calculateRoot(e);this.rootNode=r.root,this.leafNodes=r.leaves}getRoot(){return this.rootNode.hash}size(){return this.leaves.length}getLeaves(){return this.leaves}getLeafHash(e){return this.leafNodes[e].hash}getProof(e){if(e>=this.leaves.length)throw Error("Index out of bounds");return function e(t){if(!t.parent)return[];if(t.parent.leftChild==t){if(!t.parent.rightChild)throw Error("Expected right child to exist");return[t.parent.rightChild.hash,...e(t.parent)]}if(!t.parent.leftChild)throw Error("Expected left child to exist");return[t.parent.leftChild.hash,...e(t.parent)]}(this.leafNodes[e])}calculateRoot(e){let t=e.length;if(0==t)return{root:new i(void 0,void 0,r.alloc(32,0)),leaves:[]};if(1==t){let t=new i(void 0,void 0,e[0]);return{root:t,leaves:[t]}}let n=function(e){if(e<2)throw Error("Expected n >= 2");return(e&e-1)==0?e/2:1<<Math.floor(Math.log2(e))}(t),o=this.calculateRoot(e.slice(0,n)),s=this.calculateRoot(e.slice(n)),a=o.root,u=s.root,p=this.hashNode(a.hash,u.hash),l=new i(a,u,p);return a.parent=l,u.parent=l,{root:l,leaves:o.leaves.concat(s.leaves)}}hashNode(e,t){return this.h(r.concat([r.from([1]),e,t]))}},e.exports.hashLeaf=function(e,t=n.crypto.sha256){var i;return i=r.from([0]),t(r.concat([i,e]))};class i{constructor(e,t,r){this.leftChild=e,this.rightChild=t,this.hash=r}isLeaf(){return void 0==this.leftChild}}}),O("bUD38",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkelizedPsbt=void 0;var n=x("flljP"),i=x("fUsjC");class o extends i.PsbtV2{constructor(e){super(),this.inputMerkleMaps=[],this.outputMerkleMaps=[],e.copy(this),this.globalMerkleMap=o.createMerkleMap(this.globalMap);for(let e=0;e<this.getGlobalInputCount();e++)this.inputMerkleMaps.push(o.createMerkleMap(this.inputMaps[e]));this.inputMapCommitments=[...this.inputMerkleMaps.values()].map(e=>e.commitment());for(let e=0;e<this.getGlobalOutputCount();e++)this.outputMerkleMaps.push(o.createMerkleMap(this.outputMaps[e]));this.outputMapCommitments=[...this.outputMerkleMaps.values()].map(e=>e.commitment())}getGlobalSize(){return this.globalMap.size}getGlobalKeysValuesRoot(){return this.globalMerkleMap.commitment()}static createMerkleMap(e){let t=[...e.keys()].sort(),i=t.map(t=>{let r=e.get(t);if(!r)throw Error("No value for key "+t);return r}),o=t.map(e=>r.from(e,"hex"));return new n.MerkleMap(o,i)}}e.exports.MerkelizedPsbt=o}),O("flljP",function(e,t){var r=x("6ZWSX").Buffer;Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.MerkleMap=void 0;var n=x("goh0i"),i=x("8GOLq");e.exports.MerkleMap=class{constructor(e,t){if(e.length!=t.length)throw Error("keys and values should have the same length");for(let t=0;t<e.length-1;t++)if(e[t].toString("hex")>=e[t+1].toString("hex"))throw Error("keys must be in strictly increasing order");this.keys=e,this.keysTree=new n.Merkle(e.map(e=>(0,n.hashLeaf)(e))),this.values=t,this.valuesTree=new n.Merkle(t.map(e=>(0,n.hashLeaf)(e)))}commitment(){return r.concat([(0,i.createVarint)(this.keys.length),this.keysTree.getRoot(),this.valuesTree.getRoot()])}}}),O("fUsjC",function(e,t){var r,n,i,o,s,a,u=x("6ZWSX").Buffer,p=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),l=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),f=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&p(t,e,r);return l(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.PsbtV2=e.exports.NoSuchEntry=e.exports.psbtOut=e.exports.psbtIn=e.exports.psbtGlobal=void 0;let c=f(x("3wrUl"));var h=x("8rRzQ"),d=x("8GOLq");(o=r=e.exports.psbtGlobal||(e.exports.psbtGlobal={}))[o.UNSIGNED_TX=0]="UNSIGNED_TX",o[o.XPUB=1]="XPUB",o[o.TX_VERSION=2]="TX_VERSION",o[o.FALLBACK_LOCKTIME=3]="FALLBACK_LOCKTIME",o[o.INPUT_COUNT=4]="INPUT_COUNT",o[o.OUTPUT_COUNT=5]="OUTPUT_COUNT",o[o.TX_MODIFIABLE=6]="TX_MODIFIABLE",o[o.VERSION=251]="VERSION",(s=n=e.exports.psbtIn||(e.exports.psbtIn={}))[s.NON_WITNESS_UTXO=0]="NON_WITNESS_UTXO",s[s.WITNESS_UTXO=1]="WITNESS_UTXO",s[s.PARTIAL_SIG=2]="PARTIAL_SIG",s[s.SIGHASH_TYPE=3]="SIGHASH_TYPE",s[s.REDEEM_SCRIPT=4]="REDEEM_SCRIPT",s[s.WITNESS_SCRIPT=5]="WITNESS_SCRIPT",s[s.BIP32_DERIVATION=6]="BIP32_DERIVATION",s[s.FINAL_SCRIPTSIG=7]="FINAL_SCRIPTSIG",s[s.FINAL_SCRIPTWITNESS=8]="FINAL_SCRIPTWITNESS",s[s.PREVIOUS_TXID=14]="PREVIOUS_TXID",s[s.OUTPUT_INDEX=15]="OUTPUT_INDEX",s[s.SEQUENCE=16]="SEQUENCE",s[s.TAP_KEY_SIG=19]="TAP_KEY_SIG",s[s.TAP_BIP32_DERIVATION=22]="TAP_BIP32_DERIVATION",(a=i=e.exports.psbtOut||(e.exports.psbtOut={}))[a.REDEEM_SCRIPT=0]="REDEEM_SCRIPT",a[a.WITNESS_SCRIPT=1]="WITNESS_SCRIPT",a[a.BIP_32_DERIVATION=2]="BIP_32_DERIVATION",a[a.AMOUNT=3]="AMOUNT",a[a.SCRIPT=4]="SCRIPT",a[a.TAP_BIP32_DERIVATION=7]="TAP_BIP32_DERIVATION";let y=u.from([112,115,98,116,255]);class g extends Error{}function E(e,t,r,n){if(!e)throw Error("No such map");let i=new m(t,r),o=e.get(i.toString());if(!o){if(n)return;throw new g(i.toString())}return u.from(o)}e.exports.NoSuchEntry=g,e.exports.PsbtV2=class{constructor(){this.globalMap=new Map,this.inputMaps=[],this.outputMaps=[]}setGlobalTxVersion(e){this.setGlobal(r.TX_VERSION,S(e))}getGlobalTxVersion(){return this.getGlobal(r.TX_VERSION).readUInt32LE(0)}setGlobalFallbackLocktime(e){this.setGlobal(r.FALLBACK_LOCKTIME,S(e))}getGlobalFallbackLocktime(){var e;return null===(e=this.getGlobalOptional(r.FALLBACK_LOCKTIME))||void 0===e?void 0:e.readUInt32LE(0)}setGlobalInputCount(e){this.setGlobal(r.INPUT_COUNT,_(e))}getGlobalInputCount(){return O(this.getGlobal(r.INPUT_COUNT))}setGlobalOutputCount(e){this.setGlobal(r.OUTPUT_COUNT,_(e))}getGlobalOutputCount(){return O(this.getGlobal(r.OUTPUT_COUNT))}setGlobalTxModifiable(e){this.setGlobal(r.TX_MODIFIABLE,e)}getGlobalTxModifiable(){return this.getGlobalOptional(r.TX_MODIFIABLE)}setGlobalPsbtVersion(e){this.setGlobal(r.VERSION,S(e))}getGlobalPsbtVersion(){return this.getGlobal(r.VERSION).readUInt32LE(0)}setInputNonWitnessUtxo(e,t){this.setInput(e,n.NON_WITNESS_UTXO,w(),t)}getInputNonWitnessUtxo(e){return this.getInputOptional(e,n.NON_WITNESS_UTXO,w())}setInputWitnessUtxo(e,t,r){let i=new h.BufferWriter;i.writeSlice(T(t)),i.writeVarSlice(r),this.setInput(e,n.WITNESS_UTXO,w(),i.buffer())}getInputWitnessUtxo(e){let t=this.getInputOptional(e,n.WITNESS_UTXO,w());if(!t)return;let r=new h.BufferReader(t);return{amount:(0,h.unsafeFrom64bitLE)(r.readSlice(8)),scriptPubKey:r.readVarSlice()}}setInputPartialSig(e,t,r){this.setInput(e,n.PARTIAL_SIG,t,r)}getInputPartialSig(e,t){return this.getInputOptional(e,n.PARTIAL_SIG,t)}setInputSighashType(e,t){this.setInput(e,n.SIGHASH_TYPE,w(),S(t))}getInputSighashType(e){let t=this.getInputOptional(e,n.SIGHASH_TYPE,w());if(t)return t.readUInt32LE(0)}setInputRedeemScript(e,t){this.setInput(e,n.REDEEM_SCRIPT,w(),t)}getInputRedeemScript(e){return this.getInputOptional(e,n.REDEEM_SCRIPT,w())}setInputWitnessScript(e,t){this.setInput(e,n.WITNESS_SCRIPT,w(),t)}getInputWitnessScript(e){return this.getInputOptional(e,n.WITNESS_SCRIPT,w())}setInputBip32Derivation(e,t,r,i){if(33!=t.length)throw Error("Invalid pubkey length: "+t.length);this.setInput(e,n.BIP32_DERIVATION,t,this.encodeBip32Derivation(r,i))}getInputBip32Derivation(e,t){let r=this.getInputOptional(e,n.BIP32_DERIVATION,t);if(r)return this.decodeBip32Derivation(r)}setInputFinalScriptsig(e,t){this.setInput(e,n.FINAL_SCRIPTSIG,w(),t)}getInputFinalScriptsig(e){return this.getInputOptional(e,n.FINAL_SCRIPTSIG,w())}setInputFinalScriptwitness(e,t){this.setInput(e,n.FINAL_SCRIPTWITNESS,w(),t)}getInputFinalScriptwitness(e){return this.getInput(e,n.FINAL_SCRIPTWITNESS,w())}setInputPreviousTxId(e,t){this.setInput(e,n.PREVIOUS_TXID,w(),t)}getInputPreviousTxid(e){return this.getInput(e,n.PREVIOUS_TXID,w())}setInputOutputIndex(e,t){this.setInput(e,n.OUTPUT_INDEX,w(),S(t))}getInputOutputIndex(e){return this.getInput(e,n.OUTPUT_INDEX,w()).readUInt32LE(0)}setInputSequence(e,t){this.setInput(e,n.SEQUENCE,w(),S(t))}getInputSequence(e){var t,r;return null!==(r=null===(t=this.getInputOptional(e,n.SEQUENCE,w()))||void 0===t?void 0:t.readUInt32LE(0))&&void 0!==r?r:4294967295}setInputTapKeySig(e,t){this.setInput(e,n.TAP_KEY_SIG,w(),t)}getInputTapKeySig(e){return this.getInputOptional(e,n.TAP_KEY_SIG,w())}setInputTapBip32Derivation(e,t,r,i,o){if(32!=t.length)throw Error("Invalid pubkey length: "+t.length);let s=this.encodeTapBip32Derivation(r,i,o);this.setInput(e,n.TAP_BIP32_DERIVATION,t,s)}getInputTapBip32Derivation(e,t){let r=this.getInput(e,n.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(r)}getInputKeyDatas(e,t){return this.getKeyDatas(this.inputMaps[e],t)}setOutputRedeemScript(e,t){this.setOutput(e,i.REDEEM_SCRIPT,w(),t)}getOutputRedeemScript(e){return this.getOutput(e,i.REDEEM_SCRIPT,w())}setOutputBip32Derivation(e,t,r,n){this.setOutput(e,i.BIP_32_DERIVATION,t,this.encodeBip32Derivation(r,n))}getOutputBip32Derivation(e,t){let r=this.getOutput(e,i.BIP_32_DERIVATION,t);return this.decodeBip32Derivation(r)}setOutputAmount(e,t){this.setOutput(e,i.AMOUNT,w(),T(t))}getOutputAmount(e){let t=this.getOutput(e,i.AMOUNT,w());return(0,h.unsafeFrom64bitLE)(t)}setOutputScript(e,t){this.setOutput(e,i.SCRIPT,w(),t)}getOutputScript(e){return this.getOutput(e,i.SCRIPT,w())}setOutputTapBip32Derivation(e,t,r,n,o){let s=this.encodeTapBip32Derivation(r,n,o);this.setOutput(e,i.TAP_BIP32_DERIVATION,t,s)}getOutputTapBip32Derivation(e,t){let r=this.getOutput(e,i.TAP_BIP32_DERIVATION,t);return this.decodeTapBip32Derivation(r)}deleteInputEntries(e,t){this.inputMaps[e].forEach((e,r,n)=>{this.isKeyType(r,t)&&n.delete(r)})}copy(e){this.copyMap(this.globalMap,e.globalMap),this.copyMaps(this.inputMaps,e.inputMaps),this.copyMaps(this.outputMaps,e.outputMaps)}copyMaps(e,t){e.forEach((e,r)=>{let n=new Map;this.copyMap(e,n),t[r]=n})}copyMap(e,t){e.forEach((e,r)=>t.set(r,u.from(e)))}serialize(){let e=new h.BufferWriter;return e.writeSlice(u.from([112,115,98,116,255])),b(e,this.globalMap),this.inputMaps.forEach(t=>{b(e,t)}),this.outputMaps.forEach(t=>{b(e,t)}),e.buffer()}deserialize(e){let t,n,i;let o=new h.BufferReader(e);if(!o.readSlice(5).equals(y))throw Error("Invalid magic bytes");for(;this.readKeyPair(this.globalMap,o););try{t=this.getGlobalPsbtVersion()}catch(e){t=0}if(0!==t&&2!==t)throw Error("Only PSBTs of version 0 or 2 are supported");if(0==t){let e=this.getGlobal(r.UNSIGNED_TX),t=c.Transaction.fromBuffer(e);n=t.ins.length,i=t.outs.length}else n=this.getGlobalInputCount(),i=this.getGlobalOutputCount();for(let e=0;e<n;e++)for(this.inputMaps[e]=new Map;this.readKeyPair(this.inputMaps[e],o););for(let e=0;e<i;e++)for(this.outputMaps[e]=new Map;this.readKeyPair(this.outputMaps[e],o););this.normalizeToV2()}normalizeToV2(){var e;let t=null===(e=this.getGlobalOptional(r.VERSION))||void 0===e?void 0:e.readInt32LE(0);if(2===t)return;if(void 0!==t)throw Error("Invalid or unsupported value for PSBT_GLOBAL_VERSION");let n=this.getGlobal(r.UNSIGNED_TX),i=c.Transaction.fromBuffer(n);this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(i.version),this.setGlobalFallbackLocktime(i.locktime),this.setGlobalInputCount(i.ins.length),this.setGlobalOutputCount(i.outs.length);for(let e=0;e<i.ins.length;e++)this.setInputPreviousTxId(e,i.ins[e].hash),this.setInputOutputIndex(e,i.ins[e].index),this.setInputSequence(e,i.ins[e].sequence);for(let e=0;e<i.outs.length;e++)this.setOutputAmount(e,i.outs[e].value),this.setOutputScript(e,i.outs[e].script);this.globalMap.delete(r.UNSIGNED_TX.toString(16).padStart(2,"0"))}fromBitcoinJS(e){return this.setGlobalPsbtVersion(2),this.setGlobalTxVersion(e.version),this.setGlobalInputCount(e.data.inputs.length),this.setGlobalOutputCount(e.txOutputs.length),void 0!==e.locktime&&this.setGlobalFallbackLocktime(e.locktime),e.data.inputs.forEach((t,r)=>{if(function(e){let t;try{c.payments.p2tr({output:e.witnessUtxo.script}),t=!0}catch(e){t=!1}return e&&!!(e.tapInternalKey||e.tapMerkleRoot||e.tapLeafScript&&e.tapLeafScript.length||e.tapBip32Derivation&&e.tapBip32Derivation.length||t)}(t))throw Error("Taproot inputs not supported");this.setInputPreviousTxId(r,e.txInputs[r].hash),void 0!==e.txInputs[r].sequence&&this.setInputSequence(r,e.txInputs[r].sequence),this.setInputOutputIndex(r,e.txInputs[r].index),void 0!==t.sighashType&&this.setInputSighashType(r,t.sighashType),t.nonWitnessUtxo&&this.setInputNonWitnessUtxo(r,t.nonWitnessUtxo),t.witnessUtxo&&this.setInputWitnessUtxo(r,t.witnessUtxo.value,t.witnessUtxo.script),t.witnessScript&&this.setInputWitnessScript(r,t.witnessScript),t.redeemScript&&this.setInputRedeemScript(r,t.redeemScript),e.data.inputs[r].bip32Derivation.forEach(e=>{if(!/^m\//i.test(e.path))throw Error("Invalid input bip32 derivation");let t=e.path.replace(/m\//i,"").split("/").map(e=>e.match(/['h]/i)?parseInt(e)+2147483648:Number(e));this.setInputBip32Derivation(r,e.pubkey,e.masterFingerprint,t)})}),e.txOutputs.forEach((e,t)=>{this.setOutputAmount(t,e.value),this.setOutputScript(t,e.script)}),this}readKeyPair(e,t){let r=(0,d.sanitizeBigintToNumber)(t.readVarInt());return 0!=r&&(I(e,t.readUInt8(),t.readSlice(r-1),t.readVarSlice()),!0)}getKeyDatas(e,t){let r=[];return e.forEach((e,n)=>{this.isKeyType(n,[t])&&r.push(u.from(n.substring(2),"hex"))}),r}isKeyType(e,t){let r=u.from(e.substring(0,2),"hex").readUInt8(0);return t.some(e=>e==r)}setGlobal(e,t){let r=new m(e,u.from([]));this.globalMap.set(r.toString(),t)}getGlobal(e){return E(this.globalMap,e,w(),!1)}getGlobalOptional(e){return E(this.globalMap,e,w(),!0)}setInput(e,t,r,n){I(this.getMap(e,this.inputMaps),t,r,n)}getInput(e,t,r){return E(this.inputMaps[e],t,r,!1)}getInputOptional(e,t,r){return E(this.inputMaps[e],t,r,!0)}setOutput(e,t,r,n){I(this.getMap(e,this.outputMaps),t,r,n)}getOutput(e,t,r){return E(this.outputMaps[e],t,r,!1)}getMap(e,t){return t[e]?t[e]:t[e]=new Map}encodeBip32Derivation(e,t){let r=new h.BufferWriter;return this.writeBip32Derivation(r,e,t),r.buffer()}decodeBip32Derivation(e){let t=new h.BufferReader(e);return this.readBip32Derivation(t)}writeBip32Derivation(e,t,r){e.writeSlice(t),r.forEach(t=>{e.writeUInt32(t)})}readBip32Derivation(e){let t=e.readSlice(4),r=[];for(;e.offset<e.buffer.length;)r.push(e.readUInt32());return{masterFingerprint:t,path:r}}encodeTapBip32Derivation(e,t,r){let n=new h.BufferWriter;return n.writeVarInt(e.length),e.forEach(e=>{n.writeSlice(e)}),this.writeBip32Derivation(n,t,r),n.buffer()}decodeTapBip32Derivation(e){let t=new h.BufferReader(e),r=(0,d.sanitizeBigintToNumber)(t.readVarInt()),n=[];for(let e=0;e<r;e++)n.push(t.readSlice(32));return Object.assign({hashes:n},this.readBip32Derivation(t))}};class m{constructor(e,t){this.keyType=e,this.keyData=t}toString(){let e=new h.BufferWriter;return this.toBuffer(e),e.buffer().toString("hex")}serialize(e){e.writeVarInt(1+this.keyData.length),this.toBuffer(e)}toBuffer(e){e.writeUInt8(this.keyType),e.writeSlice(this.keyData)}}class v{constructor(e,t){this.key=e,this.value=t}serialize(e){this.key.serialize(e),e.writeVarSlice(this.value)}}function b(e,t){for(let[n,i]of[...t].sort(([e],[t])=>e.localeCompare(t))){var r;new v(new m((r=u.from(n,"hex")).readUInt8(0),r.slice(1)),i).serialize(e)}e.writeUInt8(0)}function w(){return u.from([])}function I(e,t,r,n){let i=new m(t,r);e.set(i.toString(),n)}function S(e){let t=u.alloc(4);return t.writeUInt32LE(e,0),t}function T(e){return(0,h.unsafeTo64bitLE)(e)}function _(e){let t=new h.BufferWriter;return t.writeVarInt(e),t.buffer()}function O(e){return(0,d.sanitizeBigintToNumber)(new h.BufferReader(e).readVarInt())}}),O("1Fo37",function(e,t){var r=x("jSdlU"),n=r.MAX_SAFE_COMPONENT_LENGTH,i=r.MAX_SAFE_BUILD_LENGTH,o=r.MAX_LENGTH,s=x("gEWXU");let a=(t=e.exports={}).re=[],u=t.safeRe=[],p=t.src=[],l=t.t={},f=0,c="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",o],[c,i]],d=e=>{for(let[t,r]of h)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},y=(e,t,r)=>{let n=d(t),i=f++;s(e,i,t),l[e]=i,p[i]=t,a[i]=new RegExp(t,r?"g":void 0),u[i]=new RegExp(n,r?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${c}*`),y("MAINVERSION",`(${p[l.NUMERICIDENTIFIER]})\\.(${p[l.NUMERICIDENTIFIER]})\\.(${p[l.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${p[l.NUMERICIDENTIFIERLOOSE]})\\.(${p[l.NUMERICIDENTIFIERLOOSE]})\\.(${p[l.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${p[l.NUMERICIDENTIFIER]}|${p[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${p[l.NUMERICIDENTIFIERLOOSE]}|${p[l.NONNUMERICIDENTIFIER]})`),y("PRERELEASE",`(?:-(${p[l.PRERELEASEIDENTIFIER]}(?:\\.${p[l.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${p[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${p[l.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${c}+`),y("BUILD",`(?:\\+(${p[l.BUILDIDENTIFIER]}(?:\\.${p[l.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${p[l.MAINVERSION]}${p[l.PRERELEASE]}?${p[l.BUILD]}?`),y("FULL",`^${p[l.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${p[l.MAINVERSIONLOOSE]}${p[l.PRERELEASELOOSE]}?${p[l.BUILD]}?`),y("LOOSE",`^${p[l.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${p[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${p[l.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${p[l.XRANGEIDENTIFIER]})(?:\\.(${p[l.XRANGEIDENTIFIER]})(?:\\.(${p[l.XRANGEIDENTIFIER]})(?:${p[l.PRERELEASE]})?${p[l.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${p[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${p[l.XRANGEIDENTIFIERLOOSE]})(?:${p[l.PRERELEASELOOSE]})?${p[l.BUILD]}?)?)?`),y("XRANGE",`^${p[l.GTLT]}\\s*${p[l.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${p[l.GTLT]}\\s*${p[l.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${p[l.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",p[l.COERCEPLAIN]+`(?:${p[l.PRERELEASE]})?`+`(?:${p[l.BUILD]})?`+"(?:$|[^\\d])"),y("COERCERTL",p[l.COERCE],!0),y("COERCERTLFULL",p[l.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${p[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${p[l.LONETILDE]}${p[l.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${p[l.LONETILDE]}${p[l.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${p[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${p[l.LONECARET]}${p[l.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${p[l.LONECARET]}${p[l.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${p[l.GTLT]}\\s*(${p[l.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${p[l.GTLT]}\\s*(${p[l.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${p[l.GTLT]}\\s*(${p[l.LOOSEPLAIN]}|${p[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${p[l.XRANGEPLAIN]})\\s+-\\s+(${p[l.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${p[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${p[l.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}),O("jSdlU",function(e,t){let r=Number.MAX_SAFE_INTEGER||9007199254740991;e.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:16,MAX_SAFE_BUILD_LENGTH:250,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:"2.0.0",FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}}),O("gEWXU",function(e,t){var r=x("hPtJY");let n=("object"==typeof r&&r.env,()=>{});e.exports=n}),O("hPtJY",function(e,t){var r,n,i,o=e.exports={};function s(){throw Error("setTimeout has not been defined")}function a(){throw Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var p=[],l=!1,f=-1;function c(){l&&i&&(l=!1,i.length?p=i.concat(p):f=-1,p.length&&h())}function h(){if(!l){var e=u(c);l=!0;for(var t=p.length;t;){for(i=p,p=[];++f<t;)i&&i[f].run();f=-1,t=p.length}i=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];p.push(new d(e,t)),1!==p.length||l||u(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}),O("3ByjW",function(e,t){e.exports=function(e){e.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}});var P={},A={},k=function(e){return e&&e.Math===Math&&e};A=k("object"==typeof globalThis&&globalThis)||k("object"==typeof window&&window)||k("object"==typeof self&&self)||k("object"==typeof I&&I)||k("object"==typeof A&&A)||function(){return this}()||Function("return this")();var N={},R={};N=!(R=function(e){try{return!!e()}catch(e){return!0}})(function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]});var U={},B={};B=!R(function(){var e=(function(){}).bind();return"function"!=typeof e||e.hasOwnProperty("prototype")});var L=Function.prototype.call;U=B?L.bind(L):function(){return L.apply(L,arguments)};var C={}.propertyIsEnumerable,M=Object.getOwnPropertyDescriptor;o=M&&!C.call({1:2},1)?function(e){var t=M(this,e);return!!t&&t.enumerable}:C;var D={};D=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}};var H={},F={},G={},j=Function.prototype,V=j.call,W=B&&j.bind.bind(V,V),K={},$=(G=B?W:function(e){return function(){return V.apply(e,arguments)}})({}.toString),X=G("".slice);K=function(e){return X($(e),8,-1)};var q=Object,z=G("".split);F=R(function(){return!q("z").propertyIsEnumerable(0)})?function(e){return"String"===K(e)?z(e,""):q(e)}:q;var Y={},Z={};Z=function(e){return null==e};var J=TypeError;Y=function(e){if(Z(e))throw new J("Can't call method on "+e);return e},H=function(e){return F(Y(e))};var Q={},ee={},et={},er={},en="object"==typeof document&&document.all;er=void 0===en&&void 0!==en?function(e){return"function"==typeof e||e===en}:function(e){return"function"==typeof e},et=function(e){return"object"==typeof e?null!==e:er(e)};var ei={},eo={};eo=function(e,t){var r;return arguments.length<2?(r=A[e],er(r)?r:void 0):A[e]&&A[e][t]};var es={};es=G({}.isPrototypeOf);var ea={},eu={},ep={},el={};el="undefined"!=typeof navigator&&String(navigator.userAgent)||"";var ef=A.process,ec=A.Deno,eh=ef&&ef.versions||ec&&ec.version,ed=eh&&eh.v8;ed&&(a=(s=ed.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!a&&el&&(!(s=el.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=el.match(/Chrome\/(\d+)/))&&(a=+s[1]),ep=a;var ey=A.String;ea=(eu=!!Object.getOwnPropertySymbols&&!R(function(){var e=Symbol("symbol detection");return!ey(e)||!(Object(e) instanceof Symbol)||!Symbol.sham&&ep&&ep<41}))&&!Symbol.sham&&"symbol"==typeof Symbol.iterator;var eg=Object;ei=ea?function(e){return"symbol"==typeof e}:function(e){var t=eo("Symbol");return er(t)&&es(t.prototype,eg(e))};var eE={},em={},ev={},eb=String;ev=function(e){try{return eb(e)}catch(e){return"Object"}};var ew=TypeError;em=function(e){if(er(e))return e;throw new ew(ev(e)+" is not a function")},eE=function(e,t){var r=e[t];return Z(r)?void 0:em(r)};var eI={},eS=TypeError;eI=function(e,t){var r,n;if("string"===t&&er(r=e.toString)&&!et(n=U(r,e))||er(r=e.valueOf)&&!et(n=U(r,e))||"string"!==t&&er(r=e.toString)&&!et(n=U(r,e)))return n;throw new eS("Can't convert object to primitive value")};var eT={},e_={},ex={},eO={};eO=!1;var eP={},eA=Object.defineProperty;eP=function(e,t){try{eA(A,e,{value:t,configurable:!0,writable:!0})}catch(r){A[e]=t}return t};var ek="__core-js_shared__",eN=ex=A[ek]||eP(ek,{});(eN.versions||(eN.versions=[])).push({version:"3.37.0",mode:eO?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.37.0/LICENSE",source:"https://github.com/zloirock/core-js"}),e_=function(e,t){return ex[e]||(ex[e]=t||{})};var eR={},eU={},eB=Object;eU=function(e){return eB(Y(e))};var eL=G({}.hasOwnProperty);eR=Object.hasOwn||function(e,t){return eL(eU(e),t)};var eC={},eM=0,eD=Math.random(),eH=G(1..toString);eC=function(e){return"Symbol("+(void 0===e?"":e)+")_"+eH(++eM+eD,36)};var eF=A.Symbol,eG=e_("wks"),ej=ea?eF.for||eF:eF&&eF.withoutSetter||eC,eV=TypeError,eW=(eT=function(e){return eR(eG,e)||(eG[e]=eu&&eR(eF,e)?eF[e]:ej("Symbol."+e)),eG[e]})("toPrimitive");ee=function(e,t){if(!et(e)||ei(e))return e;var r,n=eE(e,eW);if(n){if(void 0===t&&(t="default"),r=U(n,e,t),!et(r)||ei(r))return r;throw new eV("Can't convert object to primitive value")}return void 0===t&&(t="number"),eI(e,t)},Q=function(e){var t=ee(e,"string");return ei(t)?t:t+""};var eK={},e$={},eX=A.document,eq=et(eX)&&et(eX.createElement);e$=function(e){return eq?eX.createElement(e):{}},eK=!N&&!R(function(){return 7!==Object.defineProperty(e$("div"),"a",{get:function(){return 7}}).a});var ez=Object.getOwnPropertyDescriptor;i=N?ez:function(e,t){if(e=H(e),t=Q(t),eK)try{return ez(e,t)}catch(e){}if(eR(e,t))return D(!U(o,e,t),e[t])};var eY={},eZ={};eZ=N&&R(function(){return 42!==Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype});var eJ={},eQ=String,e0=TypeError;eJ=function(e){if(et(e))return e;throw new e0(eQ(e)+" is not an object")};var e1=TypeError,e2=Object.defineProperty,e3=Object.getOwnPropertyDescriptor,e6="enumerable",e4="configurable",e8="writable";u=N?eZ?function(e,t,r){if(eJ(e),t=Q(t),eJ(r),"function"==typeof e&&"prototype"===t&&"value"in r&&e8 in r&&!r[e8]){var n=e3(e,t);n&&n[e8]&&(e[t]=r.value,r={configurable:e4 in r?r[e4]:n[e4],enumerable:e6 in r?r[e6]:n[e6],writable:!1})}return e2(e,t,r)}:e2:function(e,t,r){if(eJ(e),t=Q(t),eJ(r),eK)try{return e2(e,t,r)}catch(e){}if("get"in r||"set"in r)throw new e1("Accessors not supported");return"value"in r&&(e[t]=r.value),e},eY=N?function(e,t,r){return u(e,t,D(1,r))}:function(e,t,r){return e[t]=r,e};var e5={},e9={},e7=Function.prototype,te=N&&Object.getOwnPropertyDescriptor,tt=eR(e7,"name")&&(!N||N&&te(e7,"name").configurable),tr={},tn=G(Function.toString);er(ex.inspectSource)||(ex.inspectSource=function(e){return tn(e)}),tr=ex.inspectSource;var ti={},to={},ts=A.WeakMap;to=er(ts)&&/native code/.test(String(ts));var ta={},tu=e_("keys");ta=function(e){return tu[e]||(tu[e]=eC(e))};var tp={};tp={};var tl="Object already initialized",tf=A.TypeError,tc=A.WeakMap;if(to||ex.state){var th=ex.state||(ex.state=new tc);th.get=th.get,th.has=th.has,th.set=th.set,p=function(e,t){if(th.has(e))throw new tf(tl);return t.facade=e,th.set(e,t),t},l=function(e){return th.get(e)||{}},f=function(e){return th.has(e)}}else{var td=ta("state");tp[td]=!0,p=function(e,t){if(eR(e,td))throw new tf(tl);return t.facade=e,eY(e,td,t),t},l=function(e){return eR(e,td)?e[td]:{}},f=function(e){return eR(e,td)}}var ty=(ti={set:p,get:l,has:f,enforce:function(e){return f(e)?l(e):p(e,{})},getterFor:function(e){return function(t){var r;if(!et(t)||(r=l(t)).type!==e)throw new tf("Incompatible receiver, "+e+" required");return r}}}).enforce,tg=ti.get,tE=String,tm=Object.defineProperty,tv=G("".slice),tb=G("".replace),tw=G([].join),tI=N&&!R(function(){return 8!==tm(function(){},"length",{value:8}).length}),tS=String(String).split("String"),tT=e9=function(e,t,r){"Symbol("===tv(tE(t),0,7)&&(t="["+tb(tE(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!eR(e,"name")||tt&&e.name!==t)&&(N?tm(e,"name",{value:t,configurable:!0}):e.name=t),tI&&r&&eR(r,"arity")&&e.length!==r.arity&&tm(e,"length",{value:r.arity});try{r&&eR(r,"constructor")&&r.constructor?N&&tm(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=ty(e);return eR(n,"source")||(n.source=tw(tS,"string"==typeof t?t:"")),e};Function.prototype.toString=tT(function(){return er(this)&&tg(this).source||tr(this)},"toString"),e5=function(e,t,r,n){n||(n={});var i=n.enumerable,o=void 0!==n.name?n.name:t;if(er(r)&&e9(r,o,n),n.global)i?e[t]=r:eP(t,r);else{try{n.unsafe?e[t]&&(i=!0):delete e[t]}catch(e){}i?e[t]=r:u(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e};var t_={},tx={},tO={},tP={},tA={},tk={},tN=Math.ceil,tR=Math.floor;tk=Math.trunc||function(e){var t=+e;return(t>0?tR:tN)(t)},tA=function(e){var t=+e;return t!=t||0===t?0:tk(t)};var tU=Math.max,tB=Math.min;tP=function(e,t){var r=tA(e);return r<0?tU(r+t,0):tB(r,t)};var tL={},tC={},tM=Math.min;tC=function(e){var t=tA(e);return t>0?tM(t,9007199254740991):0},tL=function(e){return tC(e.length)};var tD=function(e){return function(t,r,n){var i,o=H(t),s=tL(o);if(0===s)return!e&&-1;var a=tP(n,s);if(e&&r!=r){for(;s>a;)if((i=o[a++])!=i)return!0}else for(;s>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}},tH={includes:tD(!0),indexOf:tD(!1)}.indexOf,tF=G([].push);tO=function(e,t){var r,n=H(e),i=0,o=[];for(r in n)!eR(tp,r)&&eR(n,r)&&tF(o,r);for(;t.length>i;)eR(n,r=t[i++])&&(~tH(o,r)||tF(o,r));return o};var tG=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype");c=Object.getOwnPropertyNames||function(e){return tO(e,tG)},h=Object.getOwnPropertySymbols;var tj=G([].concat);tx=eo("Reflect","ownKeys")||function(e){var t=c(eJ(e));return h?tj(t,h(e)):t},t_=function(e,t,r){for(var n=tx(t),o=0;o<n.length;o++){var s=n[o];eR(e,s)||r&&eR(r,s)||u(e,s,i(t,s))}};var tV={},tW=/#|\.prototype\./,tK=function(e,t){var r=tX[t$(e)];return r===tz||r!==tq&&(er(t)?R(t):!!t)},t$=tK.normalize=function(e){return String(e).replace(tW,".").toLowerCase()},tX=tK.data={},tq=tK.NATIVE="N",tz=tK.POLYFILL="P";tV=tK,P=function(e,t){var r,n,o,s,a,u=e.target,p=e.global,l=e.stat;if(r=p?A:l?A[u]||eP(u,{}):A[u]&&A[u].prototype)for(n in t){if(s=t[n],o=e.dontCallGetSet?(a=i(r,n))&&a.value:r[n],!tV(p?n:u+(l?".":"#")+n,e.forced)&&void 0!==o){if(typeof s==typeof o)continue;t_(s,o)}(e.sham||o&&o.sham)&&eY(s,"sham",!0),e5(r,n,s,e)}};var tY={},tZ={},tJ={},tQ=(tJ=function(e){if("Function"===K(e))return G(e)})(tJ.bind);tZ=function(e,t){return em(e),void 0===t?e:B?tQ(e,t):function(){return e.apply(t,arguments)}};var t0={},t1={};t1={};var t2=eT("iterator"),t3=Array.prototype;t0=function(e){return void 0!==e&&(t1.Array===e||t3[t2]===e)};var t6={},t4={},t8={},t5={},t9=eT("toStringTag"),t7={};t7[t9]="z",t5="[object z]"===String(t7);var re=eT("toStringTag"),rt=Object,rr="Arguments"===K(function(){return arguments}()),rn=function(e,t){try{return e[t]}catch(e){}};t8=t5?K:function(e){var t,r,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=rn(t=rt(e),re))?r:rr?K(t):"Object"===(n=K(t))&&er(t.callee)?"Arguments":n};var ri=eT("iterator");t4=function(e){if(!Z(e))return eE(e,ri)||eE(e,"@@iterator")||t1[t8(e)]};var ro=TypeError;t6=function(e,t){var r=arguments.length<2?t4(e):t;if(em(r))return eJ(U(r,e));throw new ro(ev(e)+" is not iterable")};var rs={};rs=function(e,t,r){var n,i;eJ(e);try{if(!(n=eE(e,"return"))){if("throw"===t)throw r;return r}n=U(n,e)}catch(e){i=!0,n=e}if("throw"===t)throw r;if(i)throw n;return eJ(n),r};var ra=TypeError,ru=function(e,t){this.stopped=e,this.result=t},rp=ru.prototype;tY=function(e,t,r){var n,i,o,s,a,u,p,l=r&&r.that,f=!!(r&&r.AS_ENTRIES),c=!!(r&&r.IS_RECORD),h=!!(r&&r.IS_ITERATOR),d=!!(r&&r.INTERRUPTED),y=tZ(t,l),g=function(e){return n&&rs(n,"normal",e),new ru(!0,e)},E=function(e){return f?(eJ(e),d?y(e[0],e[1],g):y(e[0],e[1])):d?y(e,g):y(e)};if(c)n=e.iterator;else if(h)n=e;else{if(!(i=t4(e)))throw new ra(ev(e)+" is not iterable");if(t0(i)){for(o=0,s=tL(e);s>o;o++)if((a=E(e[o]))&&es(rp,a))return a;return new ru(!1)}n=t6(e,i)}for(u=c?e.next:n.next;!(p=U(u,n)).done;){try{a=E(p.value)}catch(e){rs(n,"throw",e)}if("object"==typeof a&&a&&es(rp,a))return a}return new ru(!1)};var rl={},rf=Map.prototype,rc=(rl={Map:Map,set:G(rf.set),get:G(rf.get),has:G(rf.has),remove:G(rf.delete),proto:rf}).Map,rh=rl.has,rd=rl.get,ry=rl.set,rg=G([].push),rE=eO||R(function(){return 1!==rc.groupBy("ab",function(e){return e}).get("a").length});P({target:"Map",stat:!0,forced:eO||rE},{groupBy:function(e,t){Y(e),em(t);var r=new rc,n=0;return tY(e,function(e){var i=t(e,n++);rh(r,i)?rg(rd(r,i),e):ry(r,i,[e])}),r}});var rm={},rv={};rv=A,d=eT,rm=function(e){var t=rv.Symbol||(rv.Symbol={});eR(t,e)||u(t,e,{value:d(e)})};var rb=A.Symbol;if(rm("dispose"),rb){var rw=i(rb,"dispose");rw.enumerable&&rw.configurable&&rw.writable&&u(rb,"dispose",{value:rw.value,enumerable:!1,configurable:!1,writable:!1})}var rI={},rS={},rT=Function.prototype,r_=rT.apply,rx=rT.call;rS="object"==typeof Reflect&&Reflect.apply||(B?rx.bind(r_):function(){return rx.apply(r_,arguments)});var rO={};rO=eo("document","documentElement");var rP={};rP=G([].slice);var rA={},rk=TypeError;rA=function(e,t){if(e<t)throw new rk("Not enough arguments");return e};var rN={};rN=/(?:ipad|iphone|ipod).*applewebkit/i.test(el);var rR={};rR="process"===K(A.process);var rU=A.setImmediate,rB=A.clearImmediate,rL=A.process,rC=A.Dispatch,rM=A.Function,rD=A.MessageChannel,rH=A.String,rF=0,rG={},rj="onreadystatechange";R(function(){y=A.location});var rV=function(e){if(eR(rG,e)){var t=rG[e];delete rG[e],t()}},rW=function(e){return function(){rV(e)}},rK=function(e){rV(e.data)},r$=function(e){A.postMessage(rH(e),y.protocol+"//"+y.host)};rU&&rB||(rU=function(e){rA(arguments.length,1);var t=er(e)?e:rM(e),r=rP(arguments,1);return rG[++rF]=function(){rS(t,void 0,r)},g(rF),rF},rB=function(e){delete rG[e]},rR?g=function(e){rL.nextTick(rW(e))}:rC&&rC.now?g=function(e){rC.now(rW(e))}:rD&&!rN?(m=(E=new rD).port2,E.port1.onmessage=rK,g=tZ(m.postMessage,m)):A.addEventListener&&er(A.postMessage)&&!A.importScripts&&y&&"file:"!==y.protocol&&!R(r$)?(g=r$,A.addEventListener("message",rK,!1)):g=rj in e$("script")?function(e){rO.appendChild(e$("script"))[rj]=function(){rO.removeChild(this),rV(e)}}:function(e){setTimeout(rW(e),0)});var rX=(rI={set:rU,clear:rB}).clear;P({global:!0,bind:!0,enumerable:!0,forced:A.clearImmediate!==rX},{clearImmediate:rX});var rq=rI.set,rz={},rY={};rY="function"==typeof Bun&&Bun&&"string"==typeof Bun.version;var rZ=A.Function,rJ=/MSIE .\./.test(el)||rY&&((t=A.Bun.version.split(".")).length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2]));rz=function(e,t){var r=t?2:1;return rJ?function(n,i){var o=rA(arguments.length,1)>r,s=er(n)?n:rZ(n),a=o?rP(arguments,r):[],u=o?function(){rS(s,this,a)}:s;return t?e(u,i):e(u)}:e};var rQ=A.setImmediate?rz(rq,!1):rq;P({global:!0,bind:!0,enumerable:!0,forced:A.setImmediate!==rQ},{setImmediate:rQ});let r0=0;const r1=[],r2=(e,t,r)=>{let n={type:e,id:String(++r0),date:new Date};t&&(n.message=t),r&&(n.data=r),r8(n)},r3=({type:e,message:t,data:r,context:n})=>{let i={type:e,id:String(++r0),date:new Date};t&&(i.message=t),r&&(i.data=r),n&&(i.context=n),r8(i)};class r6{constructor(e,t){this.type=e,this.context=t}trace(e,t){r3({type:this.type,message:e,data:t,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context=Object.assign(Object.assign({},this.context),e)}getType(){return this.type}setType(e){this.type=e}withType(e){return new r6(e,this.context)}withContext(e){return new r6(this.type,e)}withUpdatedContext(e){return new r6(this.type,Object.assign(Object.assign({},this.context),e))}}const r4=e=>(r1.push(e),()=>{let t=r1.indexOf(e);-1!==t&&(r1[t]=r1[r1.length-1],r1.pop())});function r8(e){for(let t=0;t<r1.length;t++)try{r1[t](e)}catch(e){console.error(e)}}"undefined"!=typeof window&&(window.__ledgerLogsListen=r4);var r5={},r9=r5&&r5.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r5,"__esModule",{value:!0}),r5.WalletPolicy=r5.DefaultWalletPolicy=r5.PsbtV2=r5.AppClient=void 0;const r7=r9(x("pyUmM"));r5.AppClient=r7.default;var ne={},nt=x("6ZWSX"),nr=nt.Buffer;Object.defineProperty(ne,"__esModule",{value:!0}),ne.DefaultWalletPolicy=ne.WalletPolicy=void 0;var nn=x("3wrUl"),ni=x("8rRzQ"),no=x("goh0i");class ns{constructor(e,t,r){this.name=e,this.descriptorTemplate=t,this.keys=r}getId(){return nn.crypto.sha256(this.serialize())}serialize(){let e=this.keys.map(e=>nr.from(e,"ascii")),t=new no.Merkle(e.map(e=>(0,no.hashLeaf)(e))),r=new ni.BufferWriter;return r.writeUInt8(2),r.writeVarSlice(nr.from(this.name,"ascii")),r.writeVarInt(this.descriptorTemplate.length),r.writeSlice(nn.crypto.sha256(nr.from(this.descriptorTemplate))),r.writeVarInt(this.keys.length),r.writeSlice(t.getRoot()),r.buffer()}}ne.WalletPolicy=ns,ne.DefaultWalletPolicy=class extends ns{constructor(e,t){super("",e,[t])}},Object.defineProperty(r5,"DefaultWalletPolicy",{enumerable:!0,get:function(){return ne.DefaultWalletPolicy}}),Object.defineProperty(r5,"WalletPolicy",{enumerable:!0,get:function(){return ne.WalletPolicy}});var na=x("fUsjC");Object.defineProperty(r5,"PsbtV2",{enumerable:!0,get:function(){return na.PsbtV2}}),r5.default=r7.default;var nu={},np="object"==typeof Reflect?Reflect:null,nl=np&&"function"==typeof np.apply?np.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};v=np&&"function"==typeof np.ownKeys?np.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var nf=Number.isNaN||function(e){return e!=e};function nc(){nc.init.call(this)}(nu=nc).once=function(e,t){return new Promise(function(r,n){var i;function o(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",o),r([].slice.call(arguments))}nI(e,t,s,{once:!0}),"error"!==t&&(i={once:!0},"function"==typeof e.on&&nI(e,"error",o,i))})},nc.EventEmitter=nc,nc.prototype._events=void 0,nc.prototype._eventsCount=0,nc.prototype._maxListeners=void 0;var nh=10;function nd(e){if("function"!=typeof e)throw TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function ny(e){return void 0===e._maxListeners?nc.defaultMaxListeners:e._maxListeners}function ng(e,t,r,n){if(nd(r),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),o=e._events),s=o[t]),void 0===s)s=o[t]=r,++e._eventsCount;else if("function"==typeof s?s=o[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=ny(e))>0&&s.length>i&&!s.warned){s.warned=!0;var i,o,s,a=Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=e,a.type=t,a.count=s.length,console&&console.warn&&console.warn(a)}return e}function nE(){if(!this.fired)return(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0==arguments.length)?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function nm(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=nE.bind(n);return i.listener=r,n.wrapFn=i,i}function nv(e,t,r){var n=e._events;if(void 0===n)return[];var i=n[t];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(e){for(var t=Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(i):nw(i,i.length)}function nb(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function nw(e,t){for(var r=Array(t),n=0;n<t;++n)r[n]=e[n];return r}function nI(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else if("function"==typeof e.addEventListener)e.addEventListener(t,function i(o){n.once&&e.removeEventListener(t,i),r(o)});else throw TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}Object.defineProperty(nc,"defaultMaxListeners",{enumerable:!0,get:function(){return nh},set:function(e){if("number"!=typeof e||e<0||nf(e))throw RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");nh=e}}),nc.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},nc.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||nf(e))throw RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},nc.prototype.getMaxListeners=function(){return ny(this)},nc.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){if(t.length>0&&(o=t[0]),o instanceof Error)throw o;var o,s=Error("Unhandled error."+(o?" ("+o.message+")":""));throw s.context=o,s}var a=i[e];if(void 0===a)return!1;if("function"==typeof a)nl(a,this,t);else for(var u=a.length,p=nw(a,u),r=0;r<u;++r)nl(p[r],this,t);return!0},nc.prototype.addListener=function(e,t){return ng(this,e,t,!1)},nc.prototype.on=nc.prototype.addListener,nc.prototype.prependListener=function(e,t){return ng(this,e,t,!0)},nc.prototype.once=function(e,t){return nd(t),this.on(e,nm(this,e,t)),this},nc.prototype.prependOnceListener=function(e,t){return nd(t),this.prependListener(e,nm(this,e,t)),this},nc.prototype.removeListener=function(e,t){var r,n,i,o,s;if(nd(t),void 0===(n=this._events)||void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(i=-1,o=r.length-1;o>=0;o--)if(r[o]===t||r[o].listener===t){s=r[o].listener,i=o;break}if(i<0)return this;0===i?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,i),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,s||t)}return this},nc.prototype.off=nc.prototype.removeListener,nc.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0==arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0==arguments.length){var i,o=Object.keys(r);for(n=0;n<o.length;++n)"removeListener"!==(i=o[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},nc.prototype.listeners=function(e){return nv(this,e,!0)},nc.prototype.rawListeners=function(e){return nv(this,e,!1)},nc.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):nb.call(e,t)},nc.prototype.listenerCount=nb,nc.prototype.eventNames=function(){return this._eventsCount>0?v(this._events):[]};const nS={},nT={},n_=(e,t)=>{nT[e]=t},nx=e=>{class t extends Error{constructor(r,n,i){if(super(r||e,i),Object.setPrototypeOf(this,t.prototype),this.name=e,n)for(let e in n)this[e]=n[e];if(i&&"object"==typeof i&&"cause"in i&&!("cause"in this)){let e=i.cause;this.cause=e,"stack"in e&&(this.stack=this.stack+"\nCAUSE: "+e.stack)}}}return nS[e]=t,t};nx("AccountNameRequired"),nx("AccountNotSupported"),nx("AmountRequired"),nx("BluetoothRequired"),nx("BtcUnmatchedApp"),nx("CantOpenDevice"),nx("CashAddrNotSupported"),nx("ClaimRewardsFeesWarning"),nx("CurrencyNotSupported"),nx("DeviceAppVerifyNotSupported"),nx("DeviceGenuineSocketEarlyClose"),nx("DeviceNotGenuine"),nx("DeviceOnDashboardExpected"),nx("DeviceOnDashboardUnexpected"),nx("DeviceInOSUExpected"),nx("DeviceHalted"),nx("DeviceNameInvalid"),nx("DeviceSocketFail"),nx("DeviceSocketNoBulkStatus"),nx("DeviceSocketNoBulkStatus"),nx("UnresponsiveDeviceError");const nO=nx("DisconnectedDevice"),nP=nx("DisconnectedDeviceDuringOperation");nx("DeviceExtractOnboardingStateError"),nx("DeviceOnboardingStatePollingError"),nx("EnpointConfig"),nx("EthAppPleaseEnableContractData"),nx("FeeEstimationFailed"),nx("FirmwareNotRecognized"),nx("HardResetFail"),nx("InvalidXRPTag"),nx("InvalidAddress"),nx("InvalidNonce"),nx("InvalidAddressBecauseDestinationIsAlsoSource"),nx("LatestMCUInstalledError"),nx("UnknownMCU"),nx("LedgerAPIError"),nx("LedgerAPIErrorWithMessage"),nx("LedgerAPINotAvailable"),nx("ManagerAppAlreadyInstalled"),nx("ManagerAppRelyOnBTC"),nx("ManagerAppDepInstallRequired"),nx("ManagerAppDepUninstallRequired"),nx("ManagerDeviceLocked"),nx("ManagerFirmwareNotEnoughSpace"),nx("ManagerNotEnoughSpace"),nx("ManagerUninstallBTCDep"),nx("NetworkDown"),nx("NetworkError"),nx("NoAddressesFound"),nx("NotEnoughBalance"),nx("NotEnoughBalanceToDelegate"),nx("NotEnoughBalanceInParentAccount"),nx("NotEnoughSpendableBalance"),nx("NotEnoughBalanceBecauseDestinationNotCreated"),nx("NoAccessToCamera"),nx("NotEnoughGas"),nx("NotEnoughGasSwap"),nx("NotSupportedLegacyAddress"),nx("GasLessThanEstimate"),nx("PriorityFeeTooLow"),nx("PriorityFeeTooHigh"),nx("PriorityFeeHigherThanMaxFee"),nx("MaxFeeTooLow"),nx("PasswordsDontMatch"),nx("PasswordIncorrect"),nx("RecommendSubAccountsToEmpty"),nx("RecommendUndelegation"),nx("TimeoutTagged"),nx("UnexpectedBootloader"),nx("MCUNotGenuineToDashboard"),nx("RecipientRequired"),nx("UnavailableTezosOriginatedAccountReceive"),nx("UnavailableTezosOriginatedAccountSend"),nx("UpdateFetchFileFail"),nx("UpdateIncorrectHash"),nx("UpdateIncorrectSig"),nx("UpdateYourApp"),nx("UserRefusedDeviceNameChange"),nx("UserRefusedAddress"),nx("UserRefusedFirmwareUpdate"),nx("UserRefusedAllowManager"),nx("UserRefusedOnDevice"),nx("ExpertModeRequired");const nA=nx("TransportOpenUserCancelled"),nk=nx("TransportInterfaceNotAvailable"),nN=nx("TransportPendingOperation"),nR=nx("TransportWebUSBGestureRequired");nx("TransactionHasBeenValidatedError"),nx("TransportExchangeTimeoutError"),nx("DeviceShouldStayInApp"),nx("WebsocketConnectionError"),nx("WebsocketConnectionFailed"),nx("WrongDeviceForAccount"),nx("WrongDeviceForAccountPayout"),nx("WrongDeviceForAccountRefund"),nx("WrongAppForCurrency"),nx("ETHAddressNonEIP"),nx("CantScanQRCode"),nx("FeeNotLoaded"),nx("FeeNotLoadedSwap"),nx("FeeRequired"),nx("FeeTooHigh"),nx("PendingOperation"),nx("SyncError"),nx("PairingFailed"),nx("PeerRemovedPairing"),nx("GenuineCheckFailed"),nx("LedgerAPI4xx"),nx("LedgerAPI5xx"),nx("FirmwareOrAppUpdateRequired"),nx("ReplacementTransactionUnderpriced"),nx("OpReturnSizeLimit"),nx("DustLimit"),nx("LanguageNotFound"),nx("NoDBPathGiven"),nx("DBWrongPassword"),nx("DBNotReset"),nx("SequenceNumberError"),nx("DisabledTransactionBroadcastError"),(r=b||(b={})).Unknown="Unknown",r.LocationServicesDisabled="LocationServicesDisabled",r.LocationServicesUnauthorized="LocationServicesUnauthorized",r.BluetoothScanStartFailed="BluetoothScanStartFailed";class nU extends Error{constructor(e,t){let r="TransportError";super(e||r),this.name=r,this.message=e,this.stack=Error(e).stack,this.id=t}}n_("TransportError",e=>new nU(e.message,e.id));const nB={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,CUSTOM_IMAGE_BOOTLOADER:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738};class nL extends Error{constructor(e,{canBeMappedToChildError:t=!0}={}){let r=Object.keys(nB).find(t=>nB[t]===e)||"UNKNOWN_ERROR",n=function(e){switch(e){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=e&&e<=28671)return"Internal error, please report"}(e)||r,i=e.toString(16),o=`Ledger device: ${n} (0x${i})`;if(super(o),this.name="TransportStatusError",this.statusCode=e,this.statusText=r,Object.setPrototypeOf(this,nL.prototype),t&&e===nB.LOCKED_DEVICE)return new nC(o)}}class nC extends nL{constructor(e){super(nB.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,nC.prototype)}}n_("TransportStatusError",e=>new nL(e.statusCode));var nt=x("6ZWSX"),nM=nt.Buffer,nD=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};class nH{constructor({context:e,logType:t}={}){this.exchangeTimeout=3e4,this.unresponsiveTimeout=15e3,this.deviceModel=null,this._events=new(S(nu)),this.send=(e,t,r,n,i=nM.alloc(0),o=[nB.OK],{abortTimeoutMs:s}={})=>nD(this,void 0,void 0,function*(){let a=this.tracer.withUpdatedContext({function:"send"});if(i.length>=256)throw a.trace("data.length exceeded 256 bytes limit",{dataLength:i.length}),new nU("data.length exceed 256 bytes limit. Got: "+i.length,"DataLengthTooBig");a.trace("Starting an exchange",{abortTimeoutMs:s});let u=yield this.exchange(nM.concat([nM.from([e,t,r,n]),nM.from([i.length]),i]),{abortTimeoutMs:s});a.trace("Received response from exchange");let p=u.readUInt16BE(u.length-2);if(!o.some(e=>e===p))throw new nL(p);return u}),this._appAPIlock=null,this.tracer=new r6(null!=t?t:"transport",e)}exchange(e,{abortTimeoutMs:t}={}){throw Error("exchange not implemented")}exchangeBulk(e,t){let r=!1;return nD(this,void 0,void 0,function*(){if(!r)for(let n of e){let e=yield this.exchange(n);if(r)return;let i=e.readUInt16BE(e.length-2);if(i!==nB.OK)throw new nL(i);t.next(e)}}).then(()=>!r&&t.complete(),e=>!r&&t.error(e)),{unsubscribe:()=>{r=!0}}}setScrambleKey(e){}close(){return Promise.resolve()}on(e,t){this._events.on(e,t)}off(e,t){this._events.removeListener(e,t)}emit(e,...t){this._events.emit(e,...t)}setDebugMode(){console.warn("setDebugMode is deprecated. use @ledgerhq/logs instead. No logs are emitted in this anymore.")}setExchangeTimeout(e){this.exchangeTimeout=e}setExchangeUnresponsiveTimeout(e){this.unresponsiveTimeout=e}static create(e=3e3,t){return new Promise((r,n)=>{let i=!1,o=this.listen({next:t=>{i=!0,o&&o.unsubscribe(),s&&clearTimeout(s),this.open(t.descriptor,e).then(r,n)},error:e=>{s&&clearTimeout(s),n(e)},complete:()=>{s&&clearTimeout(s),i||n(new nU(this.ErrorMessage_NoDeviceFound,"NoDeviceFound"))}}),s=t?setTimeout(()=>{o.unsubscribe(),n(new nU(this.ErrorMessage_ListenTimeout,"ListenTimeout"))},t):null})}exchangeAtomicImpl(e){return nD(this,void 0,void 0,function*(){let t;let r=this.tracer.withUpdatedContext({function:"exchangeAtomicImpl",unresponsiveTimeout:this.unresponsiveTimeout});if(this.exchangeBusyPromise)throw r.trace("Atomic exchange is already busy"),new nN("An action was already pending on the Ledger device. Please deny or reconnect.");let n=new Promise(e=>{t=e});this.exchangeBusyPromise=n;let i=!1,o=setTimeout(()=>{r.trace('Timeout reached, emitting Transport event "unresponsive"',{unresponsiveTimeout:this.unresponsiveTimeout}),i=!0,this.emit("unresponsive")},this.unresponsiveTimeout);try{let t=yield e();return i&&(r.trace("Device was unresponsive, emitting responsive"),this.emit("responsive")),t}finally{r.trace("Finalize, clearing busy guard"),clearTimeout(o),t&&t(),this.exchangeBusyPromise=null}})}decorateAppAPIMethods(e,t,r){for(let n of t)e[n]=this.decorateAppAPIMethod(n,e[n],e,r)}decorateAppAPIMethod(e,t,r,n){return(...i)=>nD(this,void 0,void 0,function*(){let{_appAPIlock:o}=this;if(o)return Promise.reject(new nU("Ledger Device is busy (lock "+o+")","TransportLocked"));try{return this._appAPIlock=e,this.setScrambleKey(n),yield t.apply(r,i)}finally{this._appAPIlock=null}})}setTraceContext(e){this.tracer=this.tracer.withContext(e)}updateTraceContext(e){this.tracer.updateContext(e)}getTraceContext(){return this.tracer.getContext()}}nH.ErrorMessage_ListenTimeout="No Ledger device found (timeout)",nH.ErrorMessage_NoDeviceFound="No Ledger device found";var nF=nH,nt=x("6ZWSX"),nG=nt.Buffer;const nj={data:nG.alloc(0),dataLength:0,sequence:0};var nV=(e,t)=>({makeBlocks(r){let n=nG.concat([function(e){let t=nG.alloc(2);return t.writeUInt16BE(e,0),t}(r.length),r]),i=t-5,o=Math.ceil(n.length/i);n=nG.concat([n,nG.alloc(o*i-n.length+1).fill(0)]);let s=[];for(let t=0;t<o;t++){let r=nG.alloc(5);r.writeUInt16BE(e,0),r.writeUInt8(5,2),r.writeUInt16BE(t,3);let o=n.slice(t*i,(t+1)*i);s.push(nG.concat([r,o]))}return s},reduceResponse(t,r){let{data:n,dataLength:i,sequence:o}=t||nj;if(r.readUInt16BE(0)!==e)throw new nU("Invalid channel","InvalidChannel");if(5!==r.readUInt8(2))throw new nU("Invalid tag","InvalidTag");if(r.readUInt16BE(3)!==o)throw new nU("Invalid sequence","InvalidSequence");t||(i=r.readUInt16BE(5)),o++;let s=r.slice(t?5:7);return(n=nG.concat([n,s])).length>i&&(n=n.slice(0,i)),{data:n,dataLength:i,sequence:o}},getReducedResult(e){if(e&&e.dataLength===e.data.length)return e.data}}),nW={},nK=x("1Fo37"),n$=x("jSdlU"),nX={},nq=x("gEWXU"),n$=x("jSdlU"),nz=n$.MAX_LENGTH,nY=n$.MAX_SAFE_INTEGER,nK=x("1Fo37"),nZ=nK.safeRe,nJ=nK.t,nQ={};const n0=Object.freeze({loose:!0}),n1=Object.freeze({});nQ=e=>e?"object"!=typeof e?n0:e:n1;var n2={};const n3=/^[0-9]+$/,n6=(e,t)=>{let r=n3.test(e),n=n3.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1};var n4=(n2={compareIdentifiers:n6,rcompareIdentifiers:(e,t)=>n6(t,e)}).compareIdentifiers;class n8{constructor(e,t){if(t=nQ(t),e instanceof n8){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;e=e.version}else if("string"!=typeof e)throw TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>nz)throw TypeError(`version is longer than ${nz} characters`);nq("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;let r=e.trim().match(t.loose?nZ[nJ.LOOSE]:nZ[nJ.FULL]);if(!r)throw TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>nY||this.major<0)throw TypeError("Invalid major version");if(this.minor>nY||this.minor<0)throw TypeError("Invalid minor version");if(this.patch>nY||this.patch<0)throw TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(e=>{if(/^[0-9]+$/.test(e)){let t=+e;if(t>=0&&t<nY)return t}return e}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(nq("SemVer.compare",this.version,this.options,e),!(e instanceof n8)){if("string"==typeof e&&e===this.version)return 0;e=new n8(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof n8||(e=new n8(e,this.options)),n4(this.major,e.major)||n4(this.minor,e.minor)||n4(this.patch,e.patch)}comparePre(e){if(e instanceof n8||(e=new n8(e,this.options)),this.prerelease.length&&!e.prerelease.length)return -1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{let r=this.prerelease[t],n=e.prerelease[t];if(nq("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return -1;if(r===n)continue;else return n4(r,n)}while(++t)}compareBuild(e){e instanceof n8||(e=new n8(e,this.options));let t=0;do{let r=this.build[t],n=e.build[t];if(nq("prerelease compare",t,r,n),void 0===r&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===r)return -1;if(r===n)continue;else return n4(r,n)}while(++t)}inc(e,t,r){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,r),this.inc("pre",t,r);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t,r),this.inc("pre",t,r);break;case"major":(0!==this.minor||0!==this.patch||0===this.prerelease.length)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(0!==this.patch||0===this.prerelease.length)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":{let e=Number(r)?1:0;if(!t&&!1===r)throw Error("invalid increment argument: identifier is empty");if(0===this.prerelease.length)this.prerelease=[e];else{let n=this.prerelease.length;for(;--n>=0;)"number"==typeof this.prerelease[n]&&(this.prerelease[n]++,n=-2);if(-1===n){if(t===this.prerelease.join(".")&&!1===r)throw Error("invalid increment argument: identifier already exists");this.prerelease.push(e)}}if(t){let n=[t,e];!1===r&&(n=[t]),0===n4(this.prerelease[0],t)?isNaN(this.prerelease[1])&&(this.prerelease=n):this.prerelease=n}break}default:throw Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}nX=n8;var n5={};n5=(e,t,r=!1)=>{if(e instanceof nX)return e;try{return new nX(e,t)}catch(e){if(!r)return null;throw e}};var n9={};n9=(e,t)=>{let r=n5(e,t);return r?r.version:null};var n7={};n7=(e,t)=>{let r=n5(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};var ie={};ie=(e,t,r,n,i)=>{"string"==typeof r&&(i=n,n=r,r=void 0);try{return new nX(e instanceof nX?e.version:e,r).inc(t,n,i).version}catch(e){return null}};var it={};it=(e,t)=>{let r=n5(e,null,!0),n=n5(t,null,!0),i=r.compare(n);if(0===i)return null;let o=i>0,s=o?r:n,a=o?n:r,u=!!s.prerelease.length;if(a.prerelease.length&&!u)return a.patch||a.minor?s.patch?"patch":s.minor?"minor":"major":"major";let p=u?"pre":"";return r.major!==n.major?p+"major":r.minor!==n.minor?p+"minor":r.patch!==n.patch?p+"patch":"prerelease"};var ir={};ir=(e,t)=>new nX(e,t).major;var ii={};ii=(e,t)=>new nX(e,t).minor;var io={};io=(e,t)=>new nX(e,t).patch;var is={};is=(e,t)=>{let r=n5(e,t);return r&&r.prerelease.length?r.prerelease:null};var ia={};ia=(e,t,r)=>new nX(e,r).compare(new nX(t,r));var iu={};iu=(e,t,r)=>ia(t,e,r);var ip={};ip=(e,t)=>ia(e,t,!0);var il={};il=(e,t,r)=>{let n=new nX(e,r),i=new nX(t,r);return n.compare(i)||n.compareBuild(i)};var ic={};ic=(e,t)=>e.sort((e,r)=>il(e,r,t));var ih={};ih=(e,t)=>e.sort((e,r)=>il(r,e,t));var id={};id=(e,t,r)=>ia(e,t,r)>0;var iy={};iy=(e,t,r)=>0>ia(e,t,r);var ig={};ig=(e,t,r)=>0===ia(e,t,r);var iE={};iE=(e,t,r)=>0!==ia(e,t,r);var im={};im=(e,t,r)=>ia(e,t,r)>=0;var iv={};iv=(e,t,r)=>0>=ia(e,t,r);var ib={};ib=(e,t,r,n)=>{switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return ig(e,r,n);case"!=":return iE(e,r,n);case">":return id(e,r,n);case">=":return im(e,r,n);case"<":return iy(e,r,n);case"<=":return iv(e,r,n);default:throw TypeError(`Invalid operator: ${t}`)}};var iw={},nK=x("1Fo37"),iI=nK.safeRe,iS=nK.t;iw=(e,t)=>{if(e instanceof nX)return e;if("number"==typeof e&&(e=String(e)),"string"!=typeof e)return null;let r=null;if((t=t||{}).rtl){let n;let i=t.includePrerelease?iI[iS.COERCERTLFULL]:iI[iS.COERCERTL];for(;(n=i.exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&n.index+n[0].length===r.index+r[0].length||(r=n),i.lastIndex=n.index+n[1].length+n[2].length;i.lastIndex=-1}else r=e.match(t.includePrerelease?iI[iS.COERCEFULL]:iI[iS.COERCE]);if(null===r)return null;let n=r[2],i=r[3]||"0",o=r[4]||"0",s=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return n5(`${n}.${i}.${o}${s}${a}`,t)};var iT={};const i_=Symbol("SemVer ANY");class ix{static get ANY(){return i_}constructor(e,t){if(t=nQ(t),e instanceof ix){if(!!t.loose===e.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),nq("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===i_?this.value="":this.value=this.operator+this.semver.version,nq("comp",this)}parse(e){let t=this.options.loose?iO[iP.COMPARATORLOOSE]:iO[iP.COMPARATOR],r=e.match(t);if(!r)throw TypeError(`Invalid comparator: ${e}`);this.operator=void 0!==r[1]?r[1]:"","="===this.operator&&(this.operator=""),r[2]?this.semver=new nX(r[2],this.options.loose):this.semver=i_}toString(){return this.value}test(e){if(nq("Comparator.test",e,this.options.loose),this.semver===i_||e===i_)return!0;if("string"==typeof e)try{e=new nX(e,this.options)}catch(e){return!1}return ib(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof ix))throw TypeError("a Comparator is required");return""===this.operator?""===this.value||new iA(e.value,t).test(this.value):""===e.operator?""===e.value||new iA(this.value,t).test(e.semver):!((t=nQ(t)).includePrerelease&&("<0.0.0-0"===this.value||"<0.0.0-0"===e.value)||!t.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0")))&&!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||ib(this.semver,"<",e.semver,t)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||ib(this.semver,">",e.semver,t)&&this.operator.startsWith("<")&&e.operator.startsWith(">"))}}iT=ix;var nK=x("1Fo37"),iO=nK.safeRe,iP=nK.t,nq=x("gEWXU"),iA={};class ik{constructor(e,t){if(t=nQ(t),e instanceof ik){if(!!t.loose===e.loose&&!!t.includePrerelease===e.includePrerelease)return e;return new ik(e.raw,t)}if(e instanceof iT)return this.raw=e.value,this.set=[[e]],this.format(),this;if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(e=>this.parseRange(e.trim())).filter(e=>e.length),!this.set.length)throw TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let e=this.set[0];if(this.set=this.set.filter(e=>!i4(e[0])),0===this.set.length)this.set=[e];else if(this.set.length>1){for(let e of this.set)if(1===e.length&&i8(e[0])){this.set=[e];break}}}this.format()}format(){return this.range=this.set.map(e=>e.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(e){let t=((this.options.includePrerelease&&i3)|(this.options.loose&&i6))+":"+e,r=iZ.get(t);if(r)return r;let n=this.options.loose,i=n?iJ[iQ.HYPHENRANGELOOSE]:iJ[iQ.HYPHENRANGE];e=e.replace(i,ou(this.options.includePrerelease)),nq("hyphen replace",e),e=e.replace(iJ[iQ.COMPARATORTRIM],i0),nq("comparator trim",e),e=e.replace(iJ[iQ.TILDETRIM],i1),nq("tilde trim",e),e=e.replace(iJ[iQ.CARETTRIM],i2),nq("caret trim",e);let o=e.split(" ").map(e=>i9(e,this.options)).join(" ").split(/\s+/).map(e=>oa(e,this.options));n&&(o=o.filter(e=>(nq("loose invalid filter",e,this.options),!!e.match(iJ[iQ.COMPARATORLOOSE])))),nq("range list",o);let s=new Map;for(let e of o.map(e=>new iT(e,this.options))){if(i4(e))return[e];s.set(e.value,e)}s.size>1&&s.has("")&&s.delete("");let a=[...s.values()];return iZ.set(t,a),a}intersects(e,t){if(!(e instanceof ik))throw TypeError("a Range is required");return this.set.some(r=>i5(r,t)&&e.set.some(e=>i5(e,t)&&r.every(r=>e.every(e=>r.intersects(e,t)))))}test(e){if(!e)return!1;if("string"==typeof e)try{e=new nX(e,this.options)}catch(e){return!1}for(let t=0;t<this.set.length;t++)if(op(this.set[t],e,this.options))return!0;return!1}}iA=ik;var iN={};function iR(e){var t=this;if(t instanceof iR||(t=new iR),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach(function(e){t.push(e)});else if(arguments.length>0)for(var r=0,n=arguments.length;r<n;r++)t.push(arguments[r]);return t}function iU(e,t,r,n){if(!(this instanceof iU))return new iU(e,t,r,n);this.list=n,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,r?(r.prev=this,this.next=r):this.next=null}iN=iR,iR.Node=iU,iR.create=iR,iR.prototype.removeNode=function(e){if(e.list!==this)throw Error("removing node which does not belong to this list");var t=e.next,r=e.prev;return t&&(t.prev=r),r&&(r.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=r),e.list.length--,e.next=null,e.prev=null,e.list=null,t},iR.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},iR.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},iR.prototype.push=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.tail=new iU(e,this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length},iR.prototype.unshift=function(){for(var e,t=0,r=arguments.length;t<r;t++)e=arguments[t],this.head=new iU(e,null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length},iR.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},iR.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},iR.prototype.forEach=function(e,t){t=t||this;for(var r=this.head,n=0;null!==r;n++)e.call(t,r.value,n,this),r=r.next},iR.prototype.forEachReverse=function(e,t){t=t||this;for(var r=this.tail,n=this.length-1;null!==r;n--)e.call(t,r.value,n,this),r=r.prev},iR.prototype.get=function(e){for(var t=0,r=this.head;null!==r&&t<e;t++)r=r.next;if(t===e&&null!==r)return r.value},iR.prototype.getReverse=function(e){for(var t=0,r=this.tail;null!==r&&t<e;t++)r=r.prev;if(t===e&&null!==r)return r.value},iR.prototype.map=function(e,t){t=t||this;for(var r=new iR,n=this.head;null!==n;)r.push(e.call(t,n.value,this)),n=n.next;return r},iR.prototype.mapReverse=function(e,t){t=t||this;for(var r=new iR,n=this.tail;null!==n;)r.push(e.call(t,n.value,this)),n=n.prev;return r},iR.prototype.reduce=function(e,t){var r,n=this.head;if(arguments.length>1)r=t;else if(this.head)n=this.head.next,r=this.head.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=0;null!==n;i++)r=e(r,n.value,i),n=n.next;return r},iR.prototype.reduceReverse=function(e,t){var r,n=this.tail;if(arguments.length>1)r=t;else if(this.tail)n=this.tail.prev,r=this.tail.value;else throw TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;null!==n;i--)r=e(r,n.value,i),n=n.prev;return r},iR.prototype.toArray=function(){for(var e=Array(this.length),t=0,r=this.head;null!==r;t++)e[t]=r.value,r=r.next;return e},iR.prototype.toArrayReverse=function(){for(var e=Array(this.length),t=0,r=this.tail;null!==r;t++)e[t]=r.value,r=r.prev;return e},iR.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new iR;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(;null!==i&&n<t;n++,i=i.next)r.push(i.value);return r},iR.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new iR;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var n=this.length,i=this.tail;null!==i&&n>t;n--)i=i.prev;for(;null!==i&&n>e;n--,i=i.prev)r.push(i.value);return r},iR.prototype.splice=function(e,t,...r){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var n=0,i=this.head;null!==i&&n<e;n++)i=i.next;for(var o=[],n=0;i&&n<t;n++)o.push(i.value),i=this.removeNode(i);null===i&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var n=0;n<r.length;n++)i=function(e,t,r){var n=t===e.head?new iU(r,null,t,e):new iU(r,t,t.next,e);return null===n.next&&(e.tail=n),null===n.prev&&(e.head=n),e.length++,n}(this,i,r[n]);return o},iR.prototype.reverse=function(){for(var e=this.head,t=this.tail,r=e;null!==r;r=r.prev){var n=r.prev;r.prev=r.next,r.next=n}return this.head=t,this.tail=e,this};try{x("3ByjW")(iR)}catch(e){}const iB=Symbol("max"),iL=Symbol("length"),iC=Symbol("lengthCalculator"),iM=Symbol("allowStale"),iD=Symbol("maxAge"),iH=Symbol("dispose"),iF=Symbol("noDisposeOnSet"),iG=Symbol("lruList"),ij=Symbol("cache"),iV=Symbol("updateAgeOnGet"),iW=()=>1,iK=(e,t,r)=>{let n=e[ij].get(t);if(n){let t=n.value;if(i$(e,t)){if(iq(e,n),!e[iM])return}else r&&(e[iV]&&(n.value.now=Date.now()),e[iG].unshiftNode(n));return t.value}},i$=(e,t)=>{if(!t||!t.maxAge&&!e[iD])return!1;let r=Date.now()-t.now;return t.maxAge?r>t.maxAge:e[iD]&&r>e[iD]},iX=e=>{if(e[iL]>e[iB])for(let t=e[iG].tail;e[iL]>e[iB]&&null!==t;){let r=t.prev;iq(e,t),t=r}},iq=(e,t)=>{if(t){let r=t.value;e[iH]&&e[iH](r.key,r.value),e[iL]-=r.length,e[ij].delete(r.key),e[iG].removeNode(t)}};class iz{constructor(e,t,r,n,i){this.key=e,this.value=t,this.length=r,this.now=n,this.maxAge=i||0}}const iY=(e,t,r,n)=>{let i=r.value;i$(e,i)&&(iq(e,r),e[iM]||(i=void 0)),i&&t.call(n,i.value,i.key,e)},iZ=new class{constructor(e){if("number"==typeof e&&(e={max:e}),e||(e={}),e.max&&("number"!=typeof e.max||e.max<0))throw TypeError("max must be a non-negative number");this[iB]=e.max||1/0;let t=e.length||iW;if(this[iC]="function"!=typeof t?iW:t,this[iM]=e.stale||!1,e.maxAge&&"number"!=typeof e.maxAge)throw TypeError("maxAge must be a number");this[iD]=e.maxAge||0,this[iH]=e.dispose,this[iF]=e.noDisposeOnSet||!1,this[iV]=e.updateAgeOnGet||!1,this.reset()}set max(e){if("number"!=typeof e||e<0)throw TypeError("max must be a non-negative number");this[iB]=e||1/0,iX(this)}get max(){return this[iB]}set allowStale(e){this[iM]=!!e}get allowStale(){return this[iM]}set maxAge(e){if("number"!=typeof e)throw TypeError("maxAge must be a non-negative number");this[iD]=e,iX(this)}get maxAge(){return this[iD]}set lengthCalculator(e){"function"!=typeof e&&(e=iW),e!==this[iC]&&(this[iC]=e,this[iL]=0,this[iG].forEach(e=>{e.length=this[iC](e.value,e.key),this[iL]+=e.length})),iX(this)}get lengthCalculator(){return this[iC]}get length(){return this[iL]}get itemCount(){return this[iG].length}rforEach(e,t){t=t||this;for(let r=this[iG].tail;null!==r;){let n=r.prev;iY(this,e,r,t),r=n}}forEach(e,t){t=t||this;for(let r=this[iG].head;null!==r;){let n=r.next;iY(this,e,r,t),r=n}}keys(){return this[iG].toArray().map(e=>e.key)}values(){return this[iG].toArray().map(e=>e.value)}reset(){this[iH]&&this[iG]&&this[iG].length&&this[iG].forEach(e=>this[iH](e.key,e.value)),this[ij]=new Map,this[iG]=new iN,this[iL]=0}dump(){return this[iG].map(e=>!i$(this,e)&&{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[iG]}set(e,t,r){if((r=r||this[iD])&&"number"!=typeof r)throw TypeError("maxAge must be a number");let n=r?Date.now():0,i=this[iC](t,e);if(this[ij].has(e)){if(i>this[iB])return iq(this,this[ij].get(e)),!1;let o=this[ij].get(e).value;return this[iH]&&!this[iF]&&this[iH](e,o.value),o.now=n,o.maxAge=r,o.value=t,this[iL]+=i-o.length,o.length=i,this.get(e),iX(this),!0}let o=new iz(e,t,i,n,r);return o.length>this[iB]?(this[iH]&&this[iH](e,t),!1):(this[iL]+=o.length,this[iG].unshift(o),this[ij].set(e,this[iG].head),iX(this),!0)}has(e){return!!this[ij].has(e)&&!i$(this,this[ij].get(e).value)}get(e){return iK(this,e,!0)}peek(e){return iK(this,e,!1)}pop(){let e=this[iG].tail;return e?(iq(this,e),e.value):null}del(e){iq(this,this[ij].get(e))}load(e){this.reset();let t=Date.now();for(let r=e.length-1;r>=0;r--){let n=e[r],i=n.e||0;if(0===i)this.set(n.k,n.v);else{let e=i-t;e>0&&this.set(n.k,n.v,e)}}}prune(){this[ij].forEach((e,t)=>iK(this,t,!1))}}({max:1e3});var nq=x("gEWXU"),nK=x("1Fo37"),iJ=nK.safeRe,iQ=nK.t,i0=nK.comparatorTrimReplace,i1=nK.tildeTrimReplace,i2=nK.caretTrimReplace,n$=x("jSdlU"),i3=n$.FLAG_INCLUDE_PRERELEASE,i6=n$.FLAG_LOOSE;const i4=e=>"<0.0.0-0"===e.value,i8=e=>""===e.value,i5=(e,t)=>{let r=!0,n=e.slice(),i=n.pop();for(;r&&n.length;)r=n.every(e=>i.intersects(e,t)),i=n.pop();return r},i9=(e,t)=>(nq("comp",e,t),e=or(e,t),nq("caret",e),e=oe(e,t),nq("tildes",e),e=oi(e,t),nq("xrange",e),e=os(e,t),nq("stars",e),e),i7=e=>!e||"x"===e.toLowerCase()||"*"===e,oe=(e,t)=>e.trim().split(/\s+/).map(e=>ot(e,t)).join(" "),ot=(e,t)=>{let r=t.loose?iJ[iQ.TILDELOOSE]:iJ[iQ.TILDE];return e.replace(r,(t,r,n,i,o)=>{let s;return nq("tilde",e,t,r,n,i,o),i7(r)?s="":i7(n)?s=`>=${r}.0.0 <${+r+1}.0.0-0`:i7(i)?s=`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:o?(nq("replaceTilde pr",o),s=`>=${r}.${n}.${i}-${o} <${r}.${+n+1}.0-0`):s=`>=${r}.${n}.${i} <${r}.${+n+1}.0-0`,nq("tilde return",s),s})},or=(e,t)=>e.trim().split(/\s+/).map(e=>on(e,t)).join(" "),on=(e,t)=>{nq("caret",e,t);let r=t.loose?iJ[iQ.CARETLOOSE]:iJ[iQ.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(t,r,i,o,s)=>{let a;return nq("caret",e,t,r,i,o,s),i7(r)?a="":i7(i)?a=`>=${r}.0.0${n} <${+r+1}.0.0-0`:i7(o)?a="0"===r?`>=${r}.${i}.0${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.0${n} <${+r+1}.0.0-0`:s?(nq("replaceCaret pr",s),a="0"===r?"0"===i?`>=${r}.${i}.${o}-${s} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}-${s} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o}-${s} <${+r+1}.0.0-0`):(nq("no pr"),a="0"===r?"0"===i?`>=${r}.${i}.${o}${n} <${r}.${i}.${+o+1}-0`:`>=${r}.${i}.${o}${n} <${r}.${+i+1}.0-0`:`>=${r}.${i}.${o} <${+r+1}.0.0-0`),nq("caret return",a),a})},oi=(e,t)=>(nq("replaceXRanges",e,t),e.split(/\s+/).map(e=>oo(e,t)).join(" ")),oo=(e,t)=>{e=e.trim();let r=t.loose?iJ[iQ.XRANGELOOSE]:iJ[iQ.XRANGE];return e.replace(r,(r,n,i,o,s,a)=>{nq("xRange",e,r,n,i,o,s,a);let u=i7(i),p=u||i7(o),l=p||i7(s);return"="===n&&l&&(n=""),a=t.includePrerelease?"-0":"",u?r=">"===n||"<"===n?"<0.0.0-0":"*":n&&l?(p&&(o=0),s=0,">"===n?(n=">=",p?(i=+i+1,o=0):o=+o+1,s=0):"<="===n&&(n="<",p?i=+i+1:o=+o+1),"<"===n&&(a="-0"),r=`${n+i}.${o}.${s}${a}`):p?r=`>=${i}.0.0${a} <${+i+1}.0.0-0`:l&&(r=`>=${i}.${o}.0${a} <${i}.${+o+1}.0-0`),nq("xRange return",r),r})},os=(e,t)=>(nq("replaceStars",e,t),e.trim().replace(iJ[iQ.STAR],"")),oa=(e,t)=>(nq("replaceGTE0",e,t),e.trim().replace(iJ[t.includePrerelease?iQ.GTE0PRE:iQ.GTE0],"")),ou=e=>(t,r,n,i,o,s,a,u,p,l,f,c,h)=>(r=i7(n)?"":i7(i)?`>=${n}.0.0${e?"-0":""}`:i7(o)?`>=${n}.${i}.0${e?"-0":""}`:s?`>=${r}`:`>=${r}${e?"-0":""}`,u=i7(p)?"":i7(l)?`<${+p+1}.0.0-0`:i7(f)?`<${p}.${+l+1}.0-0`:c?`<=${p}.${l}.${f}-${c}`:e?`<${p}.${l}.${+f+1}-0`:`<=${u}`,`${r} ${u}`.trim()),op=(e,t,r)=>{for(let r=0;r<e.length;r++)if(!e[r].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let r=0;r<e.length;r++)if(nq(e[r].semver),e[r].semver!==iT.ANY&&e[r].semver.prerelease.length>0){let n=e[r].semver;if(n.major===t.major&&n.minor===t.minor&&n.patch===t.patch)return!0}return!1}return!0};var ol={};ol=(e,t,r)=>{try{t=new iA(t,r)}catch(e){return!1}return t.test(e)};var of={};of=(e,t)=>new iA(e,t).set.map(e=>e.map(e=>e.value).join(" ").trim().split(" "));var oc={};oc=(e,t,r)=>{let n=null,i=null,o=null;try{o=new iA(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(!n||-1===i.compare(e))&&(i=new nX(n=e,r))}),n};var oh={};oh=(e,t,r)=>{let n=null,i=null,o=null;try{o=new iA(t,r)}catch(e){return null}return e.forEach(e=>{o.test(e)&&(!n||1===i.compare(e))&&(i=new nX(n=e,r))}),n};var od={};od=(e,t)=>{e=new iA(e,t);let r=new nX("0.0.0");if(e.test(r)||(r=new nX("0.0.0-0"),e.test(r)))return r;r=null;for(let t=0;t<e.set.length;++t){let n=e.set[t],i=null;n.forEach(e=>{let t=new nX(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":(!i||id(t,i))&&(i=t);break;case"<":case"<=":break;default:throw Error(`Unexpected operation: ${e.operator}`)}}),i&&(!r||id(r,i))&&(r=i)}return r&&e.test(r)?r:null};var oy={};oy=(e,t)=>{try{return new iA(e,t).range||"*"}catch(e){return null}};var og={};const{ANY:oE}=iT;og=(e,t,r,n)=>{let i,o,s,a,u;switch(e=new nX(e,n),t=new iA(t,n),r){case">":i=id,o=iv,s=iy,a=">",u=">=";break;case"<":i=iy,o=im,s=id,a="<",u="<=";break;default:throw TypeError('Must provide a hilo val of "<" or ">"')}if(ol(e,t,n))return!1;for(let r=0;r<t.set.length;++r){let p=t.set[r],l=null,f=null;if(p.forEach(e=>{e.semver===oE&&(e=new iT(">=0.0.0")),l=l||e,f=f||e,i(e.semver,l.semver,n)?l=e:s(e.semver,f.semver,n)&&(f=e)}),l.operator===a||l.operator===u||(!f.operator||f.operator===a)&&o(e,f.semver)||f.operator===u&&s(e,f.semver))return!1}return!0};var om={};om=(e,t,r)=>og(e,t,">",r);var ov={};ov=(e,t,r)=>og(e,t,"<",r);var ob={};ob=(e,t,r)=>(e=new iA(e,r),t=new iA(t,r),e.intersects(t,r));var ow={};ow=(e,t,r)=>{let n=[],i=null,o=null,s=e.sort((e,t)=>ia(e,t,r));for(let e of s)ol(e,t,r)?(o=e,i||(i=e)):(o&&n.push([i,o]),o=null,i=null);i&&n.push([i,null]);let a=[];for(let[e,t]of n)e===t?a.push(e):t||e!==s[0]?t?e===s[0]?a.push(`<=${t}`):a.push(`${e} - ${t}`):a.push(`>=${e}`):a.push("*");let u=a.join(" || "),p="string"==typeof t.raw?t.raw:String(t);return u.length<p.length?u:t};var oI={};const{ANY:oS}=iT,oT=[new iT(">=0.0.0-0")],o_=[new iT(">=0.0.0")],ox=(e,t,r)=>{let n,i,o,s,a,u,p;if(e===t)return!0;if(1===e.length&&e[0].semver===oS){if(1===t.length&&t[0].semver===oS)return!0;e=r.includePrerelease?oT:o_}if(1===t.length&&t[0].semver===oS){if(r.includePrerelease)return!0;t=o_}let l=new Set;for(let t of e)">"===t.operator||">="===t.operator?n=oO(n,t,r):"<"===t.operator||"<="===t.operator?i=oP(i,t,r):l.add(t.semver);if(l.size>1||n&&i&&((o=ia(n.semver,i.semver,r))>0||0===o&&(">="!==n.operator||"<="!==i.operator)))return null;for(let e of l){if(n&&!ol(e,String(n),r)||i&&!ol(e,String(i),r))return null;for(let n of t)if(!ol(e,String(n),r))return!1;return!0}let f=!!i&&!r.includePrerelease&&!!i.semver.prerelease.length&&i.semver,c=!!n&&!r.includePrerelease&&!!n.semver.prerelease.length&&n.semver;for(let e of(f&&1===f.prerelease.length&&"<"===i.operator&&0===f.prerelease[0]&&(f=!1),t)){if(p=p||">"===e.operator||">="===e.operator,u=u||"<"===e.operator||"<="===e.operator,n){if(c&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===c.major&&e.semver.minor===c.minor&&e.semver.patch===c.patch&&(c=!1),">"===e.operator||">="===e.operator){if((s=oO(n,e,r))===e&&s!==n)return!1}else if(">="===n.operator&&!ol(n.semver,String(e),r))return!1}if(i){if(f&&e.semver.prerelease&&e.semver.prerelease.length&&e.semver.major===f.major&&e.semver.minor===f.minor&&e.semver.patch===f.patch&&(f=!1),"<"===e.operator||"<="===e.operator){if((a=oP(i,e,r))===e&&a!==i)return!1}else if("<="===i.operator&&!ol(i.semver,String(e),r))return!1}if(!e.operator&&(i||n)&&0!==o)return!1}return(!n||!u||!!i||0===o)&&(!i||!p||!!n||0===o)&&!c&&!f},oO=(e,t,r)=>{if(!e)return t;let n=ia(e.semver,t.semver,r);return n>0?e:n<0?t:">"===t.operator&&">="===e.operator?t:e},oP=(e,t,r)=>{if(!e)return t;let n=ia(e.semver,t.semver,r);return n<0?e:n>0?t:"<"===t.operator&&"<="===e.operator?t:e};oI=(e,t,r={})=>{if(e===t)return!0;e=new iA(e,r),t=new iA(t,r);let n=!1;e:for(let i of e.set){for(let e of t.set){let t=ox(i,e,r);if(n=n||null!==t,t)continue e}if(n)return!1}return!0},nW={parse:n5,valid:n9,clean:n7,inc:ie,diff:it,major:ir,minor:ii,patch:io,prerelease:is,compare:ia,rcompare:iu,compareLoose:ip,compareBuild:il,sort:ic,rsort:ih,gt:id,lt:iy,eq:ig,neq:iE,gte:im,lte:iv,cmp:ib,coerce:iw,Comparator:iT,Range:iA,satisfies:ol,toComparators:of,maxSatisfying:oc,minSatisfying:oh,minVersion:od,validRange:oy,outside:og,gtr:om,ltr:ov,intersects:ob,simplifyRange:ow,subset:oI,SemVer:nX,re:nK.re,src:nK.src,tokens:nK.t,SEMVER_SPEC_VERSION:n$.SEMVER_SPEC_VERSION,RELEASE_TYPES:n$.RELEASE_TYPES,compareIdentifiers:n2.compareIdentifiers,rcompareIdentifiers:n2.rcompareIdentifiers},(n=w||(w={})).blue="blue",n.nanoS="nanoS",n.nanoSP="nanoSP",n.nanoX="nanoX",n.stax="stax",n.europa="europa";const oA={[w.blue]:{id:w.blue,productName:"LedgerBlue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:491520,masks:[822083584,822149120],getBlockSize:e=>4096},[w.nanoS]:{id:w.nanoS,productName:"LedgerNanoS",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:327680,masks:[823132160],getBlockSize:e=>{var t;return S(nW).lt(null!==(t=S(nW).coerce(e))&&void 0!==t?t:"","2.0.0")?4096:2048}},[w.nanoX]:{id:w.nanoX,productName:"LedgerNanoX",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2097152,masks:[855638016],getBlockSize:e=>4096,bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},[w.nanoSP]:{id:w.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1569792,masks:[856686592],getBlockSize:e=>32},[w.stax]:{id:w.stax,productName:"LedgerStax",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:1569792,masks:[857735168],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},[w.europa]:{id:w.europa,productName:"Ledger Europa",productIdMM:112,legacyUsbProductId:7,usbOnly:!1,memorySize:1569792,masks:[858783744],getBlockSize:e=>32,bluetoothSpec:[{serviceUuid:"13d63400-2c97-3004-0000-4c6564676572",notifyUuid:"13d63400-2c97-3004-0001-4c6564676572",writeUuid:"13d63400-2c97-3004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-3004-0003-4c6564676572"}]}};w.blue,w.nanoS,w.nanoSP,w.nanoX,w.stax,w.europa;const ok=Object.values(oA),oN=e=>{let t=ok.find(t=>t.legacyUsbProductId===e);if(t)return t;let r=e>>8;return ok.find(e=>e.productIdMM===r)},oR=[],oU={};for(const e in oA){let t=oA[e],{bluetoothSpec:r}=t;if(r)for(let e=0;e<r.length;e++){let n=r[e];oR.push(n.serviceUuid),oU[n.serviceUuid]=oU[n.serviceUuid.replace(/-/g,"")]=Object.assign({deviceModel:t},n)}}var oB=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};const oL=[{vendorId:11415}];function oC(){return oB(this,void 0,void 0,function*(){return yield navigator.usb.requestDevice({filters:oL})})}function oM(){return oB(this,void 0,void 0,function*(){return(yield navigator.usb.getDevices()).filter(e=>11415===e.vendorId)})}var nt=x("6ZWSX"),oD=nt.Buffer,oH=function(e,t,r,n){return new(r||(r=Promise))(function(i,o){function s(e){try{u(n.next(e))}catch(e){o(e)}}function a(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){var t;e.done?i(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})};class oF extends nF{constructor(e,t){super(),this.channel=Math.floor(65535*Math.random()),this.packetSize=64,this._disconnectEmitted=!1,this._emitDisconnect=e=>{this._disconnectEmitted||(this._disconnectEmitted=!0,this.emit("disconnect",e))},this.device=e,this.interfaceNumber=t,this.deviceModel=oN(e.productId)}static request(){return oH(this,void 0,void 0,function*(){let e=yield oC();return oF.open(e)})}static openConnected(){return oH(this,void 0,void 0,function*(){let e=yield oM();return 0===e.length?null:oF.open(e[0])})}static open(e){return oH(this,void 0,void 0,function*(){yield e.open(),null===e.configuration&&(yield e.selectConfiguration(1)),yield oG(e);let t=e.configurations[0].interfaces.find(({alternates:e})=>e.some(e=>255===e.interfaceClass));if(!t)throw new nk("No WebUSB interface found for your Ledger device. Please upgrade firmware or contact techsupport.");let r=t.interfaceNumber;try{yield e.claimInterface(r)}catch(t){throw yield e.close(),new nk(t.message)}let n=new oF(e,r),i=t=>{e===t.device&&(navigator.usb.removeEventListener("disconnect",i),n._emitDisconnect(new nO))};return navigator.usb.addEventListener("disconnect",i),n})}close(){return oH(this,void 0,void 0,function*(){yield this.exchangeBusyPromise,yield this.device.releaseInterface(this.interfaceNumber),yield oG(this.device),yield this.device.close()})}exchange(e){return oH(this,void 0,void 0,function*(){return yield this.exchangeAtomicImpl(()=>oH(this,void 0,void 0,function*(){let t,r;let{channel:n,packetSize:i}=this;r2("apdu","=> "+e.toString("hex"));let o=nV(n,i),s=o.makeBlocks(e);for(let e=0;e<s.length;e++)yield this.device.transferOut(3,s[e]);for(;!(t=o.getReducedResult(r));){let e=yield this.device.transferIn(3,i),t=oD.from(e.data.buffer);r=o.reduceResponse(r,t)}return r2("apdu","<= "+t.toString("hex")),t})).catch(e=>{if(e&&e.message&&e.message.includes("disconnected"))throw this._emitDisconnect(e),new nP(e.message);throw e})})}setScrambleKey(){}}function oG(e){return oH(this,void 0,void 0,function*(){try{yield e.reset()}catch(e){console.warn(e)}})}oF.isSupported=()=>Promise.resolve(!!navigator&&!!navigator.usb&&"function"==typeof navigator.usb.getDevices),oF.list=oM,oF.listen=e=>{let t=!1;return(function(){return oB(this,void 0,void 0,function*(){let e=yield oM();return e.length>0?e[0]:oC()})})().then(r=>{if(!t){let t=oN(r.productId);e.next({type:"add",descriptor:r,deviceModel:t}),e.complete()}},t=>{window.DOMException&&t instanceof window.DOMException&&18===t.code?e.error(new nR(t.message)):e.error(new nA(t.message))}),{unsubscribe:function(){t=!0}}};const oj="<h1>Click anywhere to connect to Ledger...</h1>",oV=document.getElementById("main");if(!oV)throw Error("no main");oV.innerHTML=oj,document.body.addEventListener("click",async()=>{oV.innerHTML=oj;try{let e=await oF.create();r4(e=>console.log(e));let t=new r5.AppClient(e),r=await t.getMasterFingerprint();console.log("Master key fingerprint:",r.toString("hex"));let n=await t.getAppAndVersion();console.log("App and version:",n);let i=`
    wsh(
      or_d(
        or_d(
          pk(@0/<0;1>/*),
          or_d(
            pk(@1/<0;1>/*),
            pk(@2/<0;1>/*)
          )
        ),
        and_v(
          v:pkh(@3/<0;1>/*),
          older(65535)
        )
      )
    )`.replace(/\s+/g,"");console.log(i);let o=new r5.WalletPolicy("Miniscript",i,["xpub67yMUMbr2gAnBgnYvXcbJq8iUBe54Ev2dbUYKGN8jGY21AHJFeR7mnZqhbUNze4UbpRE9S1fWvmFCsFN4EvU1rWdqegW7dzoa7vZmYCLAAy","xpub6BosfCnifzxcFwrSzQiqu2DBVTshkCXacvNsWGYJVVhhawA7d4R5WSWGFNbi8Aw6ZRc1brxMyWMzG3DSSSSoekkudhUd9yLb6qx39T9nMdj","xpub6C6nQwHaWbSrzs5tZ1q7m5R9cPK9eYpNMFesiXsYrgc1P8bvLLAet9JfHjYXKjToD8cBRswJXXbbFpXgwsswVPAZzKMa1jUp2kVkGVUaJa7","xpub6CatWdiZiodmUeTDp8LT5or8nmbKNcuyvz7WyksVFkKB4RHwCD3XyuvPEbvqAQY3rAPshWcMLoP2fMFMKHPJ4ZeZXYVUhLv1VMrjPC7PW6V"]),[s,a]=await t.registerWallet(o);console.log(s,a)}catch(t){console.error(t);let e=document.createElement("code");e.style.color="#f66",e.textContent=String(t.message||t),oV.appendChild(e)}});
//# sourceMappingURL=index.17895c67.js.map
